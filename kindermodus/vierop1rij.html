<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Vier op een Rij ‚Äì Orthodoxe Kinderpagina</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png">
  <style>
    :root {
      --primair:#7bb235; --donker:#67510C;
      --pastel1:#fff6e5; --pastel2:#fffde6; --pastel3:#ffe8ec; --pastel4:#e7f8ff;
    }
    body { margin:0; font-family:Arial,sans-serif; background:#f5e9b8; color:#6f4e1a; }

    /* ===== HEADER ===== */
    header {
      background: var(--primair);
      color: white;
      padding: 10px;
      text-align: center;
      font-size: 20px;
      font-weight: bold;
    }
    header img {
      height: 28px;
      vertical-align: middle;
      margin-right: 8px;
    }

    /* ===== MENUBALK ===== */
    nav.menu {
      background: var(--donker);
      display: flex; flex-wrap: wrap;
      justify-content: center;
      gap: 12px;
      padding: 10px;
    }
    nav.menu a {
      color: white; text-decoration: none;
      font-weight: bold; padding: 6px 10px;
      background: var(--primair); border-radius: 6px;
    }

    /* ===== SPEL ===== */
    main { text-align:center; padding:20px; }
    #board {
      display: grid;
      grid-template-columns: repeat(7, 60px);
      grid-template-rows: repeat(6, 60px);
      gap: 5px;
      margin: 20px auto;
      width: max-content;
    }
    .cell {
      width: 60px; height: 60px;
      border-radius: 50%;
      background-color: #fff;
      border: 2px solid #6f4e1a;
      cursor: pointer;
    }
    .player { background-color: red; }
    .computer { background-color: yellow; }
    #status { margin-top: 15px; font-size: 18px; font-weight: bold; }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos.png" alt="Photeinos">
    Welkom bij de spelletjes!
  </header>

  <!-- MENU -->
  <nav class="menu">
    <a href="gebeden.html">üôè Ik bid</a>
    <a href="spelletjes.html">üéÆ Spelletjes</a>
    <a href="catechese.html">üìñ Catechese</a>
    <a href="dagboek.html">üìî Dagboek</a>
  </nav>

  <!-- SPEL -->
  <main>
    <h1>Vier op een Rij</h1>
    <div id="board"></div>
    <div id="status">Jij (rood) bent aan de beurt</div>
  </main>

  <script>
    const rows = 6, cols = 7;
    let board = Array.from({ length: rows }, () => Array(cols).fill(null));
    let gameOver = false;

    const boardDiv = document.getElementById("board");
    const statusDiv = document.getElementById("status");

    function createBoard() {
      boardDiv.innerHTML = "";
      for (let r = 0; r < rows; r++) {
        for (let c = 0; c < cols; c++) {
          const cell = document.createElement("div");
          cell.classList.add("cell");
          cell.dataset.row = r;
          cell.dataset.col = c;
          cell.addEventListener("click", playerMove);
          boardDiv.appendChild(cell);
        }
      }
    }

    function playerMove(e) {
      if (gameOver) return;
      const col = e.target.dataset.col;
      if (makeMove(col, "player")) {
        if (checkWin("player")) return endGame("Jij wint! üéâ");
        setTimeout(() => computerMove(), 400);
      }
    }

    function makeMove(col, who) {
      for (let r = rows - 1; r >= 0; r--) {
        if (!board[r][col]) {
          board[r][col] = who;
          updateBoard();
          return true;
        }
      }
      return false;
    }

    function updateBoard() {
      boardDiv.querySelectorAll(".cell").forEach(cell => {
        const r = cell.dataset.row, c = cell.dataset.col;
        cell.classList.remove("player", "computer");
        if (board[r][c] === "player") cell.classList.add("player");
        if (board[r][c] === "computer") cell.classList.add("computer");
      });
    }

    function checkWin(who) {
      const directions = [[0,1],[1,0],[1,1],[1,-1]];
      for (let r=0;r<rows;r++) {
        for (let c=0;c<cols;c++) {
          if (board[r][c]!==who) continue;
          for (let [dr,dc] of directions) {
            let count=1, rr=r+dr, cc=c+dc;
            while(rr>=0&&rr<rows&&cc>=0&&cc<cols&&board[rr][cc]===who){
              count++; rr+=dr; cc+=dc;
            }
            if(count>=4) return true;
          }
        }
      }
      return false;
    }

    function endGame(msg) {
      statusDiv.textContent = msg;
      gameOver = true;
      boardDiv.querySelectorAll(".cell").forEach(cell => cell.style.pointerEvents = "none");
    }

    /* ======= Kindvriendelijke AI ======= */
    function computerMove() {
      if (gameOver) return;

      // 1. Kan de computer winnen?
      for (let c=0;c<cols;c++){
        let r = getNextOpenRow(c);
        if (r!==-1){
          let temp = board.map(row=>[...row]);
          temp[r][c]="computer";
          if (checkWinner(temp)==="computer"){ makeMove(c,"computer"); if(checkWin("computer")) return endGame("De computer wint! ü§ñ"); return; }
        }
      }

      // 2. Moet de computer blokkeren?
      for (let c=0;c<cols;c++){
        let r = getNextOpenRow(c);
        if (r!==-1){
          let temp = board.map(row=>[...row]);
          temp[r][c]="player";
          if (checkWinner(temp)==="player"){ makeMove(c,"computer"); if(checkWin("computer")) return endGame("De computer wint! ü§ñ"); return; }
        }
      }

      // 3. Anders: random zet
      let available = [];
      for (let c=0;c<cols;c++) if(getNextOpenRow(c)!==-1) available.push(c);
      const col = available[Math.floor(Math.random()*available.length)];
      makeMove(col,"computer");
      if(checkWin("computer")) return endGame("De computer wint! ü§ñ");
      statusDiv.textContent = "Jij (rood) bent aan de beurt";
    }

    function getNextOpenRow(c){
      for(let r=rows-1;r>=0;r--){ if(!board[r][c]) return r; }
      return -1;
    }

    function checkWinner(tempBoard){
      const directions=[[0,1],[1,0],[1,1],[1,-1]];
      for(let r=0;r<rows;r++){
        for(let c=0;c<cols;c++){
          if(!tempBoard[r][c]) continue;
          const who=tempBoard[r][c];
          for(let[dr,dc] of directions){
            let count=1,rr=r+dr,cc=c+dc;
            while(rr>=0&&rr<rows&&cc>=0&&cc<cols&&tempBoard[rr][cc]===who){count++;rr+=dr;cc+=dc;}
            if(count>=4)return who;
          }
        }
      }
      return null;
    }

    createBoard();
  </script>
</body>
</html>
