<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Patience â€“ Orthodoxe Kinderpagina</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #2e8b57;
      color: #fff;
      text-align: center;
    }
    h1 { margin: 10px; }
    #game {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 20px;
    }
    #top {
      display: flex;
      justify-content: space-between;
      width: 100%;
      max-width: 1200px;
      margin-bottom: 20px;
    }
    #stock, #waste, .foundation {
      width: 90px;
      height: 130px;
      border: 2px dashed #fff;
      border-radius: 8px;
      background: rgba(255,255,255,0.1);
      position: relative;
      margin: 0 5px;
    }
    #foundations {
      display: flex;
    }
    #tableau {
      display: flex;
      justify-content: center;
      width: 100%;
      max-width: 1200px;
    }
    .pile {
      width: 90px;
      min-height: 130px;
      border: 2px dashed rgba(255,255,255,0.2);
      border-radius: 8px;
      margin: 0 5px;
      position: relative;
    }
    .card {
      width: 90px;
      height: 130px;
      border-radius: 8px;
      background: #fff;
      color: #000;
      position: absolute;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 22px;
      user-select: none;
      box-shadow: 0 2px 6px rgba(0,0,0,0.4);
      transition: transform 0.2s;
    }
    .card.red { color: red; }
    .card.black { color: black; }
    .card.back {
      background: linear-gradient(45deg, #7bb235, #67510C);
      color: transparent;
      cursor: pointer;
    }
    .hidden { display: none; }
    #message {
      margin-top: 20px;
      font-size: 22px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <h1>Patience â€“ Klondike</h1>
  <div id="game">
    <div id="top">
      <div style="display:flex;">
        <div id="stock"></div>
        <div id="waste"></div>
      </div>
      <div id="foundations">
        <div class="foundation" data-suit="â™ "></div>
        <div class="foundation" data-suit="â™¥"></div>
        <div class="foundation" data-suit="â™¦"></div>
        <div class="foundation" data-suit="â™£"></div>
      </div>
    </div>
    <div id="tableau">
      <div class="pile" data-index="0"></div>
      <div class="pile" data-index="1"></div>
      <div class="pile" data-index="2"></div>
      <div class="pile" data-index="3"></div>
      <div class="pile" data-index="4"></div>
      <div class="pile" data-index="5"></div>
      <div class="pile" data-index="6"></div>
    </div>
  </div>
  <div id="message"></div>

  <script>
    const suits = ["â™ ","â™¥","â™¦","â™£"];
    const values = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
    let deck = [];
    let stock = [], waste = [];
    let foundations = { "â™ ":[], "â™¥":[], "â™¦":[], "â™£":[] };
    let tableau = [[],[],[],[],[],[],[]];

    function createDeck(){
      deck = [];
      for(let s of suits){
        for(let v of values){
          deck.push({suit:s,value:v,faceUp:false});
        }
      }
      shuffle(deck);
    }
    function shuffle(a){
      for(let i=a.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        [a[i],a[j]]=[a[j],a[i]];
      }
    }
    function deal(){
      for(let i=0;i<7;i++){
        for(let j=0;j<=i;j++){
          const card=deck.pop();
          if(j===i) card.faceUp=true;
          tableau[i].push(card);
        }
      }
      stock=deck;
      deck=[];
      render();
    }
    function render(){
      document.querySelectorAll(".pile").forEach((p,i)=>{
        p.innerHTML="";
        tableau[i].forEach((card,j)=>{
          const div=document.createElement("div");
          div.classList.add("card");
          if(!card.faceUp) div.classList.add("back");
          else{
            div.textContent=card.value+card.suit;
            if(card.suit==="â™¥"||card.suit==="â™¦") div.classList.add("red");
            else div.classList.add("black");
          }
          div.style.top=(j*25)+"px";
          div.dataset.pile=i;
          div.dataset.index=j;
          p.appendChild(div);
        });
      });
      // stock
      const stockDiv=document.getElementById("stock");
      stockDiv.innerHTML="";
      if(stock.length){
        const div=document.createElement("div");
        div.classList.add("card","back");
        stockDiv.appendChild(div);
      }
      // waste
      const wasteDiv=document.getElementById("waste");
      wasteDiv.innerHTML="";
      if(waste.length){
        const top=waste[waste.length-1];
        const div=document.createElement("div");
        div.classList.add("card");
        div.textContent=top.value+top.suit;
        if(top.suit==="â™¥"||top.suit==="â™¦") div.classList.add("red");
        else div.classList.add("black");
        wasteDiv.appendChild(div);
      }
      // foundations
      document.querySelectorAll(".foundation").forEach(f=>{
        f.innerHTML="";
        const suit=f.dataset.suit;
        if(foundations[suit].length){
          const top=foundations[suit][foundations[suit].length-1];
          const div=document.createElement("div");
          div.classList.add("card");
          div.textContent=top.value+top.suit;
          if(top.suit==="â™¥"||top.suit==="â™¦") div.classList.add("red");
          else div.classList.add("black");
          f.appendChild(div);
        }
      });
      checkWin();
    }
    function valueIndex(v){ return values.indexOf(v); }

    function canPlaceOn(card,target){
      if(!target) return card.value==="K"; // lege tableau alleen koning
      if(!target.faceUp) return false;
      const diff=valueIndex(target.value)-valueIndex(card.value);
      const redSuits=["â™¥","â™¦"];
      const blackSuits=["â™ ","â™£"];
      const opposite= (redSuits.includes(card.suit)&&blackSuits.includes(target.suit)) ||
                      (blackSuits.includes(card.suit)&&redSuits.includes(target.suit));
      return diff===1 && opposite;
    }
    function canPlaceFoundation(card,suit){
      const pile=foundations[suit];
      if(pile.length===0) return card.value==="A";
      const last=pile[pile.length-1];
      return last.suit===card.suit && valueIndex(card.value)===valueIndex(last.value)+1;
    }

    function setupEvents(){
      document.getElementById("stock").onclick=()=>{
        if(stock.length){
          const card=stock.pop();
          card.faceUp=true;
          waste.push(card);
        }else{
          while(waste.length){
            const card=waste.pop();
            card.faceUp=false;
            stock.push(card);
          }
        }
        render();
      };
      document.getElementById("waste").onclick=()=>{
        if(!waste.length) return;
        const card=waste[waste.length-1];
        moveCard(card,"waste");
      };
      document.querySelectorAll(".foundation").forEach(f=>{
        f.onclick=()=>{
          if(!waste.length) return;
          const card=waste[waste.length-1];
          if(canPlaceFoundation(card,f.dataset.suit)){
            waste.pop();
            foundations[f.dataset.suit].push(card);
            render();
          }
        };
      });
      document.addEventListener("click",e=>{
        if(e.target.classList.contains("card") && e.target.parentElement.classList.contains("pile")){
          const pileIndex=parseInt(e.target.dataset.pile);
          const cardIndex=parseInt(e.target.dataset.index);
          const card=tableau[pileIndex][cardIndex];
          if(!card.faceUp){
            card.faceUp=true;
            render();
            return;
          }
          moveCard(card,"tableau",pileIndex,cardIndex);
        }
      });
    }
    function moveCard(card,from,pileIndex,cardIndex){
      // try foundations
      if(canPlaceFoundation(card,card.suit)){
        if(from==="waste") waste.pop();
        else tableau[pileIndex].splice(cardIndex);
        foundations[card.suit].push(card);
        render();
        return;
      }
      // try tableau
      document.querySelectorAll(".pile").forEach((p,i)=>{
        if(i!==pileIndex){
          const target=tableau[i][tableau[i].length-1];
          if(canPlaceOn(card,target)){
            const moving=from==="waste" ? [waste.pop()] : tableau[pileIndex].splice(cardIndex);
            tableau[i]=tableau[i].concat(moving);
            render();
          }
        }
      });
    }
    function checkWin(){
      if(Object.values(foundations).every(p=>p.length===13)){
        document.getElementById("message").textContent="ðŸŽ‰ Je hebt gewonnen!";
      }
    }

    // init
    createDeck();
    deal();
    setupEvents();
  </script>
</body>
</html>
