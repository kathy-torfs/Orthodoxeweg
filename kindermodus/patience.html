<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Patience â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="images/kruis.png" />

  <style>
    :root{
      --primair:#7bb235; --donker:#67510C;
      --pastel1:#fff6e5; --pastel2:#fffde6; --pastel3:#ffe8ec; --pastel4:#e7f8ff;
      --pastel5:#e6ffe5; --pastel6:#fff2fb; --pastel7:#f5ffe5; --pastel8:#f5e8ff;
      --pastel9:#fff6fb; --pastel10:#e7fff9; --pastel11:#f3e6ff; --pastel12:#ffeae6;
      --pastel13:#ecffe9; --pastel14:#f7fff3; --pastel15:#eafffa; --pastel16:#fff4ea;
    }
    body{margin:0;font-family:'Comic Sans MS',Arial,sans-serif;min-height:100vh;
      background:var(--pastel1);transition:background .6s;}
    main{max-width:1200px;margin:20px auto;padding:0 16px;text-align:center}

    .btn{background:var(--primair);color:#fff;border:none;border-radius:8px;
      padding:8px 14px;font-weight:bold;cursor:pointer;margin:6px;}

    #gameArea{display:none;flex-direction:column;align-items:center;margin-top:20px}
    .topRow{display:flex;justify-content:space-between;width:100%;max-width:1000px;margin-bottom:20px}
    .foundations,.stockWaste{display:flex;gap:12px}
    .pile{width:90px;height:120px;background:#fff;border:2px dashed #aaa;border-radius:8px;
      position:relative;display:flex;justify-content:center;align-items:center;font-size:28px;color:#888}
    .pile .icon{position:absolute;top:4px;left:4px;font-size:18px}
    .tableau{display:flex;justify-content:center;gap:12px;width:100%;max-width:1000px}
    .tableau .pile{height:400px;align-items:flex-start}

    .card{width:80px;height:110px;border-radius:8px;border:1px solid #ccc;
      display:flex;justify-content:center;align-items:center;font-size:40px;
      position:relative;user-select:none;background:#fff;cursor:pointer}
    .card .corner{position:absolute;font-size:14px;font-weight:bold}
    .tl{top:4px;left:6px}.tr{top:4px;right:6px}.bl{bottom:4px;left:6px}.br{bottom:4px;right:6px}
    .red{color:red}.black{color:black}

    #status{margin-top:20px;font-weight:bold}
    #rules{background:#fffef8;border:2px solid #e2d6b3;border-radius:12px;
      padding:16px;margin-top:30px;text-align:left}
  </style>

  <script defer src="common/layout.js"></script>
</head>
<body>
<div id="kinder-header" data-header-src="common/header.html"></div>

<main>
  <h1>Patience (Solitair) âœï¸ğŸ‘¼ğŸ“–ğŸ™</h1>
  <div>
    <button id="startBtn" class="btn">Spel starten (20 punten)</button>
    <select id="levelSelect" class="btn">
      <option value="1">Level 1 â€“ 1 kaart omdraaien</option>
      <option value="2">Level 2 â€“ 2 kaarten omdraaien</option>
      <option value="3">Level 3 â€“ 3 kaarten omdraaien</option>
    </select>
  </div>

  <div id="gameArea">
    <div class="topRow">
      <div class="foundations">
        <div class="pile" id="foundation1"><span class="icon">âœï¸</span></div>
        <div class="pile" id="foundation2"><span class="icon">ğŸ“–</span></div>
        <div class="pile" id="foundation3"><span class="icon">ğŸ™</span></div>
        <div class="pile" id="foundation4"><span class="icon">ğŸ‘¼</span></div>
      </div>
      <div class="stockWaste">
        <div class="pile" id="stock"><span class="icon">ğŸ“¦</span></div>
        <div class="pile" id="waste"><span class="icon">ğŸƒ</span></div>
      </div>
    </div>

    <div class="tableau">
      <div class="pile" id="tableau1"></div>
      <div class="pile" id="tableau2"></div>
      <div class="pile" id="tableau3"></div>
      <div class="pile" id="tableau4"></div>
      <div class="pile" id="tableau5"></div>
      <div class="pile" id="tableau6"></div>
      <div class="pile" id="tableau7"></div>
    </div>
  </div>

  <div id="status"></div>

  <div id="rules">
    <h2>ğŸ“– Spelregels</h2>
    <p>Het doel is om alle kaarten naar de vier <b>fundamenten</b> te verplaatsen:</p>
    <ul>
      <li><b>âœï¸ Kruisje</b>, <b>ğŸ“– Bijbel</b>, <b>ğŸ™ Biddende handen</b>, <b>ğŸ‘¼ Engeltje</b></li>
      <li>Begin met Aas en bouw op tot Koning.</li>
    </ul>
    <p>In de <b>tableau</b> bouw je aflopend en afwisselend in kleur (rood/zwart).</p>
    <p>Alleen een Koning (met rij) mag naar een lege plaats in de tableau.</p>
    <p><b>Stock ğŸ“¦</b>: klik om kaarten naar de <b>waste ğŸƒ</b> te draaien.  
      In level 1: 1 kaart, level 2: 2 kaarten, level 3: 3 kaarten.</p>
    <p>Het spel is gewonnen als alle kaarten in de fundamenten liggen ğŸ‰</p>
  </div>
</main>

<script>
(function(){
  const p=['var(--pastel1)','var(--pastel2)','var(--pastel3)','var(--pastel4)',
           'var(--pastel5)','var(--pastel6)','var(--pastel7)','var(--pastel8)',
           'var(--pastel9)','var(--pastel10)','var(--pastel11)','var(--pastel12)',
           'var(--pastel13)','var(--pastel14)','var(--pastel15)','var(--pastel16)'];
  document.body.style.background=p[Math.floor(Math.random()*p.length)];
})();

// header
(function boot(){
  if (!(window.KinderLayout)) return setTimeout(boot,120);
  const el=document.getElementById('kinder-header');
  window.KinderLayout.mountHeader({ rootId:'kinder-header', headerSrc:el.dataset.headerSrc, active:'spelletjes' });
})();

// kaartdefinities
const suits = [
  {icon:"âœï¸", color:"black"},
  {icon:"ğŸ“–", color:"red"},
  {icon:"ğŸ™", color:"black"},
  {icon:"ğŸ‘¼", color:"red"}
];
const values = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];

let deck = [];
let stock=[], waste=[], foundations=[[],[],[],[]], tableau=[[],[],[],[],[],[],[]];
let level=1, punten=100;

function createDeck(){
  deck=[];
  suits.forEach((suit,si)=>{
    values.forEach(v=>{
      deck.push({suit:si,value:v,color:suit.color});
    });
  });
}
function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]];}return a;}

function deal(){
  // tableau
  let dIndex=0;
  for(let i=0;i<7;i++){
    for(let j=0;j<=i;j++){
      tableau[i].push(deck[dIndex++]);
    }
  }
  stock=deck.slice(dIndex);
  render();
}
function render(){
  function makeCard(c){
    const div=document.createElement("div");
    div.className="card "+(c.color==="red"?"red":"black");
    div.innerHTML=`<span class="corner tl">${c.value}</span>
                   <span class="corner tr">${c.value}</span>
                   <span>${suits[c.suit].icon}</span>
                   <span class="corner bl">${c.value}</span>
                   <span class="corner br">${c.value}</span>`;
    return div;
  }
  // tableau
  for(let i=0;i<7;i++){
    const pile=document.getElementById("tableau"+(i+1));
    pile.innerHTML="";
    tableau[i].forEach((c,idx)=>{
      const card=makeCard(c);
      card.style.marginTop=idx*30+"px";
      pile.appendChild(card);
    });
  }
  // stock
  document.getElementById("stock").innerHTML = stock.length? "ğŸ“¦":"";
  // waste
  const wasteDiv=document.getElementById("waste");
  wasteDiv.innerHTML="";
  waste.forEach((c,idx)=>{
    const card=makeCard(c);
    card.style.position="absolute";
    card.style.left=(idx*15)+"px";
    wasteDiv.appendChild(card);
  });
  // foundations
  for(let i=0;i<4;i++){
    const f=document.getElementById("foundation"+(i+1));
    f.innerHTML="";
    if(foundations[i].length){
      f.appendChild(makeCard(foundations[i][foundations[i].length-1]));
    } else {
      f.innerHTML=`<span class="icon">${suits[i].icon}</span>`;
    }
  }
}
function stockClick(){
  if(stock.length===0){ stock=waste.reverse(); waste=[]; }
  else{
    let n=Math.min(level,stock.length);
    for(let i=0;i<n;i++){ waste.push(stock.pop()); }
  }
  render();
}

// start
document.getElementById("startBtn").addEventListener("click",()=>{
  punten-=20;
  level=parseInt(document.getElementById("levelSelect").value,10);
  createDeck(); shuffle(deck); stock=[]; waste=[]; foundations=[[],[],[],[]]; tableau=[[],[],[],[],[],[],[]];
  deal();
  document.getElementById("gameArea").style.display="flex";
  document.getElementById("status").textContent="Spel gestart (Level "+level+") â€“ Punten: "+punten;
});

// stock click
document.getElementById("stock").addEventListener("click",stockClick);
})();
</script>
</body>
</html>
