<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Springspel â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png" />

  <style>
    :root{
      --primair:#7bb235; --donker:#67510C;
      --pastel1:#fff6e5; --pastel2:#fffde6; --pastel3:#ffe8ec; --pastel4:#e7f8ff;
      --pastel5:#e6ffe5; --pastel6:#fff2fb; --pastel7:#f5ffe5; --pastel8:#f5e8ff;
      --pastel9:#fff6fb; --pastel10:#e7fff9; --pastel11:#f3e6ff; --pastel12:#ffeae6;
      --pastel13:#ecffe9; --pastel14:#f7fff3; --pastel15:#eafffa; --pastel16:#fff4ea;
    }
    body{
      margin:0; font-family:'Comic Sans MS', Arial, sans-serif; color:#333;
      min-height:100vh; background:var(--pastel1); transition:background .6s; overflow-x:hidden;
    }

    .page-container{ max-width:1000px; margin:0 auto; padding:0 12px 44px 12px; }

    /* Spelcontainer */
    #gameContainer{
      position:relative;
      width:100%;
      height:500px;
      background:url('https://kathy-torfs.github.io/Orthodoxeweg/images/level1.png') repeat-x;
      background-size:cover;
      overflow:hidden;
      border-radius:18px;
      box-shadow:0 2px 8px #0003;
    }
    #photeinos{
      position:absolute;
      bottom:0;
      left:50px;
      width:120px;
      height:auto;
    }
    .obstacle{
      position:absolute;
      bottom:0;
      width:60px;
      height:60px;
    }
    .collectible{
      position:absolute;
      width:50px;
      height:50px;
    }
    #questionBox{
      position:absolute;
      top:20%;
      left:50%;
      transform:translateX(-50%);
      background:white;
      border:2px solid #7bb235;
      padding:20px;
      width:300px;
      display:none;
      z-index:10;
      border-radius:15px;
      box-shadow:0 3px 10px #0004;
    }
    #questionBox button{
      display:block;
      margin-top:10px;
      width:100%;
      border:none;
      padding:10px;
      border-radius:10px;
      background:#7bb235;
      color:white;
      font-weight:bold;
      cursor:pointer;
    }
    #questionBox button:hover{ background:#6aa12c; }
  </style>

  <!-- Firebase compat -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>

  <!-- Kinder lay-out: header + beveiliging -->
  <script defer src="common/layout.js"></script>
</head>
<body>
  <!-- Herbruikbare header -->
  <div id="kinder-header" data-header-src="common/header.html"></div>

  <!-- Pagina-inhoud -->
  <main class="page-container">
    <div id="gameContainer">
      <img id="photeinos" src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_walk.png" alt="Photeinos">
      <div id="questionBox">
        <p id="questionText"></p>
        <div id="answers"></div>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script src="vragen.js"></script>
  <script src="springspel.js"></script>

  <script>
    // Zachte random pastelachtergrond
    (function(){
      const p=['var(--pastel1)','var(--pastel2)','var(--pastel3)','var(--pastel4)','var(--pastel5)','var(--pastel6)','var(--pastel7)','var(--pastel8)','var(--pastel9)','var(--pastel10)','var(--pastel11)','var(--pastel12)','var(--pastel13)','var(--pastel14)','var(--pastel15)','var(--pastel16)'];
      document.body.style.background = p[Math.floor(Math.random()*p.length)];
    })();

    // Firebase init (zoals elders)
    const firebaseConfig = {
      apiKey:"AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain:"orthodoxeweg.firebaseapp.com",
      projectId:"orthodoxeweg",
      storageBucket:"orthodoxeweg.appspot.com",
      messagingSenderId:"408582263618",
      appId:"1:408582263618:web:0a20f4bf0704989d3ceedb"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);

    document.addEventListener('DOMContentLoaded', () => {
      startWhenReady();
    });

    function startWhenReady(){
      if (!(window.KinderLayout && window.firebase && firebase.firestore)) {
        return setTimeout(startWhenReady, 120);
      }
      window.KinderLayout.mountHeader({
        rootId:'kinder-header',
        headerSrc:document.getElementById('kinder-header').dataset.headerSrc,
        active:'spelletjes' // markeer juiste knop
      }).then(initPage).catch(initPage);
    }

    function initPage(){
      // Beveiliging zoals bij gebeden
      if (!localStorage.getItem('kindIngelogd') ||
          !localStorage.getItem('ingelogdKindId') ||
          !localStorage.getItem('loginKeuze') ||
          !localStorage.getItem('ingelogdeParochie')) {
        window.location.href="https://kathy-torfs.github.io/Orthodoxeweg/volwassenmodus/parochie.html";
        return;
      }
      // springspel.js start vanzelf
    }
  </script>
</body>
</html>
