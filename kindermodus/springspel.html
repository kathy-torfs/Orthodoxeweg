<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Springspel Basisdemo</title>
  <style>
    body { margin:0; background: #e7f8ff; }
    #spelcontainer { margin: 30px auto 0 auto; width: 100vw; max-width: 900px; }
    #kinder-header { margin-bottom: 8px; }
  </style>
  <!-- Phaser.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
</head>
<body>
  <div id="kinder-header"></div>
  <div id="spelcontainer"></div>
  <script>
    // Spelparameters
    const GAME_WIDTH = 800, GAME_HEIGHT = 400;

    // --- Phaser-configuratie ---
    const config = {
      type: Phaser.AUTO,
      width: GAME_WIDTH,
      height: GAME_HEIGHT,
      backgroundColor: "#e7f8ff",
      parent: "spelcontainer",
      physics: {
        default: "arcade",
        arcade: {
          gravity: { y: 1400 },
          debug: false
        }
      },
      scene: { preload, create, update }
    };

    let photeinos, cursors, jumpBtn, ground;
    let obstacles = [];
    let nextObstacle = 0;

    function preload() {
      // Je eigen sprite (werkt altijd als png online staat)
      this.load.image('photeinos', 'https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_walk.png');
      // Emoji als fallback (ster)
      this.load.image('obstacle', 'https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Emoji_u1f47b.svg/240px-Emoji_u1f47b.svg.png');
    }

    function create() {
      // Lucht (bovenste helft)
      this.add.rectangle(GAME_WIDTH/2, GAME_HEIGHT/4, GAME_WIDTH, GAME_HEIGHT/2, 0xaee7ff);
      // Gras (onderste helft)
      this.add.rectangle(GAME_WIDTH/2, GAME_HEIGHT*0.75, GAME_WIDTH, GAME_HEIGHT/2, 0x8bc34a);

      // Grond-platform (onzichtbaar, fysiek)
      ground = this.physics.add.staticGroup();
      ground.create(GAME_WIDTH/2, GAME_HEIGHT-28, 'ground')
        .setDisplaySize(GAME_WIDTH, 56)
        .setVisible(false)
        .refreshBody();

      // Photeinos: 40% van schermhoogte (start onderaan)
      const P_SIZE = Math.round(GAME_HEIGHT * 0.4);
      photeinos = this.physics.add.sprite(110, GAME_HEIGHT-28-P_SIZE/2, 'photeinos')
        .setDisplaySize(P_SIZE, P_SIZE)
        .setCollideWorldBounds(true);

      // Collisie met grond
      this.physics.add.collider(photeinos, ground);

      // Hindernissen array (leeg, worden straks aangemaakt)
      obstacles = [];

      // Controls
      cursors = this.input.keyboard.createCursorKeys();
      this.input.keyboard.on('keydown-SPACE', jump);
      // Extra: tik of klik
      this.input.on('pointerdown', jump);

      // Eens om de 1.8-2.5 seconden nieuwe hindernis
      nextObstacle = 0;
    }

    function update(time, delta) {
      // Springen (enkel als op de grond)
      if ((cursors.up.isDown || cursors.space.isDown) && photeinos.body.blocked.down) {
        jump();
      }

      // Nieuwe hindernis? (max. 2 tegelijk)
      nextObstacle -= delta;
      if (nextObstacle < 0 && obstacles.length < 2) {
        spawnObstacle(this);
        nextObstacle = 1800 + Math.random() * 700; // 1.8-2.5s
      }

      // Hindernissen laten bewegen en verwijderen
      for (let i = obstacles.length-1; i >= 0; i--) {
        let ob = obstacles[i];
        ob.x -= 2.1; // Rustige snelheid
        if (ob.x < -60) {
          ob.destroy();
          obstacles.splice(i, 1);
        }
      }
    }

    function jump() {
      if (photeinos.body && photeinos.body.blocked.down) {
        photeinos.setVelocityY(-560); // Springhoogte
      }
    }

    // Maakt hindernis in gras of lucht
    function spawnObstacle(scene) {
      // 50% kans: in lucht ("vleugeltje") â€“ anders in gras ("doodskop")
      const isLucht = Math.random() > 0.5;
      const y = isLucht
        ? GAME_HEIGHT/4 // lucht (centraal)
        : GAME_HEIGHT-66; // gras

      const emoji = isLucht ? 'obstacle' : 'obstacle'; // Hier kun je andere plaatjes nemen!
      const ob = scene.add.image(GAME_WIDTH+30, y, emoji)
        .setDisplaySize(50, 50)
        .setDepth(2);

      obstacles.push(ob);
    }

    // Start het spel!
    new Phaser.Game(config);
  </script>
</body>
</html>
