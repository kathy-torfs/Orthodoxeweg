<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Springspel met Emoji-mannetje</title>
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
  <script src="vragen.js"></script> <!-- Jouw aparte vragenbestand -->
  <style>
    body { background: #e2f6ff; }
    #spelcontainer { margin: 20px auto; width: 520px; }
  </style>
</head>
<body>
<div id="spelcontainer"></div>
<script>
const GAME_WIDTH = 500, GAME_HEIGHT = 350;
let speler, cursors, jumpRequested = false;
let obstacles = [], wings = [];

const config = {
  type: Phaser.AUTO,
  width: GAME_WIDTH,
  height: GAME_HEIGHT,
  parent: 'spelcontainer',
  physics: { default: 'arcade', arcade: { gravity: { y: 1200 }, debug: false } },
  scene: { preload, create, update }
};

new Phaser.Game(config);

function preload() {}

function create() {
  // Lucht & gras
  this.add.rectangle(GAME_WIDTH/2, GAME_HEIGHT/4, GAME_WIDTH, GAME_HEIGHT/2, 0xaee7ff); // lucht
  this.add.rectangle(GAME_WIDTH/2, GAME_HEIGHT*0.75, GAME_WIDTH, GAME_HEIGHT/2, 0x8bc34a); // gras

  // Emoji-mannetje als speler
  const spelerGrootte = GAME_HEIGHT * 0.4;
  speler = this.add.text(60, GAME_HEIGHT - spelerGrootte/2 - 5, "🏃‍♂️", {
    fontFamily: 'Segoe UI Emoji, Arial',
    fontSize: Math.round(spelerGrootte) + 'px'
  });
  speler.setOrigin(0.5, 0.5);

  // Fysica toevoegen via een "zone" voor eenvoud (voor botsingen)
  this.physics.add.existing(speler);
  speler.body.setCollideWorldBounds(true);
  speler.body.setGravityY(1200);

  // Springen: knop/spatie
  cursors = this.input.keyboard.createCursorKeys();
  this.input.keyboard.on('keydown-SPACE', () => { jumpRequested = true; });

  // Obstakel (💀) & vleugel (🪽)
  createObstacle(this, 360, GAME_HEIGHT - 45, "💀", 0.9);
  createWing(this, 250, 60, "🪽", 0.7);

  // Beweging van obstakels/vleugels
  this.time.addEvent({ delay: 10, loop: true, callback: () => {
    obstacles.forEach(o => o.x -= 2);
    wings.forEach(w => w.x -= 2);
  }});
}

function update() {
  // Simpele springlogica (enkel als op de grond)
  if (jumpRequested && speler.body.touching.down) {
    speler.body.setVelocityY(-500);
    jumpRequested = false;
  }

  // Obstakel-botsing: vraag tonen
  obstacles.forEach(o => {
    if (Phaser.Geom.Intersects.RectangleToRectangle(speler.getBounds(), o.getBounds())) {
      if (!o.hit) {
        o.hit = true;
        stelVraag();
      }
    }
  });

  // Vleugel pakken: score++
  wings.forEach(w => {
    if (Phaser.Geom.Intersects.RectangleToRectangle(speler.getBounds(), w.getBounds())) {
      if (!w.collected) {
        w.collected = true;
        w.setVisible(false);
        // hier score verhogen
      }
    }
  });
}

function createObstacle(scene, x, y, emoji, scale=1) {
  let obst = scene.add.text(x, y, emoji, {
    fontFamily: 'Segoe UI Emoji, Arial',
    fontSize: Math.round(44*scale)+'px'
  });
  obst.setOrigin(0.5, 1);
  obstacles.push(obst);
  return obst;
}

function createWing(scene, x, y, emoji, scale=1) {
  let wing = scene.add.text(x, y, emoji, {
    fontFamily: 'Segoe UI Emoji, Arial',
    fontSize: Math.round(44*scale)+'px'
  });
  wing.setOrigin(0.5, 0.5);
  wings.push(wing);
  return wing;
}

function stelVraag() {
  let v = vragen[Math.floor(Math.random()*vragen.length)];
  alert(v.q + "\n" + v.a.map((ans, i) => `${i+1}. ${ans}`).join('\n'));
}
</script>
</body>
</html>
