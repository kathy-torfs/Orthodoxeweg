<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Photeinos Springspel â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="images/kruis.png" />
  <style>
    body { margin:0; background:var(--pastel1,#fff6e5); font-family:'Comic Sans MS', Arial, sans-serif;}
    #spelkaart { max-width: 650px; margin: 30px auto 0 auto; background: #f7fff3; border-radius: 20px; box-shadow: 0 6px 30px #bfd6b2a8; text-align: center; }
    h1 { color: #2276b9; font-weight: bold; font-size: 2.2rem;}
    #spelcontainer { position: relative; width: 500px; height: 400px; margin: 0 auto; background: #aee7ff; border-radius: 18px; overflow: hidden; box-shadow: 0 8px 18px #b7e2e2b4;}
    #score { color: #29518c; font-size: 1.1rem; font-weight: bold; margin-bottom: 10px;}
    #controls { margin: 10px 0 0 0;}
    button { background:#3B96E5; color:#fff; border:none; border-radius:10px; padding:8px 18px; font-size:17px; cursor:pointer; font-family:inherit; font-weight:bold;}
  </style>
</head>
<body>
  <div id="spelkaart">
    <h1>Photeinos Springspel</h1>
    <div id="score">Score: 0</div>
    <div id="spelcontainer"></div>
    <div id="controls"><button id="springBtn">Spring!</button></div>
  </div>
  <script>
    // SPEL INSTELLINGEN
    const W = 500, H = 400;
    const GRAS_Y = H/2; // alles eronder = graszone
    const PH_SIZE = Math.round(H*0.40);
    const JUMP_HEIGHT = H/2.1; // tot aan het midden van lucht
    const OBSTAKEL_SPEED = 2.1; // pixels per frame (rustig!)
    let score = 0, gameOver = false, obstakels = [];

    // ---- CANVAS setup ----
    const c = document.createElement('canvas');
    c.width = W; c.height = H;
    c.style.background = "#aee7ff";
    c.id = "spelcanvas";
    document.getElementById("spelcontainer").appendChild(c);
    const ctx = c.getContext("2d");

    // ---- SPELSTATE ----
    let ph = { x: 70, y: H-PH_SIZE-12, vy: 0, jumping: false };
    let frames = 0;

    // ---- ZONES tekenen ----
    function tekenAchtergrond() {
      // Lucht
      ctx.fillStyle = "#aee7ff";
      ctx.fillRect(0,0,W,H/2);
      // Gras
      ctx.fillStyle = "#8bc34a";
      ctx.fillRect(0,H/2,W,H/2);
    }

    // ---- Photeinos tekenen (emoji) ----
    function tekenPhoteinos() {
      ctx.font = PH_SIZE+"px serif";
      ctx.textAlign = "left";
      ctx.textBaseline = "top";
      ctx.fillText("ðŸŒŸ", ph.x, ph.y);
    }

    // ---- Obstakels ----
    function nieuwObstakel() {
      // Max 2 tegelijk
      if (obstakels.length >= 2) return;
      // Random keuze: doodskop of vleugel
      let soort = (Math.random()<0.55) ? "doodskop" : "vleugel";
      let y, emoji;
      if (soort=="doodskop") { // graszone
        y = GRAS_Y + Math.random()*(H/2-60);
        emoji = "ðŸ’€";
      } else { // vleugeltje in lucht
        y = Math.random()*(H/2-60) + 20;
        emoji = "ðŸª½";
      }
      obstakels.push({ x:W+10, y, emoji, soort });
    }

    // ---- Obstakels tekenen ----
    function tekenObstakels() {
      ctx.font = "40px serif";
      ctx.textAlign = "left";
      ctx.textBaseline = "top";
      obstakels.forEach(o => ctx.fillText(o.emoji, o.x, o.y));
    }

    // ---- Botsingen ----
    function botsing(o) {
      // Vereenvoudigde box-botsing
      return o.x < ph.x+PH_SIZE-8 && o.x+40 > ph.x+12 && o.y < ph.y+PH_SIZE-15 && o.y+38 > ph.y+8;
    }

    // ---- Hoofdgame loop ----
    function teken() {
      ctx.clearRect(0,0,W,H);
      tekenAchtergrond();
      tekenPhoteinos();
      tekenObstakels();
      // Obstakels bewegen
      obstakels.forEach(o=>o.x -= OBSTAKEL_SPEED);

      // Check botsingen
      for (let i=obstakels.length-1; i>=0; i--) {
        let o = obstakels[i];
        if (botsing(o)) {
          if (o.soort=="doodskop") { // GAME OVER!
            gameOver = true;
          } else {
            obstakels.splice(i,1);
            score++;
            document.getElementById("score").textContent = "Score: "+score;
          }
        } else if (o.x < -50) {
          obstakels.splice(i,1);
        }
      }
      // Springen/fallen
      if (ph.jumping) {
        ph.y += ph.vy;
        ph.vy += 2.7; // zwaartekracht (lager = trager dalen)
        if (ph.y >= H-PH_SIZE-12) {
          ph.y = H-PH_SIZE-12; ph.jumping = false; ph.vy=0;
        }
      }

      // Nieuwe obstakels
      if (!gameOver && frames%90===0) nieuwObstakel();
      // Teken game over
      if (gameOver) {
        ctx.globalAlpha=0.85;
        ctx.fillStyle="#fff";
        ctx.fillRect(0,120,W,160);
        ctx.globalAlpha=1;
        ctx.fillStyle="#2276b9";
        ctx.font="32px Comic Sans MS, Arial";
        ctx.textAlign="center";
        ctx.fillText("Game Over!", W/2, H/2-22);
        ctx.font="18px Arial";
        ctx.fillText("Score: "+score, W/2, H/2+16);
        return;
      }
      frames++;
      requestAnimationFrame(teken);
    }

    // ---- Springfunctie ----
    function spring() {
      if (!ph.jumping) {
        ph.vy = -JUMP_HEIGHT/8.3; // hoe lager, hoe hoger (proefondervindelijk)
        ph.jumping = true;
      }
    }
    document.getElementById("springBtn").onclick = spring;
    window.addEventListener("keydown", e=>{ if (e.code=="Space") spring(); });

    // Start het spel
    teken();
  </script>
</body>
</html>
