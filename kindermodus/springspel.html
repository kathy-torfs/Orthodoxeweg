<!doctype html>
<html lang="nl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Photeinos Springspel</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png">
  <style>
    body { margin:0; font-family:"Comic Sans MS",Arial,sans-serif; background:#fff6e5; overflow-x:hidden; }
    .center { max-width:1280px; margin:0 auto; padding:0 2vw 64px; }
    .game-card { background:#fff; border-radius:22px; box-shadow:0 10px 30px #0000001a; padding:16px; }
    .game-wrap { width:100%; max-width:1100px; aspect-ratio:21/9; margin:0 auto; border-radius:16px; overflow:hidden; background:#fff; position:relative; }
    canvas { display:block; width:100%; height:100%; }
    .hud { position:absolute; left:18px; bottom:16px; background:rgba(255,255,255,.82); backdrop-filter:blur(4px);
           padding:8px 10px; border-radius:10px; font-size:14px; color:#1e3a8a; }
    .btn { border:0; border-radius:10px; background:#0ea5e9; color:#fff; padding:6px 10px; font-weight:600; cursor:pointer; }
    .btn.ghost { background:#eff6ff; color:#1e40af; }
    .feedback { position:absolute; left:50%; top:10%; transform:translateX(-50%); background:rgba(255,255,255,.9); padding:8px 12px;
                border-radius:999px; color:#065f46; font-weight:700; display:none; }
    .start,.end { position:absolute; inset:0; display:grid; place-items:center; }
    .card { background:#fff; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.2); padding:20px 22px; max-width:min(90%,560px); text-align:center; }
    .title { font-weight:700; color:#1e40af; margin:6px 0; }
    .badge { display:inline-block; background:#ecfeff; color:#0c4a6e; border:1px solid #a5f3fc; border-radius:999px; padding:3px 8px; font-size:12px; margin:6px 0; }
  </style>
</head>
<body>
  <div class="center">
    <div class="game-card">
      <div class="game-wrap" id="gameRoot">
        <canvas id="game"></canvas>
        <div class="hud" id="hud">
          Level 1/5 ‚Ä¢ Vleugels 0/0 ‚Ä¢ Score 0 ‚Ä¢ Totaal 0
          <button class="btn ghost" id="pauseBtn" style="margin-left:12px">‚è∏</button>
        </div>
        <div class="feedback" id="feedback"></div>

        <div class="start" id="start">
          <div class="card">
            <div class="title">Photeinos Springspel</div>
            <div style="color:#334155;margin-bottom:10px">
              Tik/klik of druk <strong>spatie</strong> om te springen.<br/>
              1 tik = kleine sprong (voor grond-obstakels),<br/>
              meerdere tikken = hoger springen.<br/>
              Vang ü™Ω en ontwijk üíÄ.
            </div>
            <div class="badge">5 levels ‚Ä¢ kost 20 punten ‚Ä¢ +2 per level</div>
            <div style="margin-top:12px"><button class="btn" id="startBtn">Start spel (20)</button></div>
          </div>
        </div>

        <div class="end" id="end" style="display:none">
          <div class="card">
            <div class="title">Goed gespeeld!</div>
            <div id="endText" style="color:#14532d;margin:8px 0 12px"></div>
            <button class="btn" id="again">Speel opnieuw (20)</button>
            <button class="btn ghost" id="back" style="margin-left:8px">Terug</button>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
window.addEventListener("load", () => {
  const canvas = document.getElementById("game");
  const ctx = canvas.getContext("2d");
  const hud = document.getElementById("hud");
  const feedback = document.getElementById("feedback");
  const startOv = document.getElementById("start");
  const endOv = document.getElementById("end");
  const endText = document.getElementById("endText");
  const startBtn = document.getElementById("startBtn");
  const againBtn = document.getElementById("again");
  const backBtn = document.getElementById("back");
  const pauseBtn = document.getElementById("pauseBtn");

  function resizeCanvas() {
    canvas.width = canvas.clientWidth;
    canvas.height = canvas.clientHeight;
  }
  resizeCanvas();
  window.addEventListener("resize", resizeCanvas);

  // Photeinos sprite
  const playerImg = new Image();
  playerImg.src = "https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_walk.png";

  // game vars
  let running = false, paused = false;
  let level = 1, maxLevels = 5;
  let wingsNeeded = 10, wingsCollected = 0;
  let score = 0, totalScore = 0, gameSpeed = 2;

  const player = { x:100, y:canvas.height-60, width:60, height:60, vy:0 };
  let items = [];

  function spawnItem() {
    const type = Math.random()<0.7 ? "wing":"skull";
    const size=30, ground=Math.random()<0.4;
    const y= ground ? canvas.height-size-10 : Math.random()*(canvas.height-120);
    items.push({type,x:canvas.width+40,y,width:size,height:size});
  }

  function resetGame() {
    running=false; paused=false;
    level=1; wingsCollected=0; score=0; totalScore=0; gameSpeed=2;
    items=[]; player.y=canvas.height-player.height; player.vy=0;
    updateHUD();
  }

  function updateHUD() {
    hud.childNodes[0].nodeValue =
      `Level ${level}/${maxLevels} ‚Ä¢ Vleugels ${wingsCollected}/${wingsNeeded} ‚Ä¢ Score ${score} ‚Ä¢ Totaal ${totalScore} `;
  }

  function showFeedback(text,color="#065f46") {
    feedback.textContent=text; feedback.style.color=color;
    feedback.style.display="block"; setTimeout(()=>feedback.style.display="none",1000);
  }

  function checkCollision(p,i) {
    const onGround=p.y+p.height>=canvas.height-2;
    const nearGround=i.y>canvas.height-50;
    if(nearGround && onGround && p.x<i.x+i.width && p.x+p.width>i.x) return true;
    return (p.x<i.x+i.width && p.x+p.width>i.x && p.y<i.y+i.height && p.y+p.height>i.y);
  }

  function update() {
    player.vy+=0.5; player.y+=player.vy;
    if(player.y+player.height>=canvas.height){player.y=canvas.height-player.height; player.vy=0;}
    if(player.y<0){player.y=0; player.vy=0;}

    items.forEach(i=>i.x-=gameSpeed);
    items=items.filter(i=>{
      if(checkCollision(player,i)){
        if(i.type==="wing"){wingsCollected++;score+=2;totalScore+=2;showFeedback("+2 ü™Ω");if(wingsCollected>=wingsNeeded)nextLevel();}
        else{score-=5;totalScore-=5;showFeedback("-5 üíÄ","#dc2626");if(score<0)score=0;}
        return false;
      } return i.x+i.width>0;
    });
    if(Math.random()<0.02)spawnItem();
    updateHUD();
  }

  function draw() {
    ctx.clearRect(0,0,canvas.width,canvas.height);
    const imgSize=60;
    if(playerImg.complete){
      ctx.drawImage(playerImg, player.x, player.y, imgSize, imgSize);
    } else {
      ctx.fillStyle="#1e293b"; ctx.fillRect(player.x,player.y,imgSize,imgSize);
    }
    ctx.font="28px serif";
    items.forEach(i=>ctx.fillText(i.type==="wing"?"ü™Ω":"üíÄ",i.x,i.y));
  }

  function loop() {
    if(!running)return;
    if(paused){requestAnimationFrame(loop);return;}
    update(); draw(); requestAnimationFrame(loop);
  }

  function nextLevel() {
    level++;
    if(level>maxLevels){endGame();return;}
    wingsCollected=0; gameSpeed+=1.2;
    showFeedback("Level "+level+"!","#1e40af");
  }

  function endGame() {
    running=false; endOv.style.display="grid";
    endText.textContent=`Je hebt alle ${maxLevels} levels gehaald! Totaalscore: ${totalScore}`;
  }

  function flap() {
    if(!running||paused)return;
    if(player.y+player.height>=canvas.height-2){player.vy=-8;} else {player.vy-=4;if(player.vy<-12)player.vy=-12;}
  }

  window.addEventListener("keydown",e=>{if(e.code==="Space"){e.preventDefault();flap();}});
  canvas.addEventListener("mousedown",flap);
  canvas.addEventListener("touchstart",flap);

  startBtn.onclick=()=>{startOv.style.display="none";resetGame();running=true;loop();};
  againBtn.onclick=()=>{endOv.style.display="none";resetGame();running=true;loop();};
  backBtn.onclick=()=>{window.location.href="spelletjes.html";};
  pauseBtn.onclick=()=>{paused=!paused;showFeedback(paused?"Pauze":"Verder spelen");};

  updateHUD();
});
</script>
</body>
</html>
