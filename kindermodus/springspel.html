<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Springspel â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="images/kruis.png" />
  <style>
    :root{
      --primair:#7bb235; --donker:#67510C;
      --pastel1:#fff6e5; --pastel2:#fffde6; --pastel3:#ffe8ec; --pastel4:#e7f8ff;
      --pastel5:#e6ffe5; --pastel6:#fff2fb; --pastel7:#f5ffe5; --pastel8:#f5e8ff;
      --pastel9:#fff6fb; --pastel10:#e7fff9; --pastel11:#f3e6ff; --pastel12:#ffeae6;
      --pastel13:#ecffe9; --pastel14:#f7fff3; --pastel15:#eafffa; --pastel16:#fff4ea;
    }
    body{
      margin:0; font-family:'Comic Sans MS', Arial, sans-serif; color:#333;
      min-height:100vh; background:var(--pastel1); transition:background .6s;
    }
    #controls {
      background-color: #3B96E5;
      padding: 6px;
      width:100vw;
      position:fixed;
      bottom:0;
      left:0;
      z-index:99;
    }
    #controls button {
      color: #fff;
      font-family: inherit;
      font-weight: 500;
      padding: 6px 12px;
      font-size: 16px;
      cursor: pointer;
      background-color: #2276b9;
      border: none;
      border-radius: 6px;
    }
    #controls button:hover {
      background-color: #14548c;
    }
    #score {
      color: #fff;
      float: right;
      padding: 6px 12px;
    }
    #spel-container {
      max-width: 700px;
      margin: 48px auto 32px auto;
      background: #f8fbe7;
      border-radius: 18px;
      box-shadow: 0 4px 20px #bbb7;
      padding: 32px 0 10px 0;
      display:flex;
      flex-direction:column;
      align-items:center;
      min-height:520px;
    }
    canvas {
      display:block;
      margin:0 auto;
      background:transparent;
      border-radius: 10px;
      box-shadow:0 2px 10px #aaa6;
    }
  </style>
  <!-- Header + menubalk + beveiliging -->
  <script defer src="common/layout.js"></script>
  <!-- Phaser.js -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
</head>
<body>
  <div id="kinder-header" data-header-src="common/header.html"></div>
  <div id="spel-container">
    <div style="margin-bottom:16px;">
      <h2 style="margin:0;font-size:28px;color:#2276b9;text-align:center;">Photeinos Springspel</h2>
      <p style="color:#29518c;text-align:center;margin:2px 0 10px 0;">Spring om vleugeltjes te pakken, ontwijk de doodskoppen!</p>
    </div>
    <div id="phaser-container"></div>
  </div>
  <div id="controls">
    <button id="jumpBtn">Spring!</button>
    <span id="score">Score: 0</span>
  </div>
<script>
const GAME_WIDTH = 600, GAME_HEIGHT = 360;
let cursors, player, score = 0;

const GRASS_Y = GAME_HEIGHT / 2;

const config = {
  type: Phaser.AUTO,
  width: GAME_WIDTH,
  height: GAME_HEIGHT,
  backgroundColor: '#b3e3fa',
  parent: 'phaser-container',
  physics: {
    default: 'arcade',
    arcade: { gravity: { y: 850 }, debug: false }
  },
  scene: {
    preload: preload,
    create: create,
    update: update
  }
};

let game = new Phaser.Game(config);

function preload() {
  this.load.image('photeinos', 'https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_walk.png');
}

function create() {
  // Lucht (bovenste helft)
  this.add.rectangle(GAME_WIDTH/2, GAME_HEIGHT/4, GAME_WIDTH, GAME_HEIGHT/2, 0xb3e3fa);
  // Gras (onderste helft)
  this.add.rectangle(GAME_WIDTH/2, 3*GAME_HEIGHT/4, GAME_WIDTH, GAME_HEIGHT/2, 0x8BC34A);

  // PHOTEINOS: netjes boven gras
  player = this.physics.add.sprite(100, GAME_HEIGHT - 60, 'photeinos')
    .setScale(0.22) // Dit werkt perfect voor jouw sprite (pas aan indien nodig)
    .setCollideWorldBounds(true);

  // Collisions met een denkbeeldige graslijn (bodem)
  player.setBounce(0);
  player.jumping = false;

  cursors = this.input.keyboard.createCursorKeys();

  // Springknop en spatiebalk
  document.getElementById("jumpBtn").onclick = () => jumpPlayer();
  this.input.keyboard.on('keydown-SPACE', jumpPlayer);

  // Zodat je altijd kunt springen als je op de bodem bent
  player.body.onWorldBounds = true;
}

function update() {
  // ZORG dat Photeinos op het gras blijft na sprong
  if (player.y >= (GAME_HEIGHT - 60)) {
    player.y = GAME_HEIGHT - 60;
    player.body.velocity.y = 0;
    player.jumping = false;
  }

  // Springen met toetsenbord
  if ((cursors.up.isDown || cursors.space.isDown) && !player.jumping) {
    jumpPlayer();
  }
}

function jumpPlayer() {
  // Alleen springen als je NIET springt en onderaan staat!
  if (!player.jumping && player.y >= (GAME_HEIGHT - 60)) {
    player.setVelocityY(-330); // springkracht
    player.jumping = true;
  }
}

function updateScore() {
  document.getElementById("score").innerText = "Score: " + score;
}
</script>
</body>
</html>
