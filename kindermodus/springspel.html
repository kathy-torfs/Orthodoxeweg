<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Springspel â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="images/kruis.png" />

  <style>
    :root{
      --primair:#7bb235; --donker:#67510C;
      --pastel1:#fff6e5; --pastel2:#fffde6; --pastel3:#ffe8ec; --pastel4:#e7f8ff;
      --pastel5:#e6ffe5; --pastel6:#fff2fb; --pastel7:#f5ffe5; --pastel8:#f5e8ff;
      --pastel9:#fff6fb; --pastel10:#e7fff9; --pastel11:#f3e6ff; --pastel12:#ffeae6;
      --pastel13:#ecffe9; --pastel14:#f7fff3; --pastel15:#eafffa; --pastel16:#fff4ea;
    }
    body{
      margin:0; font-family:'Comic Sans MS', Arial, sans-serif; color:#333;
      min-height:100vh; background:var(--pastel1); transition:background .6s;
    }
    #controls {
      box-sizing: border-box;
      background-color: #3B96E5;
      padding: 6px;
      position: fixed;
      bottom: 0; left: 0; width: 100vw;
      z-index: 10;
    }
    #controls button {
      color: #fff;
      font-family: inherit;
      font-weight: 500;
      padding: 6px 12px;
      font-size: 16px;
      cursor: pointer;
      background-color: transparent;
      border: none;
    }
    #controls button:hover {
      background-color: rgba(0, 0, 0, 0.3);
      border-color: rgba(0, 0, 0, 0.3);
    }
    #score {
      color: #fff;
      float: right;
      padding: 6px 12px;
    }
    #spelkaart {
      max-width: 600px; 
      margin: 40px auto;
      padding: 32px 20px 16px 20px;
      background: #f7fff3;
      border-radius: 20px;
      box-shadow: 0 6px 30px #bfd6b2a8;
      text-align: center;
    }
    #spelcanvas {
      display: block;
      margin: 20px auto 0 auto;
      box-shadow: 0 8px 18px #b7e2e2b4;
      border-radius: 8px;
      background: #ffffff;
    }
    h1 { color: #2276b9; font-weight: bold; font-size: 2.3rem; margin-bottom: .3em;}
    h2 { font-size: 1.2rem; font-weight: normal; color: #29518c; margin-top:0;}
  </style>

  <!-- Header + menubalk + beveiliging -->
  <script defer src="common/layout.js"></script>
  <!-- Phaser.js library -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.70.0/dist/phaser.min.js"></script>
</head>
<body>
  <div id="kinder-header" data-header-src="common/header.html"></div>

  <div id="spelkaart">
    <h1>Photeinos Springspel</h1>
    <h2>Spring om vleugeltjes te pakken, ontwijk de doodskoppen!</h2>
    <div id="spelcontainer">
      <!-- Phaser canvas komt hier automatisch -->
    </div>
  </div>

  <div id="controls">
    <button id="jumpBtn">Spring!</button>
    <span id="score">Score: 0</span>
  </div>

  <script>
    // Spelconfiguratie
    const SPEL_BREEDTE = 500, SPEL_HOOGTE = 350;
    let score = 0;

    const config = {
      type: Phaser.AUTO,
      width: SPEL_BREEDTE,
      height: SPEL_HOOGTE,
      backgroundColor: "#b8e4fa",
      parent: 'spelcontainer',
      physics: { default: 'arcade', arcade: { gravity: { y: 0 }, debug: false } },
      scene: {
        preload: preload,
        create: create,
        update: update
      }
    };

    let photeinos, cursors;
    let jumpRequested = false;

    function preload() {
      // Gebruik testster voor zichtbaarheid
      this.load.image('photeinos', 'https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Plain_Yellow_Star.png/256px-Plain_Yellow_Star.png');
      // Gebruik jouw sprite als je wilt:
      // this.load.image('photeinos', 'https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_walk.png');
    }

    function create() {
      // Lucht (bovenste helft)
      this.add.rectangle(SPEL_BREEDTE/2, SPEL_HOOGTE/4, SPEL_BREEDTE, SPEL_HOOGTE/2, 0xaee7ff);
      // Gras (onderste helft)
      this.add.rectangle(SPEL_BREEDTE/2, SPEL_HOOGTE*0.75, SPEL_BREEDTE, SPEL_HOOGTE/2, 0x8bc34a);

      // Photeinos grootte = 40% van hoogte
      const photeinosGrootte = Math.round(SPEL_HOOGTE * 0.4); // = 140px bij 350 hoogte
      // Y-positie: vlak op de graslijn (net boven onderste helft)
      const startY = SPEL_HOOGTE / 2 - photeinosGrootte / 2 + 5;

      photeinos = this.physics.add.image(80, startY, 'photeinos')
        .setDisplaySize(photeinosGrootte, photeinosGrootte)
        .setCollideWorldBounds(true);

      // Zwaartekracht aanzetten
      photeinos.body.setGravityY(900);

      // Keyboard controls
      cursors = this.input.keyboard.createCursorKeys();

      // Springen: knop en spatie
      document.getElementById("jumpBtn").onclick = () => { jumpRequested = true; };
      this.input.keyboard.on('keydown-SPACE', () => { jumpRequested = true; });
    }

    function update() {
      // Springen als knop/spatie
      if (jumpRequested && photeinos.body.touching.down) {
        photeinos.setVelocityY(-photeinos.displayHeight * 3.0); // Sprongkracht afhankelijk van grootte
        jumpRequested = false;
      }
      document.getElementById("score").textContent = "Score: " + score;
    }

    // Optioneel: ook springen bij klik/tap op canvas (mobiel)
    document.addEventListener('touchstart', function(e){
      jumpRequested = true;
    });
  </script>
</body>
</html>
