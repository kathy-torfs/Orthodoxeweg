<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Photeinos Game – Kindermodus</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png">
  <script src="layout.js" defer></script>
  <link rel="stylesheet" href="header.html">
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: var(--pastel4);
      font-family: 'Comic Sans MS', sans-serif;
    }
    canvas {
      display: block;
      margin: 20px auto;
      background: url("level1.png") repeat-x;
      background-size: cover;
      border: 4px solid var(--primair);
      border-radius: 15px;
    }
    #questionModal {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      display: none;
      background: rgba(0,0,0,0.8);
      color: white;
      font-family: sans-serif;
      text-align: center;
      padding-top: 100px;
      z-index: 1000;
    }
    .questionBox {
      background: #333;
      padding: 20px;
      border-radius: 12px;
      max-width: 500px;
      margin: auto;
    }
    .answerBtn {
      display: block;
      background: #7bb235;
      margin: 10px auto;
      padding: 10px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 1.2em;
    }
  </style>
</head>
<body>
  <header-component></header-component>
  <main>
    <h1 style="text-align:center; color:var(--donker);">🌟 Photeinos Game – Level 1 🌟</h1>
    <canvas id="gameCanvas" width="900" height="400"></canvas>
  </main>

  <!-- Vraag-venster -->
  <div id="questionModal">
    <div class="questionBox">
      <p id="questionText"></p>
      <div id="answers"></div>
    </div>
  </div>

  <script>
    const canvas = document.getElementById("gameCanvas");
    const ctx = canvas.getContext("2d");

    // Afbeelding Photeinos
    const photeinosImg = new Image();
    photeinosImg.src = "photeinos_walk.png";

    let photeinos = { x: 50, y: 300, width: 80, height: 120, vy: 0, jumping: false };
    let objects = []; // obstakels en bonusobjecten
    let level = 1;
    let correctAnswers = 0;

    // === VRAGEN arrays (zelfde inhoud als ik je eerder gaf, hier ingekort voorbeeld) ===
    const meerkeuzeVragen = [
      {q:"Wat doe je als je wakker wordt?", a:["Een kort gebedje bidden","Je bed uit springen"], correct:0},
      {q:"Wat betekent 'Amen'?", a:["Ik geloof het/zo is het","Einde, klaar!"], correct:0},
      {q:"Wat doe je op zondag?", a:["Naar de kerk gaan","Uitslapen is belangrijker"], correct:0}
      // … (hier voeg jij de rest van de vragenlijst in)
    ];

    const zondeVragen = [
      "God helemaal vergeten en nooit bidden is goed.",
      "Grappen maken over God in de kerk is goed.",
      "De Naam van God lelijk gebruiken is toegestaan."
      // … (hier voeg jij de rest van de lijst in)
    ];

    // === Vraag-modal ===
    const modal = document.getElementById("questionModal");
    const qText = document.getElementById("questionText");
    const ansDiv = document.getElementById("answers");

    function showMeerkeuzeVraag() {
      const q = meerkeuzeVragen[Math.floor(Math.random()*meerkeuzeVragen.length)];
      qText.innerText = q.q;
      ansDiv.innerHTML = "";
      q.a.forEach((ans,i)=>{
        const btn=document.createElement("div");
        btn.className="answerBtn";
        btn.innerText=ans;
        btn.onclick=()=>{
          if(i===q.correct){
            correctAnswers++;
            if(correctAnswers>=10){ nextLevel(); }
          }
          modal.style.display="none";
        };
        ansDiv.appendChild(btn);
      });
      modal.style.display="block";
    }

    function showZondeVraag() {
      const q = zondeVragen[Math.floor(Math.random()*zondeVragen.length)];
      qText.innerText = q+" (Ja of Nee?)";
      ansDiv.innerHTML="";
      ["Ja","Nee"].forEach(ans=>{
        const btn=document.createElement("div");
        btn.className="answerBtn";
        btn.innerText=ans;
        btn.onclick=()=>{
          if(ans==="Nee"){ modal.style.display="none"; }
          else{ alert("Fout! Game Over"); location.reload(); }
        };
        ansDiv.appendChild(btn);
      });
      modal.style.display="block";
    }

    function nextLevel(){
      level++;
      correctAnswers=0;
      if(level>5){
        alert("Gefeliciteerd! Alle levels gehaald!");
        location.reload();
      } else {
        canvas.style.background=`url('level${level}.png') repeat-x`;
        canvas.style.backgroundSize="cover";
      }
    }

    // Input
    document.addEventListener("keydown",e=>{
      if(e.code==="Space" && !photeinos.jumping){
        photeinos.vy=-15; photeinos.jumping=true;
      }
    });

    // Game loop
    function gameLoop(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // Photeinos
      photeinos.y+=photeinos.vy;
      photeinos.vy+=1;
      if(photeinos.y>300){ photeinos.y=300; photeinos.vy=0; photeinos.jumping=false; }
      ctx.drawImage(photeinosImg,photeinos.x,photeinos.y,photeinos.width,photeinos.height);

      // Nieuwe objecten
      if(Math.random()<0.01){
        const type=Math.random()<0.5?"obstacle":"bonus";
        objects.push({
          x:canvas.width,
          y:type==="obstacle"?320:Math.random()*200+100,
          type,
          symbol:type==="obstacle"?["🪨","🐍","🔥"][Math.floor(Math.random()*3)] : ["🪽","🕊️","😇"][Math.floor(Math.random()*3)]
        });
      }

      objects.forEach((o,i)=>{
        o.x-=4;
        ctx.font="40px serif";
        ctx.fillText(o.symbol,o.x,o.y);
        // Collision
        if(o.x<photeinos.x+photeinos.width && o.x+30>photeinos.x && o.y<photeinos.y+photeinos.height && o.y+30>photeinos.y){
          objects.splice(i,1);
          if(o.type==="obstacle"){ showZondeVraag(); }
          else{ showMeerkeuzeVraag(); }
        }
      });

      requestAnimationFrame(gameLoop);
    }
    gameLoop();
  </script>
</body>
</html>
