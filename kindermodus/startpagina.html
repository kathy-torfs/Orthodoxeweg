<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Welkom â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png" />
  <style>
    :root{
      --primair:#7bb235; --donker:#67510C;
      --pastel1:#fff6e5; --pastel2:#fffde6; --pastel3:#ffe8ec; --pastel4:#e7f8ff;
      --pastel5:#e6ffe5; --pastel6:#fff2fb; --pastel7:#f5ffe5; --pastel8:#f5e8ff;
      --pastel9:#fff6fb; --pastel10:#e7fff9; --pastel11:#f3e6ff; --pastel12:#ffeae6;
      --pastel13:#ecffe9; --pastel14:#f7fff3; --pastel15:#eafffa; --pastel16:#fff4ea;
    }
    /* Basis */
    html,body{margin:0}
    body{
      font-family:'Comic Sans MS', Arial, sans-serif;
      color:#333; min-height:100vh; background:var(--pastel1);
      transition:background .6s; overflow-x:hidden;
    }

    /* Bovenste begroetingsbalk */
    .bovenrij{
      width:100%; max-width:1280px; margin:0 auto;
      display:flex; align-items:center; justify-content:space-between;
      gap:0; padding:22px 2vw 8px; box-sizing:border-box;
    }
    .bovenrij .links{display:flex; align-items:center; gap:18px}
    .photeinos-wave-img{
      /* Belangrijk: geen uitsnijden/afronden â†’ animatie blijft volledig zichtbaar */
      height:120px; width:auto; display:block;
      user-drag:none; -webkit-user-drag:none;
      /* zachte rand/kaartlook zonder crop */
      padding:6px 8px; background:#fff; border:2px solid #dab97a;
      box-shadow:0 2px 12px #dab97a2a; border-radius:14px;
    }
    .begroeting{
      font-size:2.2em; font-weight:bold; color:var(--primair);
      text-shadow:0 2px 8px #b3d9ff44; letter-spacing:.01em; line-height:1.04;
      margin:0; white-space:nowrap;
    }
    .bovenrij .rechts{display:flex; align-items:center; gap:12px; margin-left:24px}
    .uitlog-kind-btn{
      background:#e24343; color:#fff; border:none; padding:11px 24px;
      border-radius:9px; font-weight:bold; font-size:1.1em; cursor:pointer;
      box-shadow:0 2px 10px #b04141ab; transition:background .2s; z-index:10;
    }
    .uitlog-kind-btn:hover{background:#b72828}

    /* Menubalk */
    nav.kinder-menu{
      width:100vw; max-width:1280px; margin:0 auto;
      display:flex; justify-content:center; align-items:center; gap:32px;
      padding:36px 0 25px; min-height:88px; flex-wrap:wrap;
      box-sizing:border-box;
    }
    nav.kinder-menu a{display:flex; align-items:center; justify-content:center; border-radius:12px; transition:transform .13s}
    nav.kinder-menu a:focus, nav.kinder-menu a:hover{transform:scale(1.12)}
    .menu-icoon{
      width:72px; height:72px; object-fit:contain; border-radius:16px;
      background:#fff9d5; box-shadow:0 2px 7px #ffe17e25; border:2.2px solid #ffe05e;
      display:block; transition:box-shadow .13s, border-color .13s;
    }
    nav.kinder-menu a:focus .menu-icoon, nav.kinder-menu a:hover .menu-icoon{
      box-shadow:0 5px 16px #ffe17e55; border-color:#ffbe23;
    }
    .spacer-begroeting-menu{height:38px}

    /* Welkomsttekst */
    .welkom-blok{
      background:#fffce7; border-radius:23px; box-shadow:0 6px 32px #d7cbb144;
      color:var(--donker); font-size:1.36em; padding:30px 44px;
      margin:28px auto; line-height:1.62; max-width:850px; width:93vw;
      white-space:pre-line; text-align:center;
    }

    /* Grote Photeinos met vlam + puntenteller */
    .photeinos-vlam-blok{
      position:relative; display:flex; flex-direction:column; align-items:center;
      width:330px; max-width:85vw; margin:38px auto 24px;
    }
    .photeinos-vlam-img{
      width:100%; height:auto; display:block; user-drag:none; -webkit-user-drag:none;
    }
    .punten-teller{
      position:absolute; left:0; right:0; top:70%;
      text-align:center; font-family:'Comic Sans MS', Arial, sans-serif;
      font-size:2.8em; color:#bf5300; font-weight:bold;
      text-shadow:0 2px 10px #fffef9, 0 1px 0 #ffecb3; pointer-events:none;
      letter-spacing:.03em; filter:drop-shadow(0 2px 2px #fffef9);
      transition:transform .14s;
    }

    /* Responsiveness tweaks */
    @media (max-width:1100px){
      .photeinos-wave-img{height:17vw; min-height:60px; max-height:120px}
      .menu-icoon{width:60px; height:60px}
      nav.kinder-menu{gap:20px}
    }
    @media (max-width:900px){
      .bovenrij{padding-top:10px}
      .photeinos-wave-img{height:16vw; min-height:44px}
      .begroeting{font-size:1.2em}
      .welkom-blok{font-size:1.03em; padding:15px 2vw}
      .photeinos-vlam-blok{width:54vw; min-width:120px}
      .menu-icoon{width:48px; height:48px}
      nav.kinder-menu{gap:12px}
      .punten-teller{font-size:1.6em}
    }
    @media (max-width:600px){
      .photeinos-wave-img{height:24vw; min-height:28px}
      .menu-icoon{width:32px; height:32px}
      nav.kinder-menu{gap:5px}
      .photeinos-vlam-blok{width:86vw; min-width:69px}
      .punten-teller{font-size:1.09em}
    }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>

  <script>
    // --- Beveiliging: kind moet ingelogd zijn ---
    (function guard(){
      const ingelogd = localStorage.getItem("kindIngelogd");
      const kindId   = localStorage.getItem("ingelogdKindId");
      if(!ingelogd || !kindId){
        window.location.href = "https://kathy-torfs.github.io/Orthodoxeweg/volwassenmodus/parochie.html";
      }
    })();

    // --- Random pastel achtergrond ---
    (function pastel(){
      const kleuren=['var(--pastel1)','var(--pastel2)','var(--pastel3)','var(--pastel4)','var(--pastel5)','var(--pastel6)','var(--pastel7)','var(--pastel8)','var(--pastel9)','var(--pastel10)','var(--pastel11)','var(--pastel12)','var(--pastel13)','var(--pastel14)','var(--pastel15)','var(--pastel16)'];
      document.addEventListener('DOMContentLoaded', ()=> {
        document.body.style.background = kleuren[Math.floor(Math.random()*kleuren.length)];
      });
    })();
  </script>
</head>
<body>
  <!-- Bovenste rij: ster, begroeting, uitloggen -->
  <div class="bovenrij">
    <div class="links">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_wave.gif"
           alt="Photeinos zwaait"
           class="photeinos-wave-img"
           draggable="false">
      <span class="begroeting" id="groet-tekst">Hallo, kind!</span>
    </div>
    <div class="rechts">
      <button class="uitlog-kind-btn" id="uitlogBtn">Uitloggen</button>
    </div>
  </div>

  <!-- Spacer tussen begroeting en menubalk -->
  <div class="spacer-begroeting-menu"></div>

  <!-- Menubalk (vaste volgorde) -->
  <nav class="kinder-menu" aria-label="Hoofdmenu">
    <a href="startpagina.html" title="Startpagina">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_home.png" alt="Startpagina" class="menu-icoon">
    </a>
    <a href="gebeden.html" title="Ik bid">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_bid.png" alt="Ik bid" class="menu-icoon">
    </a>
    <a href="catechese.html" title="Catechese">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/catechese.png" alt="Catechese" class="menu-icoon">
    </a>
    <a href="heiligen.html" title="Heiligen">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_heiligen.png" alt="Heiligen" class="menu-icoon">
    </a>
    <a href="bijbelverhalen.html" title="Bijbelverhalen">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_bijbel.png" alt="Bijbelverhalen" class="menu-icoon">
    </a>
    <a href="spelletjes.html" title="Spelletjes">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_spelletjes.png" alt="Spelletjes" class="menu-icoon">
    </a>
    <a href="school.html" title="School">
      <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_school.png" alt="School" class="menu-icoon">
    </a>
  </nav>

  <!-- Welkomtekst -->
  <div class="welkom-blok">
Welkom in jouw Orthodoxe Kinderpagina, <span id="kind-naam-blok"></span>! ðŸŽ‰

ðŸŒŸ Hier mag je elke dag op avontuur: ontdek mooie verhalen, leer bidden, en speel leuke spelletjes!

Hoe meer jij bidt of leert, hoe meer punten je verdient en hoe meer spelletjes je kan spelen.

Veel plezier vandaag, en vergeet niet: Photeinos is altijd jouw vriendje onderweg! ðŸ¤©
  </div>

  <!-- Grote Photeinos met vlam en puntenaantal -->
  <div class="photeinos-vlam-blok">
    <img src="https://kathy-torfs.github.io/Orthodoxeweg/images/photeinos_vlam.png"
         alt="Photeinos met vlam"
         class="photeinos-vlam-img"
         draggable="false">
    <div id="punten-teller" class="punten-teller">â€¦</div>
  </div>

  <script>
    // Uitloggen
    document.getElementById('uitlogBtn').addEventListener('click', ()=>{
      localStorage.removeItem("kindIngelogd");
      localStorage.removeItem("ingelogdKindId");
      localStorage.removeItem("ingelogdKindVoornaam");
      localStorage.removeItem("kindAvatarURL");
      localStorage.removeItem("kindPunten");
      window.location.href="https://kathy-torfs.github.io/Orthodoxeweg/volwassenmodus/parochie.html";
    });

    // Begroeting + naam
    (function greeting(){
      const kindNaam = localStorage.getItem("ingelogdKindVoornaam") || "Kind";
      const naamEl = document.getElementById('kind-naam-blok');
      if(naamEl) naamEl.textContent = kindNaam;

      function welkomstGroet(){
        const uur = new Date().getHours();
        if (uur>=6 && uur<=11) return "Goeiemorgen";
        if (uur>=12 && uur<=16) return "Goeiemiddag";
        if (uur>=17 && uur<=22) return "Goeieavond";
        return "Hallo";
      }
      document.getElementById("groet-tekst").textContent = `${welkomstGroet()}, ${kindNaam}!`;
    })();

    // Firebase init
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb"
    };
    if(!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Puntenteller
    const parochieId = localStorage.getItem("ingelogdeParochie");
    const ouderLogin = localStorage.getItem("loginKeuze");
    const kindId    = localStorage.getItem("ingelogdKindId");
    const tellerEl  = document.getElementById("punten-teller");

    async function laadPunten(){
      if(!parochieId || !ouderLogin || !kindId){ tellerEl.textContent = "â€¦"; return; }
      try{
        const snap = await db.collection("parochies").doc(parochieId)
          .collection("leden").doc(ouderLogin)
          .collection("kinderen").doc(kindId).get();
        const punten = snap.exists ? (snap.data().punten || 0) : 0;
        tellerEl.textContent = punten;
        tellerEl.style.transform = 'scale(1.18)';
        setTimeout(()=>{ tellerEl.style.transform = 'scale(1)'; }, 180);
      }catch(e){
        tellerEl.textContent = "â€¦";
      }
    }
    laadPunten();
  </script>
</body>
</html>
