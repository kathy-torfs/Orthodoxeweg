<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Engeltjes vs Duiveltjes</title>
<style>
body{
  background:#2d7a2d;
  margin:0;padding:20px;
  font-family:Arial,sans-serif;
  text-align:center;
  overflow-x:hidden;
}
h1{color:white;margin-bottom:10px;}
#levelinfo{color:white;font-weight:bold;margin-bottom:20px;}

#veld{
  position:relative;
  width:90%;
  max-width:900px;
  height:500px;
  margin:0 auto 20px auto;
  background:repeating-linear-gradient(90deg,#3fa33f 0 40px,#2d7a2d 40px 80px);
  border:5px solid white;
  border-radius:12px;
  overflow:hidden;
}
#veld::before{
  content:"";
  position:absolute;
  top:0;left:50%;
  width:2px;height:100%;
  background:white;
}
#veld::after{
  content:"";
  position:absolute;
  top:50%;left:50%;
  width:120px;height:120px;
  border:2px solid white;
  border-radius:50%;
  transform:translate(-50%,-50%);
}
.goal{
  position:absolute;
  top:35%;height:30%;width:60px;
  border:2px solid white;
  background:repeating-linear-gradient(45deg,rgba(255,255,255,0.3) 0 5px,transparent 5px 10px);
  display:flex;align-items:center;justify-content:center;
  font-size:28px;color:white;
}
.goal.left{left:0;}
.goal.right{right:0;}

.speler{
  position:absolute;
  text-align:center;
  transform:translate(-50%,-50%);
}
.shirt{
  width:50px;height:35px;
  border-radius:6px;
  color:white;font-weight:bold;
  line-height:35px;
  box-shadow:0 0 4px rgba(0,0,0,0.4);
  margin-top:35px;
}
.shirt.engel{background:#57b8f3;}
.shirt.duivel{background:#d93838;}
.hoofd{font-size:32px;line-height:1;}
.spring{
  animation:jump 0.6s ease;
}
@keyframes jump{
  0%{transform:translate(-50%,-50%) scale(1);}
  40%{transform:translate(-50%,-60%) scale(1.15);}
  100%{transform:translate(-50%,-50%) scale(1);}
}
#bal{
  position:absolute;
  font-size:34px;
  transition:all 0.9s cubic-bezier(.35,1.2,.4,1);
  transform:translate(-50%,-50%);
  z-index:10;
}

/* knoppen & popup */
button{
  margin-top:15px;
  padding:10px 18px;
  font-size:16px;
  border:none;border-radius:8px;
  background:#7bb235;color:white;
  cursor:pointer;
}
button:hover{background:#689c2e;}
#popup{
  position:fixed;inset:0;
  background:rgba(0,0,0,0.4);
  display:none;
  justify-content:center;align-items:center;
  z-index:10;
}
#popup-content{
  background:#7fd8d7; /* appelblauw-zeegroen */
  border-radius:12px;
  padding:20px;
  width:90%;max-width:420px;
  text-align:center;
  color:black;
  box-shadow:0 0 15px rgba(0,0,0,0.4);
}
#popup-content h2{margin-top:0;font-size:20px;}
.antw-btn{
  display:block;width:100%;
  margin:8px 0;padding:12px;
  border:none;border-radius:8px;
  background:white;
  cursor:pointer;font-size:16px;
  box-shadow:0 2px 4px rgba(0,0,0,0.2);
}
.antw-btn:hover{background:#dff8f7;}
</style>
</head>
<body>

<h1>Engeltjes vs Duiveltjes</h1>
<div id="levelinfo">Level 1</div>

<div id="veld">
  <div class="goal left">ðŸ˜‡</div>
  <div class="goal right">ðŸ˜ˆ</div>

  <div id="spelers"></div>
  <div id="bal">âš½</div>
</div>

<button id="vraagBtn">Volgende vraag</button>

<div id="popup">
  <div id="popup-content">
    <h2 id="vraagtekst">Vraag</h2>
    <div id="antwoorden"></div>
    <button id="sluit">Sluit</button>
  </div>
</div>

<script src="vragen.js"></script>
<script>
const veld=document.getElementById('veld');
const spelersDiv=document.getElementById('spelers');
const bal=document.getElementById('bal');
const popup=document.getElementById('popup');
const vraagBtn=document.getElementById('vraagBtn');
const vraagtekst=document.getElementById('vraagtekst');
const antwoordenDiv=document.getElementById('antwoorden');
const sluitBtn=document.getElementById('sluit');
const levelinfo=document.getElementById('levelinfo');

let huidigLevel=1;
let juisteAntwoorden=0;
let vragenPerLevel=[];
let gebruikteVragen=[];
let engelIndex=0;
let duivelIndex=0;

/* geluiden */
const geluidJuist=new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_1b829d3b6a.mp3");
const geluidFout=new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_13cda6fef2.mp3");
const geluidGoal=new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_7396db4f46.mp3");

function randomPos(baseX,baseY,spread){
  return {x:baseX+(Math.random()*spread-spread/2),
          y:baseY+(Math.random()*spread-spread/2)};
}

function tekenSpelers(level){
  spelersDiv.innerHTML="";
  const engelBasis=[
    {x:55,y:30},{x:60,y:55},{x:70,y:40},{x:65,y:70},{x:88,y:50}];
  const duivelBasis=[
    {x:45,y:30},{x:40,y:55},{x:30,y:40},{x:35,y:70},{x:12,y:50}];
  engelBasis.forEach((p,i)=>{ if(i<4){ Object.assign(p,randomPos(p.x,p.y,5)); } });
  duivelBasis.forEach((p,i)=>{ if(i<4){ Object.assign(p,randomPos(p.x,p.y,5)); } });
  for(let i=0;i<5;i++){
    maakSpeler("engel",i+1,engelBasis[i]);
    maakSpeler("duivel",i+1,duivelBasis[i]);
  }
}
function maakSpeler(team,num,pos){
  const el=document.createElement("div");
  el.className="speler";
  el.id=team+num;
  el.style.left=pos.x+"%";
  el.style.top=pos.y+"%";
  el.innerHTML=`<div class="hoofd">${team==="engel"?"ðŸ˜‡":"ðŸ˜ˆ"}</div>
                <div class="shirt ${team}">${num}</div>`;
  spelersDiv.appendChild(el);
}

function setBal(xPerc,yPerc){
  bal.style.left=xPerc+"%";
  bal.style.top=yPerc+"%";
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

function laadLevel(level){
  huidigLevel=level;
  levelinfo.textContent="Level "+level;
  juisteAntwoorden=0;
  gebruikteVragen=[];
  engelIndex=0;duivelIndex=0;
  tekenSpelers(level);
  setBal(50,50);
  vragenPerLevel=vragen.filter(v=>v.difficulty===level);
  alert("Welkom bij level "+level+"!");
}

vraagBtn.onclick=()=>toonVraag();
sluitBtn.onclick=()=>popup.style.display="none";

function toonVraag(){
  popup.style.display="flex";
  let resterende=vragenPerLevel.filter((v,i)=>!gebruikteVragen.includes(i));
  if(resterende.length===0){volgendeLevel();return;}
  let randomIndex=Math.floor(Math.random()*resterende.length);
  let echteIndex=vragenPerLevel.indexOf(resterende[randomIndex]);
  gebruikteVragen.push(echteIndex);
  const v=vragenPerLevel[echteIndex];
  vraagtekst.textContent=v.q;

  const opties=[...v.a.keys()];
  shuffle(opties);
  antwoordenDiv.innerHTML="";
  opties.forEach(i=>{
    const btn=document.createElement("button");
    btn.className="antw-btn";
    btn.textContent=v.a[i];
    btn.onclick=()=>controleerAntwoord(i===v.correct);
    antwoordenDiv.appendChild(btn);
  });
}

function moveBalTo(team,index){
  const speler=document.getElementById(team+index);
  const shirt=speler.querySelector(".shirt");
  const rect=shirt.getBoundingClientRect();
  const veldRect=veld.getBoundingClientRect();
  const x=((rect.left+rect.width/2)-veldRect.left)/veldRect.width*100;
  const y=((rect.top+rect.height/2)-veldRect.top)/veldRect.height*100;
  setBal(x,y);
  speler.classList.add("spring");
  setTimeout(()=>speler.classList.remove("spring"),600);
}

function controleerAntwoord(isJuist){
  popup.style.display="none";
  if(isJuist){
    geluidJuist.play();
    engelIndex++;
    if(engelIndex<=5){
      moveBalTo("engel",engelIndex);
      if(engelIndex===5){
        setTimeout(()=>{geluidGoal.play();goal("engel");},900);
      }
    }
  }else{
    geluidFout.play();
    duivelIndex++;
    if(duivelIndex<=5){
      moveBalTo("duivel",duivelIndex);
      if(duivelIndex===5){
        setTimeout(()=>{geluidGoal.play();goal("duivel");},900);
      }
    }
  }
}

function goal(team){
  if(team==="engel"){
    setBal(96,50);
    setTimeout(()=>{alert("âš½ï¸ Engelen scoren!");volgendeLevel();},900);
  }else{
    setBal(4,50);
    setTimeout(()=>{alert("ðŸ˜ˆ Duiveltjes scoren!");resetLevel();},900);
  }
}

function resetLevel(){
  engelIndex=0;duivelIndex=0;
  setBal(50,50);
}

function volgendeLevel(){
  if(huidigLevel<3){
    alert("Proficiat! Level "+huidigLevel+" afgerond!");
    laadLevel(huidigLevel+1);
  }else{
    alert("ðŸŽ‰ Je hebt alle levels uitgespeeld!");
    laadLevel(1);
  }
}

window.onload=()=>{laadLevel(1);};
</script>
</body>
</html>
