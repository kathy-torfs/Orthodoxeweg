<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Engeltjes vs Duiveltjes â€“ Orthodoxe Kinderpagina</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png">

  <style>
    body { margin:0; font-family:Arial,sans-serif; background:#0b6623; color:white; text-align:center; }

    /* Scorebord */
    #scoreboard {
      font-size: 22px;
      font-weight: bold;
      margin: 10px 0;
    }

    /* Veld */
    .veld {
      position: relative;
      width: 700px;
      height: 400px;
      margin: 0 auto;
      background: repeating-linear-gradient(
        to right,
        #228b22 0, #228b22 50px,
        #2e8b57 50px, #2e8b57 100px
      );
      border: 4px solid white;
      border-radius: 12px;
    }
    .goal {
      position: absolute;
      width: 60px; height: 120px;
      border: 3px solid white;
      top: 140px;
      background: repeating-linear-gradient(
        45deg,
        rgba(255,255,255,0.3) 0, rgba(255,255,255,0.3) 10px,
        transparent 10px, transparent 20px
      );
    }
    .goal.left { left: -60px; }
    .goal.right { right: -60px; }

    /* Spelers */
    .speler {
      position: absolute;
      text-align: center;
      transform: translate(-50%, -50%);
    }
    .hoofd {
      font-size: 28px;
      display: block;
      margin-bottom: -6px;
    }
    .shirt {
      width: 48px; height: 34px;
      border-radius: 6px;
      color:black; font-weight:bold;
      line-height: 34px;
      box-shadow: 0 0 4px rgba(0,0,0,0.4);
    }
    .shirt.engel { background:#57b8f3; }
    .shirt.duivel { background:#d93838; }

    /* Bal */
    #bal {
      position:absolute;
      font-size:28px;
      transition: all 1s ease;
    }

    /* Vraag-popup */
    #popup {
      position: fixed; top:0; left:0; width:100%; height:100%;
      background: rgba(0,0,0,0.6);
      display: none; align-items: center; justify-content: center;
    }
    #popup-content {
      background: #00ced1; /* appelblauw zeegroen */
      padding: 20px; border-radius: 12px;
      max-width: 500px; width: 80%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3);
      color:black;
    }
    #popup h3 { margin-top:0; }
    .antw-btn {
      display:block; width:100%; margin:8px 0; padding:12px;
      border:none; border-radius:8px;
      background:white; color:black;
      cursor:pointer; font-size:16px;
      box-shadow:0 2px 4px rgba(0,0,0,0.2);
    }
    .close-btn {
      margin-top:10px; padding:8px 16px;
      background:#444; color:white;
      border:none; border-radius:6px;
      cursor:pointer;
    }

    /* Startknop */
    #start-btn {
      margin:20px auto;
      padding:12px 24px;
      background:gold;
      border:none;
      border-radius:8px;
      cursor:pointer;
      font-size:18px;
      font-weight:bold;
    }
  </style>
</head>
<body>

  <!-- Header -->
  <div id="kinder-header"></div>
  <script src="https://kathy-torfs.github.io/Orthodoxeweg/kindermodus/common/layout.js"></script>

  <h2>Engeltjes vs Duiveltjes</h2>
  <div id="scoreboard">Engelen 0 â€“ 0 Duivels</div>
  <div id="veld" class="veld">
    <div class="goal left"></div>
    <div class="goal right"></div>
    <div id="bal">âš½</div>
  </div>

  <button id="start-btn">Start het spel</button>

  <!-- Vraag-popup -->
  <div id="popup">
    <div id="popup-content">
      <h3 id="vraag"></h3>
      <div id="antwoorden"></div>
      <button class="close-btn" onclick="sluitPopup()">Sluit</button>
    </div>
  </div>

  <script src="vragen.js"></script>
  <script>
    const bal = document.getElementById("bal");
    const scoreboard = document.getElementById("scoreboard");
    let engelScore = 0, duivelScore = 0;
    let engelPos = 0, duivelPos = 0;
    let huidigTeam = "engel";

    const posities = {
      engel: [
        {x:500,y:200},{x:450,y:100},{x:550,y:120},{x:520,y:300},{x:640,y:200}
      ],
      duivel: [
        {x:200,y:200},{x:250,y:120},{x:150,y:100},{x:180,y:280},{x:60,y:200}
      ]
    };

    function plaatsSpelers(){
      const veld = document.getElementById("veld");
      veld.querySelectorAll(".speler").forEach(s=>s.remove());
      ["engel","duivel"].forEach(team=>{
        for(let i=0;i<5;i++){
          const s = document.createElement("div");
          s.className="speler";
          s.style.left=posities[team][i].x+"px";
          s.style.top=posities[team][i].y+"px";
          s.innerHTML = `<span class="hoofd">${team==="engel"?"ðŸ˜‡":"ðŸ˜ˆ"}</span>
                         <div class="shirt ${team}">${i+1}</div>`;
          veld.appendChild(s);
        }
      });
    }

    function toonVraag(){
      const q = vragen[Math.floor(Math.random()*vragen.length)];
      document.getElementById("vraag").textContent=q.q;
      const antwDiv = document.getElementById("antwoorden");
      antwDiv.innerHTML="";
      // shuffle
      const opties = q.a.map((a,i)=>({txt:a,correct:i===q.correct}));
      opties.sort(()=>Math.random()-0.5);
      opties.forEach(opt=>{
        const btn=document.createElement("button");
        btn.className="antw-btn";
        btn.textContent=opt.txt;
        btn.onclick=()=>{
          if(opt.correct){
            beweegBal(true);
          } else {
            beweegBal(false);
          }
          sluitPopup();
        };
        antwDiv.appendChild(btn);
      });
      document.getElementById("popup").style.display="flex";
    }
    function sluitPopup(){ document.getElementById("popup").style.display="none"; }

    function beweegBal(correct){
      let team=huidigTeam;
      if(correct){
        if(team==="engel"){
          if(engelPos<4){ engelPos++; } 
          else { engelScore++; resetBal(); }
        } else {
          if(duivelPos<4){ duivelPos++; }
          else { duivelScore++; resetBal(); }
        }
      } else {
        team = (team==="engel")?"duivel":"engel";
        huidigTeam=team;
        if(team==="engel"){ engelPos=0; }
        else { duivelPos=0; }
      }
      updateBal();
      updateScore();
    }

    function updateBal(){
      const team=huidigTeam;
      const idx = (team==="engel"? engelPos : duivelPos);
      const p=posities[team][idx];
      bal.style.left=p.x+"px";
      bal.style.top=p.y+"px";
    }

    function resetBal(){
      engelPos=0; duivelPos=0;
      huidigTeam="engel";
      updateBal();
    }

    function updateScore(){
      scoreboard.textContent=`Engelen ${engelScore} â€“ ${duivelScore} Duivels`;
    }

    document.getElementById("start-btn").onclick=()=>{
      engelScore=0; duivelScore=0;
      updateScore();
      plaatsSpelers();
      resetBal();
      toonVraag();
    };
  </script>
</body>
</html>
