<!DOCTYPE html>
<html lang="nl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Orthodoxe Dagplanner</title>
<link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png" />
<style>
  :root{
    --bg:#fff6e5; --card:#fff; --ink:#3b2b12; --sub:#6d5a34; --line:#e7d8b9;
    --accent:#7bb235; --soft:#f2ead1; --ok:#4caf50;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Arial,system-ui,sans-serif;background:var(--bg);color:var(--ink);}
  header{position:sticky;top:0;background:linear-gradient(180deg,#fff 70%,#fff6e5 100%);
    border-bottom:1px solid var(--line);padding:14px 16px;z-index:10}
  .wrap{max-width:960px;margin:0 auto;padding:16px}
  h1{margin:0 0 4px;font-size:1.6rem}
  .date{color:var(--sub);font-weight:600}
  .grid{display:grid;gap:14px;margin-top:14px}
  @media(min-width:860px){ .grid{grid-template-columns:1fr 1fr} }
  .card{background:var(--card);border:1px solid var(--line);border-radius:14px;padding:14px 14px 10px;
    box-shadow:0 4px 18px #0000000f}
  .card h2{margin:0 0 6px;font-size:1.1rem;color:var(--sub);letter-spacing:.3px}
  .pray{font-style:italic;background:var(--soft);border-left:4px solid var(--accent);
    padding:8px 10px;margin:8px 0 10px;border-radius:10px}
  .row{display:flex;gap:8px;align-items:center;margin:6px 0}
  .row input[type="text"]{flex:1;border:1px solid var(--line);border-radius:10px;padding:8px 10px}
  .row button{border:1px solid var(--line);background:#faf7ee;border-radius:10px;padding:7px 10px;cursor:pointer}
  .todo{margin:6px 0 0}
  .todo li{display:flex;align-items:center;gap:8px;margin:6px 0;padding:6px 8px;border:1px dashed var(--line);border-radius:10px}
  .todo input[type="checkbox"]{width:18px;height:18px}
  .muted{color:#8a7a56;font-size:.95em}
  .tiny{font-size:.9em;color:#7b6a44}
  .ok{color:var(--ok);font-weight:600}
  .foot{margin-top:8px;display:flex;gap:8px;justify-content:flex-end}
  .pill{display:inline-block;background:#eef8e9;border:1px solid #cfe8bf;color:#355e1e;padding:4px 10px;border-radius:999px;font-size:.9em}
  .two{display:grid;gap:10px}
  @media(min-width:620px){ .two{grid-template-columns:1fr 1fr} }
  textarea{width:100%;min-height:90px;border:1px solid var(--line);border-radius:10px;padding:10px}
</style>
</head>
<body>
<header>
  <div class="wrap">
    <h1>Orthodoxe Dagplanner</h1>
    <div class="date" id="vandaag">Vandaag</div>
  </div>
</header>

<main class="wrap">
  <!-- dag-anker: vastenregel + kleine focus -->
  <div class="grid">
    <section class="card">
      <h2>Vastenregel / Focus van de dag</h2>
      <div class="row">
        <input id="vastenregel" type="text" placeholder="bv. Woensdag: geen dierlijke producten of olie" />
        <button onclick="saveAll()">Bewaar</button>
      </div>
      <div class="tiny">Tip: houdt dit in 1 korte zin. <span class="pill" id="status"></span></div>
    </section>

    <section class="card">
      <h2>Korte dagbedoeling</h2>
      <div class="pray" id="suggest-gebed">“Heer, geef ons vandaag vrede in hart en huis.”</div>
      <textarea id="bedoeling" placeholder="Eigen woorden of familiewens..."></textarea>
      <div class="foot"><button onclick="saveAll()">Bewaar</button></div>
    </section>
  </div>

  <!-- dag in blokken -->
  <div class="grid" id="blocks">
    <!-- OCHTEND -->
    <section class="card">
      <h2>Ochtend (opstaan → 10u)</h2>
      <div class="pray">Gebed: “Heer Jezus Christus, zegen deze dag.” (kruisteken, icoonhoekje)</div>
      <ul class="todo" id="todo-ochtend"></ul>
      <div class="row">
        <input id="inp-ochtend" type="text" placeholder="Taak/activiteit toevoegen (wassen, aankleden, ontbijt...)" />
        <button onclick="addItem('ochtend')">+ Voeg toe</button>
      </div>
      <div class="muted">Idee met kind: tafel dekken, 1 psalmregel lezen, brood voor vanavond voorbereiden.</div>
    </section>

    <!-- VOORMIDDAG -->
    <section class="card">
      <h2>Voormiddag (10u → 12u)</h2>
      <div class="pray">Stilte-minuut: kaarsje aansteken, 1 zin uit het Evangelie van vandaag hardop.</div>
      <ul class="todo" id="todo-voormiddag"></ul>
      <div class="row">
        <input id="inp-voormiddag" type="text" placeholder="Taak/activiteit (school/leren, korte klus, korte wandeling)" />
        <button onclick="addItem('voormiddag')">+ Voeg toe</button>
      </div>
      <div class="muted">ADHD-vriendelijk: 2×25 min focus, 5 min pauze, dan iets met de handen.</div>
    </section>

    <!-- MIDDAG -->
    <section class="card">
      <h2>Middag (12u → 14u)</h2>
      <div class="pray">Tafelgebed: “Dank U, Heer, voor dit dagelijks brood.”</div>
      <ul class="todo" id="todo-middag"></ul>
      <div class="row">
        <input id="inp-middag" type="text" placeholder="Maaltijd, afwas, korte rust, 10-min-gesprekje" />
        <button onclick="addItem('middag')">+ Voeg toe</button>
      </div>
      <div class="muted">Relatie-moment: ieder noemt 1 ding waarvoor hij dankbaar is.</div>
    </section>

    <!-- NAMIDDAG -->
    <section class="card">
      <h2>Namiddag (14u → 17u)</h2>
      <div class="pray">Gebed: “Heer, geef mij zachtmoedigheid.”</div>
      <ul class="todo" id="todo-namiddag"></ul>
      <div class="row">
        <input id="inp-namiddag" type="text" placeholder="Buitenlucht, klusje, samen bakken/koken, 1 dienstbare daad" />
        <button onclick="addItem('namiddag')">+ Voeg toe</button>
      </div>
      <div class="muted">Kind-idee: brood kneden, hout stapelen, plant verzorgen, kleine buurt-hulp.</div>
    </section>

    <!-- AVOND -->
    <section class="card">
      <h2>Avond (17u → 20u)</h2>
      <div class="pray">Gezinsgebed: “Heer, ontferm U.” (kort, rustig) + 1 regel uit de heiligenlevens.</div>
      <ul class="todo" id="todo-avond"></ul>
      <div class="row">
        <input id="inp-avond" type="text" placeholder="Avondmaal, opruim, brood bakken (airfryer), rustig spel/lezing" />
        <button onclick="addItem('avond')">+ Voeg toe</button>
      </div>
      <div class="muted">Schermarm: kaarsje, zacht licht, eenvoudige muziek of stilte.</div>
    </section>

    <!-- NACHT -->
    <section class="card">
      <h2>Nacht (20u → slapen)</h2>
      <div class="pray">Dankgebed: noem 3 dankpunten; kruisteken; vrede wensen.</div>
      <ul class="todo" id="todo-nacht"></ul>
      <div class="row">
        <input id="inp-nacht" type="text" placeholder="Pyjama, tanden, boekje, licht uit" />
        <button onclick="addItem('nacht')">+ Voeg toe</button>
      </div>
      <div class="muted">Ritme geneest: elke dag dezelfde volgorde geeft veiligheid.</div>
    </section>
  </div>

  <!-- Reflectie -->
  <section class="card" style="margin-top:14px">
    <h2>Reflectie van vandaag</h2>
    <div class="two">
      <textarea id="reflectie" placeholder="Wat ging goed? Waar was liefde zichtbaar? Waarin wil ik morgen groeien?"></textarea>
      <textarea id="notities" placeholder="Praktisch: boodschappen, taken voor morgen, recept-idee, catechese-hint..."></textarea>
    </div>
    <div class="foot">
      <button onclick="saveAll()">Bewaar alles</button>
    </div>
    <div class="tiny">Alles wordt lokaal opgeslagen in je browser (geen login nodig).</div>
  </section>
</main>

<script>
  // ---- datum (Europe/Brussels) ----
  const fmt = new Intl.DateTimeFormat('nl-BE',{weekday:'long', day:'2-digit', month:'long', year:'numeric', timeZone:'Europe/Brussels'});
  document.getElementById('vandaag').textContent = fmt.format(new Date());

  // ---- localStorage helpers ----
  const KEY = 'ow_dagplanner_v1';
  function load(){
    try{ return JSON.parse(localStorage.getItem(KEY)) || {}; }catch{ return {}; }
  }
  function store(data){
    localStorage.setItem(KEY, JSON.stringify(data));
    const s = document.getElementById('status');
    if(s){ s.textContent='Bewaard'; setTimeout(()=>s.textContent='',1500); }
  }

  // ---- model ----
  const blocks = ['ochtend','voormiddag','middag','namiddag','avond','nacht'];
  let state = Object.assign(
    {vastenregel:'', bedoeling:'', reflectie:'', notities:''},
    ...blocks.map(b => ({[b]:[]}))
  , load());

  // ---- UI init ----
  const id = s => document.getElementById(s);
  id('vastenregel').value = state.vastenregel || '';
  id('bedoeling').value   = state.bedoeling   || '';
  id('reflectie').value   = state.reflectie   || '';
  id('notities').value    = state.notities    || '';

  // render todos
  function renderList(block){
    const ul = id('todo-'+block);
    ul.innerHTML = '';
    (state[block]||[]).forEach((item, i)=>{
      const li = document.createElement('li');
      li.innerHTML = `
        <input type="checkbox" ${item.done?'checked':''} onchange="toggleDone('${block}',${i},this.checked)" />
        <span style="flex:1;${item.done?'text-decoration:line-through;color:#8c7d60':''}">${escapeHtml(item.text)}</span>
        <button onclick="delItem('${block}',${i})">Verwijder</button>
      `;
      ul.appendChild(li);
    });
  }
  blocks.forEach(renderList);

  // add / toggle / delete
  function addItem(block){
    const inp = id('inp-'+block);
    const txt = (inp.value||'').trim();
    if(!txt) return;
    state[block] = state[block] || [];
    state[block].push({text:txt, done:false});
    inp.value='';
    renderList(block);
    store(state);
  }
  function toggleDone(block, idx, val){
    if(!state[block]) return;
    state[block][idx].done = !!val;
    store(state);
  }
  function delItem(block, idx){
    if(!state[block]) return;
    state[block].splice(idx,1);
    renderList(block);
    store(state);
  }

  // save all text fields
  function saveAll(){
    state.vastenregel = id('vastenregel').value.trim();
    state.bedoeling   = id('bedoeling').value.trim();
    state.reflectie   = id('reflectie').value.trim();
    state.notities    = id('notities').value.trim();
    store(state);
  }

  // small helper
  function escapeHtml(s){ return s.replace(/[&<>"']/g,m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

  // suggesties per dag (optioneel, eenvoudig voorbeeld)
  const weekday = new Intl.DateTimeFormat('nl-BE',{weekday:'long', timeZone:'Europe/Brussels'}).format(new Date()).toLowerCase();
  const suggesties = {
    maandag:'“Heer, leer mij zachtmoedig te zijn.”',
    dinsdag:'“Heer, geef mij wijsheid en vrede.”',
    woensdag:'“Heer, help ons vasten met een blij hart.”',
    donderdag:'“Heer, zegen onze arbeid en ons woord.”',
    vrijdag:'“Heer, ontferm U.”',
    zaterdag:'“Heer, reinig mijn hart.”',
    zondag:'“Heer, dank voor Uw opstanding.”'
  };
  const s = document.getElementById('suggest-gebed');
  if(s) s.textContent = suggesties[weekday] || s.textContent;
</script>
</body>
</html>
