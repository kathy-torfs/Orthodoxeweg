<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Orthodoxe Dagkalender</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f6e7b4;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #5e3907;
      padding: 15px;
      text-align: center;
    }
    nav a {
      text-decoration: none;
      margin: 6px;
      padding: 10px 14px;
      background-color: #ffe7a0;
      color: #5e3907;
      font-weight: bold;
      border-radius: 8px;
      display: inline-block;
      transition: background 0.3s;
    }
    nav a:hover {
      background-color: #ffd974;
    }
    .container {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      gap: 40px;
      padding: 30px;
      flex-wrap: wrap;
    }
    .prikbord {
      width: 200px;
      height: 300px;
      background-color: #deb887;
      border: 6px solid #8b5e3c;
      border-radius: 10px;
      box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-weight: bold;
      text-align: center;
      color: white;
    }
    .prikbord a {
      color: white;
      text-decoration: none;
    }
    .prikbord.locked {
      opacity: 0.6;
    }
    .kalender {
      background-color: white;
      border: 2px solid #ccc;
      border-radius: 12px;
      padding: 20px;
      width: 350px;
      text-align: center;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      position: relative;
    }
    .vastenicoon {
      position: absolute;
      top: 10px;
      right: 10px;
      font-size: 24px;
    }
    .datum {
      font-size: 22px;
      font-weight: bold;
      margin-bottom: 10px;
    }
    .heilige {
      font-size: 18px;
      margin-top: 10px;
      font-weight: bold;
      color: #5e3907;
    }
    .dagicoon {
      width: 120px;
      height: auto;
      margin: 10px 0;
      border-radius: 8px;
    }
    .weekdag {
      font-size: 20px;
      margin-bottom: 10px;
    }
    .troparion, .psalm {
      font-size: 15px;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>
    <nav>
      <a href="index.html">Home</a>
      <a href="catechese/index.html">📘 Catechese</a>
      <a href="psalmen/index.html">🎵 Psalmen</a>
      <a href="bijbel/index.html">📖 Bijbelteksten</a>
      <a href="recepten/kookboek.html">🍲 Recepten</a>
      <a href="kaarsjes.html">🕯️ Kaarsje aansteken</a>
      <a href="heiligen/index.html">🌟 Heiligen</a>
      <a href="praxis.html">📜 Orthodoxe Praxis</a>
      <a href="weekmenu.html">🗓️ Weekmenu</a>
    </nav>
  </header>
  <div class="container">
    <div class="prikbord" id="bord-links">
      <div>📌<br>Parochienieuws</div>
      <div class="toegang"></div>
    </div>
    <div class="kalender">
      <div class="vastenicoon" id="vastenicoon"></div>
      <div class="datum" id="datum">...</div>
      <div class="heilige" id="heiligenaam">Heilige van de dag</div>
      <img id="dagicoon" src="" alt="Icoon van de heilige" class="dagicoon">
      <div class="weekdag" id="weekdag">...</div>
      <div class="troparion" id="troparion">Troparion wordt geladen...</div>
      <div class="psalm" id="psalmvers">Psalmvers wordt geladen...</div>
    </div>
    <div class="prikbord" id="bord-rechts">
      <div>💬<br>Zoekertjes</div>
      <div class="toegang"></div>
    </div>
  </div>
  <script>
    const today = new Date();
    const maandNamen = ["JANUARI", "FEBRUARI", "MAART", "APRIL", "MEI", "JUNI", "JULI", "AUGUSTUS", "SEPTEMBER", "OKTOBER", "NOVEMBER", "DECEMBER"];
    const weekdagen = ["ZONDAG", "MAANDAG", "DINSDAG", "WOENSDAG", "DONDERDAG", "VRIJDAG", "ZATERDAG"];
    const maand = maandNamen[today.getMonth()];
    const dag = today.getDate();
    const weekdag = weekdagen[today.getDay()];
    document.getElementById("datum").textContent = `${dag} ${maand}`;
    document.getElementById("weekdag").textContent = weekdag;

    const maandGetal = today.getMonth() + 1;
    const proxyUrl = "https://api.allorigins.win/raw?url=";
    const apiUrl = `https://www.goarch.org/chapel/calendar?type=json&date=${maandGetal}/${dag}/${today.getFullYear()}`;

    fetch(proxyUrl + encodeURIComponent(apiUrl))
      .then(res => res.json())
      .then(data => {
        const naamElement = document.getElementById("heiligenaam");
        if (data.saints && data.saints.length > 0 && data.saints[0].name) {
          naamElement.textContent = data.saints[0].name;
          if (data.saints[0].icon) {
            document.getElementById("dagicoon").src = data.saints[0].icon;
            document.getElementById("dagicoon").alt = data.saints[0].name;
          }
        } else {
          naamElement.textContent = "Geen heilige vermeld";
        }

        if (data.fasting) {
          const status = data.fasting.toLowerCase();
          let icoon = "";
          if (status.includes("strict")) icoon = "✝️";
          else if (status.includes("fish")) icoon = "🐟";
          else if (status.includes("wine") || status.includes("oil")) icoon = "🍇";
          else if (status.includes("dairy") || status.includes("milk")) icoon = "🧀🥛";
          document.getElementById("vastenicoon").textContent = icoon;
        }

        const troparion = data.readings?.[0]?.text || "Geen troparion beschikbaar.";
        document.getElementById("troparion").textContent = troparion;
        document.getElementById("psalmvers").textContent = "Zalig de man die niet wandelt in de raad der goddelozen.";
      })
      .catch(error => {
        document.getElementById("heiligenaam").textContent = "Fout bij laden van kalender.";
        console.error("Fout bij ophalen van GOARCH-data:", error);
      });

    const isIngelogd = false;
    if (isIngelogd) {
      document.getElementById("bord-links").innerHTML = '<a href="parochienieuws.html">📌<br>Parochienieuws</a>';
      document.getElementById("bord-rechts").innerHTML = '<a href="zoekertjes.html">💬<br>Zoekertjes</a>';
    } else {
      document.querySelectorAll(".toegang").forEach(el => el.innerHTML = "<small>🔒 Meld je aan</small>");
    }
  </script>
</body>
</html>
