<style>
  body {
    background-color: #f5e9b8;
    color: #6f4e1a;
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
  }
  .taalkeuze { text-align: center; margin: 18px 0 6px 0; }
  .taalkeuze button {
    background: #eee3c6; color: #6f4e1a;
    border: 1.5px solid #6f4e1a;
    padding: 6px 12px; margin: 0 4px;
    border-radius: 6px; cursor: pointer;
  }
  .taalkeuze button.selected { background: #6f4e1a; color: #fff; }
  .boek-wrapper { display: flex; justify-content: center; margin: 20px auto; }
  .boek {
    display: flex; width: 90%; max-width: 900px;
    background: #fffef7; border: 2px solid #6f4e1a;
    border-radius: 8px; overflow: hidden;
    box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    position: relative;
  }
  .pagina { flex: 1; padding: 20px; overflow-y: auto; }
  .pagina.links { border-right: 1px solid #d1bfa3; }
  .hoek-linksonder, .hoek-rechtsonder {
    position: absolute; bottom: 10px;
    background: #6f4e1a; color: #fff; border: none;
    padding: 8px 12px; cursor: pointer; border-radius: 4px;
  }
  .hoek-linksonder { left: 10px; }
  .hoek-rechtsonder { right: 10px; }
  .tip-blok { margin-top: 12px; padding: 8px; background: #fff4cc; border-left: 4px solid #e6a600; }
</style>

<div style="background:yellow; color:black; text-align:center;">
  ✅ startpagina.html werd ingeladen
</div>

<div class="taalkeuze">
  <button id="btn-vlaams" class="selected">🇧🇪 Vlaams</button>
  <button id="btn-engels">🇬🇧 English</button>
  <button id="btn-grieks">🇬🇷 Ελληνικά</button>
</div>

<div class="boek-wrapper">
  <div class="boek">
    <button class="hoek-linksonder" id="vorigeDag">&lt;</button>
    <div class="pagina links"><div id="heilige-inhoud">⏳ Laden...</div></div>
    <div class="pagina rechts">
      <div id="dagkalender-inhoud">⏳ Laden...</div>
      <div class="tip-blok" id="dagkalender-tip"></div>
    </div>
    <button class="hoek-rechtsonder" id="volgendeDag">&gt;</button>
  </div>
</div>

<script>
  console.log("✅ Script in startpagina.html gestart");

  try {
    const db = firebase.firestore();
    console.log("✅ Firestore beschikbaar:", db);

    let huidigeTaal = "vlaams";
    let actieveDatum = new Date();

    document.getElementById("vorigeDag").onclick = () => { console.log("⬅ Vorige dag"); actieveDatum.setDate(actieveDatum.getDate()-1); laadAlles(); };
    document.getElementById("volgendeDag").onclick = () => { console.log("➡ Volgende dag"); actieveDatum.setDate(actieveDatum.getDate()+1); laadAlles(); };

    document.getElementById("btn-vlaams").onclick = () => { console.log("🌐 Taal Vlaams"); huidigeTaal="vlaams"; setTaal(); };
    document.getElementById("btn-engels").onclick = () => { console.log("🌐 Taal Engels"); huidigeTaal="engels"; setTaal(); };
    document.getElementById("btn-grieks").onclick = () => { console.log("🌐 Taal Grieks"); huidigeTaal="grieks"; setTaal(); };

    function setTaal(){
      document.querySelectorAll('.taalkeuze button').forEach(b=>b.classList.remove('selected'));
      document.getElementById("btn-"+huidigeTaal).classList.add("selected");
      laadAlles();
    }

    function pad(n){ return n<10 ? "0"+n : n; }

    async function laadAlles(){
      const jaar = actieveDatum.getFullYear();
      const maand = pad(actieveDatum.getMonth()+1);
      const dag = pad(actieveDatum.getDate());
      const kalenderId = `${jaar}${maand}${dag}`;
      const feestdag = `${dag}-${maand}`;

      console.log("📅 Laad datum:", kalenderId, "taal:", huidigeTaal);

      // LINKS (Heilige)
      const heiligeContainer = document.getElementById('heilige-inhoud');
      heiligeContainer.innerHTML="⏳ Heilige laden...";
      try {
        const snap = await db.collection("heiligen").where("feestdag","==",feestdag).get();
        console.log("🔎 Heiligen gevonden:", snap.size);
        if(snap.empty){ heiligeContainer.innerHTML="❌ Geen heilige gevonden"; return; }
        const data = snap.docs[0].data();
        console.log("📜 Heilige data:", data);
        heiligeContainer.innerHTML = `<b>${data.naam_nl||"?"}</b>`;
      } catch(err){
        console.error("⚠️ Fout bij laden heiligen:", err);
        heiligeContainer.innerHTML="❌ Fout bij laden heiligen";
      }

      // RECHTS (Kalender)
      const kalenderContainer = document.getElementById('dagkalender-inhoud');
      kalenderContainer.innerHTML="⏳ Kalender laden...";
      try {
        const doc = await db.collection("kalender2025").doc(kalenderId).get();
        if(!doc.exists){ kalenderContainer.innerHTML="❌ Geen kalenderinfo"; return; }
        const data = doc.data();
        console.log("📜 Kalenderdata:", data);
        kalenderContainer.innerHTML = `<b>${kalenderId}</b><br>${data["Vastenregel NL"]||"?"}`;
      } catch(err){
        console.error("⚠️ Fout bij laden kalender:", err);
        kalenderContainer.innerHTML="❌ Fout bij laden kalender";
      }
    }

    laadAlles();

  } catch(e){
    console.error("🚨 Fout in startpagina script:", e);
    document.body.insertAdjacentHTML("afterbegin","<div style='color:red'>🚨 Fout: "+e+"</div>");
  }
</script>
