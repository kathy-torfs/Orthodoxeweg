<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gebed ‚Äì Priestermodus</title>
  <style>
    body {
      font-family: Georgia, serif;
      background-color: #fffdf6;
      color: #3e2f1c;
      margin: 0;
      text-align: center;
    }
    header {
      background-color: #5e3907;
      color: white;
      padding: 20px 8px 13px 8px;
    }
    nav {
      background-color: #fff1cd;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      padding: 15px;
      border-bottom: 2px solid #c4a85d;
    }
    nav a {
      text-decoration: none;
      background-color: #ffeeba;
      padding: 10px 16px;
      border-radius: 8px;
      color: #5e3907;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      transition: 0.3s;
    }
    nav a:hover {
      background-color: #ffeda2;
    }
    main {
      max-width: 800px;
      margin: 40px auto 0 auto;
      padding: 20px 10px 50px 10px;
      background: #fffefb;
      border-radius: 16px;
      box-shadow: 0 2px 22px #e2d3a544;
    }
    .gebed-titel {
      font-size: 2.1em;
      font-weight: bold;
      color: #432810;
      margin-bottom: 16px;
      margin-top: 16px;
      letter-spacing: 0.04em;
    }
    .gebed-inhoud {
      text-align: left;
      font-size: 1.23em;
      line-height: 1.6;
      background: #fff7e2;
      color: #4b371b;
      border-radius: 11px;
      padding: 28px 24px 24px 24px;
      margin-bottom: 24px;
      box-shadow: 0 2px 10px #ebd9b6a3;
      white-space: pre-line;
      word-break: break-word;
    }
    .terug-link {
      display: inline-block;
      margin-bottom: 28px;
      background: #e0bb6a;
      color: #fff;
      padding: 10px 32px;
      border-radius: 9px;
      font-weight: bold;
      text-decoration: none;
      transition: background 0.18s;
      font-size: 1.08em;
    }
    .terug-link:hover {
      background: #a17d2d;
      color: #fffbea;
    }
    .pdf-link {
      display: inline-block;
      background: #d6a847;
      color: #fff;
      border-radius: 10px;
      font-weight: bold;
      text-align: center;
      padding: 14px 42px;
      box-shadow: 0 2px 7px #e1d5ae29;
      font-size: 1.07em;
      text-decoration: none;
      letter-spacing: 0.03em;
      margin-top: 12px;
    }
    .pdf-link:hover {
      background: #a17d2d;
      color: #fffbea;
    }
    .meta-info {
      color: #a9955c;
      margin-bottom: 8px;
      font-size: 1em;
      font-style: italic;
    }
    @media (max-width: 900px) {
      main { width: 98vw; padding: 4vw 1vw 7vw 1vw; }
    }
  </style>
  <!-- FIREBASE SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

  <header>
    <h1>Gebed ‚Äì detail</h1>
  </header>

  <nav class="menu">
    <a href="startpagina.html">üè† Home</a>
    <a href="parochie.html">üõê Mijn parochie</a>
    <a href="psalmen.html">üìú Psalmen</a>
    <a href="gebeden.html">üôè Gebeden</a>
    <a href="geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
    <a href="catechese.html">üìñ Catechese</a>
    <a href="layout.html">üß∞ Bewerk parochie</a>
    <a href="uitloggen.html">üö™ Uitloggen</a>
  </nav>

  <main>
    <a class="terug-link" href="gebeden.html">&larr; Terug naar alle gebeden</a>
    <div class="meta-info" id="metaInfo"></div>
    <div class="gebed-titel" id="gebedTitel">Bezig met laden...</div>
    <div class="gebed-inhoud" id="gebedInhoud"></div>
    <a class="pdf-link" href="https://orthodoxekerkhasselt.com/wp-content/uploads/2024/11/liturgische-teksten-het-klein-orthodox-gebedenboekje-v7.5-nld.pdf" 
      target="_blank">
      üìñ Volledig Gebedenboekje (PDF)
    </a>
  </main>

  <script>
    // FIREBASE INIT
    const firebaseConfig = {
      apiKey: "AIzaSyBKEakRzmnPZ3DY8NUkZrZr_YtqBbNVHL4",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:2e02833fa0d4d8903ceedb"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Helper om id uit de URL te halen
    function getGebedId() {
      const params = new URLSearchParams(window.location.search);
      return params.get("id");
    }

    // Ophalen uit Firestore
    function laadGebed() {
      const id = getGebedId();
      if (!id) {
        document.getElementById("gebedTitel").textContent = "Geen gebed opgegeven.";
        document.getElementById("gebedInhoud").innerHTML = "<div style='color:#a00;font-size:1.15em;'>Er is geen geldig gebeds-ID opgegeven.</div>";
        return;
      }
      db.collection("gebeden_vw").doc(id).get().then(doc => {
        if (!doc.exists) {
          document.getElementById("gebedTitel").textContent = "Niet gevonden";
          document.getElementById("gebedInhoud").innerHTML = "<div style='color:#a00;font-size:1.12em;'>Dit gebed werd niet gevonden in de database.</div>";
          return;
        }
        const data = doc.data();
        document.getElementById("gebedTitel").textContent = data.naam || "Gebed";
        document.getElementById("gebedInhoud").textContent = data.tekst || "Geen tekst beschikbaar.";

        // Extra metadata tonen als die bestaat
        let meta = "";
        if (data.type) meta += "Type: " + data.type + " &nbsp;‚Ä¢&nbsp; ";
        if (data.doelgroep) meta += "Doelgroep: " + data.doelgroep + " &nbsp;‚Ä¢&nbsp; ";
        if (data.toelichting) meta += "Toelichting: " + data.toelichting;
        document.getElementById("metaInfo").innerHTML = meta;
      }).catch(err => {
        document.getElementById("gebedTitel").textContent = "Fout";
        document.getElementById("gebedInhoud").innerHTML = "<div style='color:#a00;'>Fout bij laden van het gebed.</div>";
        console.error(err);
      });
    }
    laadGebed();
  </script>

</body>
</html>
