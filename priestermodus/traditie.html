<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Priestermodus â€“ Tradities</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png" />

  <style>
    body { margin:0; font-family: Arial, sans-serif; background:#f5e9b8; color:#5b3a00; }
    .container { display:flex; max-width:1300px; margin:20px auto; gap:20px; }
    .index { width:280px; background:#fffdf6; border:1px solid #dbc592; border-radius:10px; padding:12px; box-shadow:0 2px 8px rgba(0,0,0,.1); }
    .index h3 { margin-top:0; font-size:1.2em; color:#7a5f35; }
    .index ul { list-style:none; padding:0; margin:0; }
    .index li { margin:6px 0; }
    .index a { color:#5b3a00; text-decoration:none; font-weight:bold; }
    .index a:hover { text-decoration:underline; }

    .content { flex:1; background:#fffef8; border:1px solid #dbc592; border-radius:10px; padding:18px; box-shadow:0 2px 8px rgba(0,0,0,.1); }
    h1 { font-size:1.5em; color:#7a5f35; margin-top:0; }
    .sub { margin-top:4px; font-size:.95em; color:#7a5f35; opacity:.85; }

    .bar { display:flex; gap:10px; flex-wrap:wrap; margin:12px 0 18px; }
    .tab { border:1px solid #ead9b4; background:#fff; padding:8px 14px; border-radius:999px; cursor:pointer; }
    .tab.active { background:#7bb235; color:#fff; border-color:#7bb235; }

    .card { background:#ffffff; border:1px solid #ead9b4; border-radius:12px; padding:14px; margin-bottom:16px; }
    .card h2 { margin-top:0; color:#67510C; }

    textarea, input { width:100%; margin:6px 0; padding:8px; border:1px solid #cbb994; border-radius:6px; font-family:inherit; font-size:1em; }
    textarea { min-height:80px; resize:vertical; }

    .save-row { text-align:right; margin-top:12px; }
    .btn { background:#7bb235; color:#fff; border:none; border-radius:8px; padding:10px 16px; cursor:pointer; }
    .btn:hover { background:#5f8c29; }
    .btn.secondary { background:#b09765; }
    .hidden { display:none; }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <!-- Layout (vaste header + CSS) -->
  <script defer src="../common/layout.js"></script>
</head>
<body>
  <!-- Vaste header -->
  <div id="priester-header" data-header-src="../common/header.html"></div>

  <div class="container">
    <!-- Index -->
    <div class="index">
      <h3>ðŸ“œ Tradities</h3>
      <ul id="traditieIndex"></ul>
      <div class="save-row">
        <button class="btn secondary" id="newTraditie">+ Nieuwe traditie</button>
      </div>
    </div>

    <!-- Content -->
    <div class="content">
      <h1><input id="traditieTitel" value="Icoon van de Moeder Gods â€“ 31 aug / 1 sep (Indictie)" /></h1>
      <p class="sub"><input id="traditieSub" value="Opening van het kerkelijk jaar (Indictie). Korte rite voor thuis of parochie." /></p>

      <div class="bar">
        <button class="tab active" data-target="#avond">Avond</button>
        <button class="tab" data-target="#ochtend">Ochtend</button>
        <button class="tab" data-target="#uitleg">Betekenis</button>
        <button class="tab" data-target="#gebeden">Alle gebeden</button>
      </div>

      <!-- Avond -->
      <section id="avond" class="card">
        <h2>Avond (31 augustus)</h2>
        <textarea id="avondTekst">Heer Jezus Christus, Zoon van God, om de gebeden van Uw alreine Moeder, zegen ons huis en dit einde van het kerkelijk jaar. Amen.</textarea>
      </section>

      <!-- Ochtend -->
      <section id="ochtend" class="card hidden">
        <h2>Ochtend (1 september)</h2>
        <textarea id="ochtendTekst">O Schepper van heel de schepping, Gij die tijden en jaren hebt vastgesteld, zegen het begin van dit kerkelijk jaar. Schenk Uw volk overvloed van genade, vrede en vergeving, om de voorbede van de Moeder Gods. Amen.</textarea>
      </section>

      <!-- Uitleg -->
      <section id="uitleg" class="card hidden">
        <h2>Betekenis</h2>
        <textarea id="uitlegTekst">In de Orthodoxe Kerk begint het kerkelijk jaar op 1 september (Indictie). Op de avond ervoor plaatsen gelovigen het icoon buiten als dank voor het voorbije jaar. Op 1 september wordt het icoon binnengehaald als teken dat we het nieuwe jaar toevertrouwen aan de Moeder Gods.</textarea>
      </section>

      <!-- Gebeden -->
      <section id="gebeden" class="card hidden">
        <h2>Alle gebeden</h2>
        <textarea id="gebedenTekst">Inleidend gebed â€“ Heer Jezus Christus, Zoon van God... 
Onder Uw bescherming nemen wij onze toevlucht... 
Dankgebed â€“ Moeder Gods, Theotokos, wij danken U... 
Heer, ontferm U (1 sep)... 
Troparion van de Indictie...
Slotformule â€“ Christus, ware God, verhoore ons...</textarea>
      </section>

      <div class="save-row">
        <button class="btn" id="saveBtn">Opslaan in Firestore</button>
      </div>
    </div>
  </div>

  <script>
    // Tabs
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(t=>{
      t.addEventListener('click',()=>{
        tabs.forEach(x=>x.classList.remove('active'));
        t.classList.add('active');
        document.querySelectorAll('.content > section').forEach(s=>s.classList.add('hidden'));
        const target = document.querySelector(t.dataset.target);
        if(target) target.classList.remove('hidden');
      });
    });

    // Opslaan in Firestore
    document.getElementById("saveBtn").onclick = async () => {
      const docId = "indictie_1sep";
      await db.collection("tradities").doc(docId).set({
        titel: document.getElementById("traditieTitel").value,
        subtitel: document.getElementById("traditieSub").value,
        avond: document.getElementById("avondTekst").value,
        ochtend: document.getElementById("ochtendTekst").value,
        uitleg: document.getElementById("uitlegTekst").value,
        gebeden: document.getElementById("gebedenTekst").value
      }, {merge:true});
      alert("Traditie opgeslagen!");
      loadIndex();
    };

    // Index laden
    async function loadIndex() {
      const ul = document.getElementById("traditieIndex");
      ul.innerHTML = "";
      const snap = await db.collection("tradities").get();
      snap.forEach(doc=>{
        const li=document.createElement("li");
        li.innerHTML = `<a href="#">${doc.data().titel}</a>`;
        ul.appendChild(li);
      });
    }
    loadIndex();

    document.getElementById("newTraditie").onclick = () => {
      document.getElementById("traditieTitel").value = "Nieuwe traditie";
      document.getElementById("traditieSub").value = "";
      document.getElementById("avondTekst").value = "";
      document.getElementById("ochtendTekst").value = "";
      document.getElementById("uitlegTekst").value = "";
      document.getElementById("gebedenTekst").value = "";
    };
  </script>
</body>
</html>
