<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Priestermodus – Traditie</title>
  <link rel="icon" href="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png" />

  <style>
    :root{
      --bg:#fff6e5; --ink:#5b3a00; --brand:#7bb235; --accent:#67510C; --soft:#ffe7a8;
      --card:#ffffff; --line:#ead9b4;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.5}
    header{background:linear-gradient(135deg,var(--soft),#fff);
      border-bottom:1px solid var(--line);padding:20px}
    header .title{display:flex;gap:12px;align-items:center;justify-content:center;flex-wrap:wrap}
    header img.icon{width:28px;height:28px}
    h1{margin:0;font-size:1.5rem;color:var(--accent);letter-spacing:.3px}
    .sub{opacity:.9;font-size:.95rem;margin-top:6px;text-align:center}
    main{max-width:900px;margin:20px auto;padding:0 14px 40px}
    .bar{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin:12px 0 18px}
    .tab{border:1px solid var(--line);background:var(--card);padding:10px 14px;border-radius:999px;cursor:pointer}
    .tab.active{background:var(--brand);color:#fff;border-color:var(--brand);box-shadow:0 2px 10px rgba(0,0,0,.07)}
    .card{background:var(--card);border:1px solid var(--line);border-radius:16px;
      padding:16px 16px;margin:12px 0;box-shadow:0 6px 18px rgba(0,0,0,.05)}
    h2{font-size:1.2rem;margin:0 0 8px;color:var(--accent)}
    h3{font-size:1.05rem;margin:12px 0 8px;color:var(--accent)}
    .steps{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-top:6px}
    .step{border:1px dashed var(--line);border-radius:12px;padding:12px}
    .step b{color:var(--accent)}
    details{border:1px solid var(--line);border-radius:12px;padding:10px 12px;background:#fff}
    summary{cursor:pointer;font-weight:600;color:var(--accent)}
    .tip{background:#f9f2dc;border-left:4px solid var(--brand);padding:10px 12px;border-radius:8px;margin:8px 0}
    .mini{font-size:.92rem}
    .center{text-align:center}
    .imgwrap{display:flex;justify-content:center;margin:8px 0 4px}
    .imgwrap img{max-width:160px;border-radius:10px;border:1px solid var(--line)}
    .small{font-size:.9rem;opacity:.9}
    .hr{height:1px;background:var(--line);margin:14px 0;border:0}
    .buttons{display:flex;gap:10px;flex-wrap:wrap;justify-content:center;margin-top:6px}
    .btn{background:var(--brand);color:#fff;border:0;border-radius:10px;padding:10px 14px;cursor:pointer}
    .btn.ghost{background:#fff;color:var(--accent);border:1px solid var(--line)}
    .hidden{display:none}
    #saveMsg{text-align:center;margin-top:10px;font-weight:bold}
    @media print{
      .bar,.buttons{display:none}
      header{border-bottom:0}
      main{padding:0}
      .card{box-shadow:none;border-color:#ddd}
    }
  </style>

  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb"
    };
    if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>

  <!-- Layout -->
  <script defer src="../common/layout.js"></script>
</head>
<body>
  <!-- Vaste header -->
  <div id="priester-header" data-header-src="../common/header.html"></div>

  <header>
    <div class="title">
      <img class="icon" alt="Kruis" src="https://kathy-torfs.github.io/Orthodoxeweg/images/kruis.png">
      <h1>Icoon van de Moeder Gods – 31 aug buiten • 1 sep binnen</h1>
    </div>
    <p class="sub">Opening van het kerkelijk jaar (Indictie). Korte rite voor thuis of parochie.</p>
  </header>

  <main>
    <div class="bar" role="tablist">
      <button class="tab active" data-target="#avond">Vanavond 31 augustus</button>
      <button class="tab" data-target="#ochtend">Morgen 1 september</button>
      <button class="tab" data-target="#uitleg">Betekenis</button>
      <button class="tab" data-target="#gebeden">Alle gebeden (overzicht)</button>
    </div>

    <!-- Avond -->
    <section id="avond" class="card">
      <h2>Rite — Avond van 31 augustus</h2>
      <!-- inhoud zoals je al had -->
    </section>

    <!-- Ochtend -->
    <section id="ochtend" class="card hidden">
      <!-- inhoud zoals je al had -->
    </section>

    <!-- Uitleg -->
    <section id="uitleg" class="card hidden">
      <!-- inhoud zoals je al had -->
    </section>

    <!-- Gebeden -->
    <section id="gebeden" class="card hidden">
      <!-- inhoud zoals je al had -->
    </section>

    <!-- Opslaan in Firestore -->
    <div class="buttons">
      <button class="btn" onclick="saveTraditie()">Opslaan in Firestore</button>
    </div>
    <div id="saveMsg"></div>
  </main>

  <script>
    // Tabs
    const tabs = document.querySelectorAll('.tab');
    tabs.forEach(t=>{
      t.addEventListener('click',()=>{
        tabs.forEach(x=>x.classList.remove('active'));
        t.classList.add('active');
        document.querySelectorAll('main > section').forEach(s=>s.classList.add('hidden'));
        const target = document.querySelector(t.dataset.target);
        if(target) target.classList.remove('hidden');
        target?.scrollIntoView({behavior:'smooth', block:'start'});
      });
    });

    // Opslaan
    async function saveTraditie(){
      try{
        await db.collection("tradities").doc("indictie_1sep").set({
          titel: "Icoon van de Moeder Gods – 31 aug / 1 sep",
          sub: "Opening van het kerkelijk jaar (Indictie)",
          tabs: ["avond","ochtend","uitleg","gebeden"],
          createdAt: firebase.firestore.FieldValue.serverTimestamp()
        }, {merge:true});
        document.getElementById("saveMsg").textContent = "✅ Traditie opgeslagen!";
        document.getElementById("saveMsg").style.color = "green";
      }catch(e){
        document.getElementById("saveMsg").textContent = "❌ Fout bij opslaan: " + e.message;
        document.getElementById("saveMsg").style.color = "red";
      }
    }
  </script>
</body>
</html>
