<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gebeden ‚Äì Priestermodus</title>
  <style>
    body {
      font-family: Georgia, serif;
      background-color: #fffdf6;
      color: #3e2f1c;
      margin: 0;
      text-align: center;
    }
    .parochie-balk {
      background: #d9c698;
      color: #543e13;
      font-weight: bold;
      font-size: 1.05em;
      padding: 12px 0 7px 0;
      box-shadow: 0 2px 8px #0001;
      letter-spacing: 0.2px;
    }
    header {
      background-color: #5e3907;
      color: white;
      padding: 20px;
      margin-bottom: 8px;
    }
    nav {
      background-color: #fff1cd;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 10px;
      padding: 15px;
      border-bottom: 2px solid #c4a85d;
      margin-bottom: 0;
    }
    nav a {
      text-decoration: none;
      background-color: #ffeeba;
      padding: 10px 16px;
      border-radius: 8px;
      color: #5e3907;
      font-weight: bold;
      box-shadow: 0 2px 4px rgba(0,0,0,0.15);
      transition: 0.3s;
    }
    nav a:hover {
      background-color: #ffeda2;
    }
    main {
      max-width: 820px;
      margin: 30px auto 60px auto;
      padding: 0 16px 30px 16px;
      text-align: left;
    }
    h1 {
      margin-bottom: 15px;
      font-size: 2.1em;
      text-align: center;
    }
    .gebed-buttons {
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
      justify-content: center;
      margin-bottom: 28px;
    }
    .gebed-buttons a {
      display: block;
      min-width: 190px;
      padding: 14px 0;
      background: #fff1cd;
      color: #5e3907;
      border-radius: 11px;
      font-size: 1.18em;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 2px 7px #e9dcb28c;
      transition: background 0.18s;
      text-align: center;
      border: none;
    }
    .gebed-buttons a:hover { background: #ffeda2; }

    .accordion-section {
      margin-top: 38px;
    }
    .accordion-title {
      font-size: 1.12em;
      font-weight: bold;
      margin-bottom: 15px;
      text-align: left;
      color: #5e3907;
    }
    .accordion {
      border-radius: 10px;
      box-shadow: 0 1.5px 8px #e5c4792e;
      background: #fdf7e1;
      overflow: hidden;
      margin-bottom: 24px;
    }
    .accordion-item {
      border-bottom: 1px solid #f0dfb6;
    }
    .accordion-item:last-child { border-bottom: none; }
    .accordion-header {
      padding: 17px 23px;
      cursor: pointer;
      font-weight: 600;
      background: #fff5dc;
      color: #5e3907;
      text-align: left;
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 1.08em;
      transition: background 0.18s;
    }
    .accordion-header:hover {
      background: #ffeeb9;
    }
    .accordion-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.35s cubic-bezier(0.53,0.1,0.26,0.98);
      background: #fffdf7;
      padding: 0 24px;
    }
    .accordion-content.open {
      padding: 19px 24px 23px 24px;
      max-height: 600px;
      border-top: 1px solid #f0dfb6;
    }
    .arrow {
      transition: 0.3s;
      font-size: 1.38em;
      margin-left: 8px;
    }
    .arrow.open {
      transform: rotate(90deg);
    }
    .pdf-link {
      display: block;
      margin: 42px auto 0 auto;
      width: fit-content;
      padding: 12px 26px;
      background: #deb757;
      color: #fff;
      font-weight: bold;
      border-radius: 8px;
      text-decoration: none;
      font-size: 1.12em;
      box-shadow: 0 2px 4px rgba(0,0,0,0.12);
      transition: background 0.2s;
    }
    .pdf-link:hover { background: #c49d3c; }

    @media (max-width: 750px) {
      main { max-width: 99vw; }
      .gebed-buttons a { min-width: 140px; font-size: 1em; }
    }
    @media (max-width: 540px) {
      nav { padding: 5px; gap: 4px; }
      .gebed-buttons { gap: 6px; }
      main { padding: 3vw; }
      .accordion-header, .accordion-content.open { font-size: 0.97em; padding: 12px 6vw; }
    }
  </style>
</head>
<body>

  <div class="parochie-balk" id="parochieMelding">U bent ingelogd in: ...</div>

  <header>
    <h1>Kies een Gebed</h1>
  </header>

  <nav class="menu">
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/index.html">üè† Startpagina</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/parochie.html">üõê Mijn parochie</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/psalmen/psalmen.html">üìú Psalmen</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/gebeden/gebeden.html">üôè Gebeden</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/catechese/catechese.html">üìñ Catechese</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/layout.html">üß∞ Bewerk parochie</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/uitloggen.html">üö™ Uitloggen</a>
  </nav>

  <main>
    <div class="gebed-buttons">
      <a href="ochtendgebed.html">üåÖ Ochtendgebed</a>
      <a href="avondgebed.html">üåô Avondgebed</a>
      <a href="tafelgebeden.html">üçΩÔ∏è Tafelgebeden</a>
      <a href="geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
    </div>

    <a class="pdf-link" href="https://orthodoxekerkhasselt.com/wp-content/uploads/2024/11/liturgische-teksten-het-klein-orthodox-gebedenboekje-v7.5-nld.pdf" target="_blank">
      üìñ Volledig Gebedenboekje (PDF)
    </a>

    <section class="accordion-section">
      <div class="accordion-title">Meer Gebeden (volledig overzicht)</div>
      <div class="accordion" id="accordionGebeden">
        <!-- Dynamisch gevuld -->
      </div>
    </section>
  </main>

  <!-- FIREBASE -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
  <script>
    // Firebase config priestermodus (zelfde als elders)
    const firebaseConfig = {
      apiKey: "AIzaSyBKEakRzmnPZ3DY8NUkZrZr_YtqBbNVHL4",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:2e02833fa0d4d8903ceedb"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Parochie bovenaan tonen
    function setParochieMelding() {
      const parochie = localStorage.getItem("ingelogdeParochie") || "(onbekend)";
      document.getElementById("parochieMelding").textContent = `U bent ingelogd in: ${parochie}`;
    }
    setParochieMelding();

    // Vaste volgorde + titels:
    const gebedstitels = [
      "Avondgebed",
      "Gebed bij het aansteken van een kaars",
      "Gebed bij het aansteken van een kaarsje",
      "Gebed bij het verlaten van het huis",
      "Gebed bij verdriet",
      "Gebed bij ziekte",
      "Gebed om vergeving",
      "Gebed tot Christus",
      "Gebed tot de Moeder Gods",
      "Gebed tot de heilige Geest",
      "Gebed tot de heilige beschermengel",
      "Gebed tot je beschermengel",
      "Gebed voor broers en zussen",
      "Gebed voor de kinderen",
      "Gebed voor de ouders",
      "Gebed voor de priester",
      "Gebed voor de start van de dagtaak",
      "Gebed voor de vrede",
      "Gebed voor de zielenrust van overledenen",
      "Gebed voor een zieke",
      "Gebed voor je parochie",
      "Gebed voor vrede",
      "Geloofsbelijdenis",
      "Na het avondmaal",
      "Na het middagmaal",
      "Na het ontbijt",
      "Ochtendgebed",
      "Voor het avondmaal",
      "Voor het middagmaal",
      "Voor het ontbijt"
    ];

    // Map titel ‚Üí document ID (mag evt. gelijk zijn aan titel als je het zo aanhoudt)
    // Maar meestal werkt 'doc.id' == titel, behalve waar spaties anders zijn.
    function getIdFromTitel(titel) {
      // Soms zijn er verschillen, bv. hoofdletters of spaties.
      return titel;
    }

    // Laad de gebeden in vaste volgorde
    function renderAccordion() {
      db.collection("gebeden").get().then(snapshot => {
        // Sla alle docs op in een map op titel
        const docsMap = {};
        snapshot.forEach(doc => {
          const data = doc.data();
          // Gebruik 'titel' veld als key, of anders doc.id
          const key = data.titel || doc.id;
          docsMap[key] = data;
        });
        const accordion = document.getElementById("accordionGebeden");
        accordion.innerHTML = "";
        gebedstitels.forEach(titel => {
          const data = docsMap[titel];
          let tekst = "";
          if (data) {
            tekst = data.volledige_tekst || data.uitleg_kinderen || "Geen tekst beschikbaar.";
          } else {
            tekst = "<em>Gebed niet gevonden.</em>";
          }
          // Voeg een accordion-item toe
          accordion.innerHTML += `
            <div class="accordion-item">
              <div class="accordion-header" onclick="toggleAccordion(this)">
                ${titel}
                <span class="arrow">&#9654;</span>
              </div>
              <div class="accordion-content">${tekst.replace(/\n/g,'<br>')}</div>
            </div>
          `;
        });
        // Zorg dat de accordion werkt
        window.toggleAccordion = function(header) {
          const content = header.nextElementSibling;
          const arrow = header.querySelector('.arrow');
          if (content.classList.contains('open')) {
            content.classList.remove('open');
            arrow.classList.remove('open');
            content.style.maxHeight = null;
          } else {
            // Sluit andere open
            document.querySelectorAll('.accordion-content.open').forEach(el => {
              el.classList.remove('open');
              if (el.previousElementSibling) el.previousElementSibling.querySelector('.arrow').classList.remove('open');
              el.style.maxHeight = null;
            });
            content.classList.add('open');
            arrow.classList.add('open');
            content.style.maxHeight = content.scrollHeight + "px";
          }
        }
      }).catch(err => {
        document.getElementById("accordionGebeden").innerHTML = "<div style='padding:16px;'>Fout bij laden van gebeden.</div>";
        console.error(err);
      });
    }
    renderAccordion();
  </script>
</body>
</html>

