<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Psalmen ‚Äì Kathismata Overzicht (Priestermodus)</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #584315;
      font-family: 'Georgia', serif;
      margin: 0;
      padding: 0;
    }
    .statusbar {
      background: #7a5f35;
      color: #fff;
      padding: 10px 24px;
      text-align: left;
      font-size: 1.02em;
      display: flex;
      justify-content: space-between;
      align-items: center;
      letter-spacing: 0.5px;
    }
    .uitlog-link {
      color: #fff;
      background: #9a2617;
      padding: 6px 18px;
      border-radius: 8px;
      font-size: 1em;
      text-decoration: none;
      font-weight: bold;
      margin-left: 20px;
      transition: background 0.18s;
      cursor: pointer;
      border: none;
      outline: none;
      letter-spacing: 0.5px;
    }
    .uitlog-link:hover {
      background: #bd2e23;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px 8px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
      box-shadow: 0 2px 8px #ceb27d25;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 13px 6px 13px;
      border-radius: 8px;
      transition: background-color 0.3s, color 0.2s;
      letter-spacing: 0.2px;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      color: #ffe7b2;
      text-decoration: underline;
    }
    main {
      max-width: 820px;
      margin: 38px auto 65px auto;
      padding: 0 15px;
      background: rgba(255, 255, 245, 0.89);
      border-radius: 17px;
      box-shadow: 0 8px 36px #ccb88320;
    }
    h1 {
      font-size: 2em;
      text-align: center;
      margin-bottom: 34px;
      color: #705113;
      letter-spacing: 1.5px;
      font-family: 'Georgia', serif;
      font-weight: bold;
    }
    .kathisma-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 24px 22px;
      padding: 16px 0 30px 0;
    }
    .kathisma-btn {
      display: block;
      background: linear-gradient(100deg, #fffaf2 90%, #f3e3c4 100%);
      border: 1.7px solid #b39857;
      color: #72581a;
      border-radius: 13px;
      box-shadow: 0 4px 10px #d2b37c16;
      padding: 21px 14px 18px 14px;
      text-align: center;
      font-size: 1.13em;
      font-family: 'Georgia', serif;
      font-weight: 600;
      letter-spacing: 0.2px;
      text-decoration: none;
      transition: box-shadow 0.2s, background 0.2s, border 0.2s;
      position: relative;
      cursor: pointer;
      min-height: 70px;
    }
    .kathisma-btn:hover {
      background: #f3e3c4;
      box-shadow: 0 8px 20px #b7983a29;
      border-color: #ad923c;
      color: #b2861d;
      text-decoration: none;
    }
    .kathisma-label {
      font-size: 1.35em;
      font-weight: bold;
      color: #a58332;
      margin-bottom: 5px;
      display: block;
      letter-spacing: 0.5px;
    }
    .kathisma-sub {
      font-size: 0.98em;
      color: #82714a;
      font-weight: 400;
      margin-top: 5px;
      letter-spacing: 0.1px;
    }
    .terug-btn {
      display: block;
      margin: 45px auto 0 auto;
      background: #7a5f35;
      color: #f5e9b8;
      padding: 12px 38px;
      border-radius: 10px;
      font-size: 1.08em;
      font-family: 'Georgia', serif;
      text-decoration: none;
      font-weight: bold;
      box-shadow: 0 3px 12px #bfa35633;
      border: none;
      cursor: pointer;
      min-width: 150px;
      text-align: center;
      transition: background 0.17s;
    }
    .terug-btn:hover { background: #5d4726; color: #ffefcb; }
    @media (max-width: 600px) {
      main { padding: 0 2vw; }
      .kathisma-grid { gap: 15px 7px; }
      h1 { font-size: 1.13em; margin-bottom: 22px;}
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
  <div class="statusbar">
    <span>
      U bent ingelogd in: <span id="parochieNaam">...</span>
    </span>
    <button class="uitlog-link" id="uitlogKnop">üö™ Uitloggen</button>
  </div>
  <nav class="menu">
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/startpagina.html">üè† Home</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/parochie.html">üõê Mijn parochie</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/psalmen/psalmen.html">üìú Psalmen</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/gebeden/gebeden.html">üôè Gebeden</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/catechese/catechese.html">üìñ Catechese</a>
    <a href="https://kathy-torfs.github.io/Orthodoxeweg/priestermodus/layout.html">üß∞ Bewerk parochie</a>
  </nav>
  <main>
    <h1>üìú Overzicht Kathismata (Psalmen)</h1>
    <div class="kathisma-grid" id="kathismaGrid">
      <!-- Knoppen voor elk kathisma worden hier geplaatst -->
    </div>
    <a href="../startpagina.html" class="terug-btn">‚Üê Terug naar startpagina</a>
  </main>
  <script>
    // Parochie in statusbar
    let parochieNaam = localStorage.getItem("ingelogdeParochie");
    if (parochieNaam) {
      document.getElementById("parochieNaam").textContent = parochieNaam;
    } else {
      document.getElementById("parochieNaam").textContent = "(niet ingelogd)";
    }
    document.getElementById("uitlogKnop").onclick = function() {
      localStorage.removeItem("ingelogdeParochie");
      localStorage.removeItem("ingelogdeParochieId");
      window.location.href = "https://kathy-torfs.github.io/Orthodoxeweg/index.html";
    };

    // Firebase setup
    const firebaseConfig = {
      apiKey: "AIzaSyBKEakRzmnPZ3DY8NUkZrZr_YtqBbNVHL4",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:2e02833fa0d4d8903ceedb"
    };
    if (!firebase.apps.length) { firebase.initializeApp(firebaseConfig); }
    const db = firebase.firestore();

    // Tabel met korte omschrijving (optioneel), anders toon gewoon nummer en titel
    const kathismaOmschrijvingen = [
      "",
      "Psalmen 1 ‚Äì 8",
      "Psalmen 9 ‚Äì 16",
      "Psalmen 17 ‚Äì 23",
      "Psalmen 24 ‚Äì 31",
      "Psalmen 32 ‚Äì 36",
      "Psalmen 37 ‚Äì 45",
      "Psalmen 46 ‚Äì 54",
      "Psalmen 55 ‚Äì 63",
      "Psalmen 64 ‚Äì 69",
      "Psalmen 70 ‚Äì 76",
      "Psalmen 77 ‚Äì 83",
      "Psalmen 84 ‚Äì 89",
      "Psalmen 90 ‚Äì 96",
      "Psalmen 97 ‚Äì 103",
      "Psalmen 104 ‚Äì 105",
      "Psalmen 106 ‚Äì 108",
      "Psalmen 109 ‚Äì 115",
      "Psalmen 116 ‚Äì 119",
      "Psalmen 120 ‚Äì 134",
      "Psalmen 135 ‚Äì 150"
    ];

    // Maak een knop per kathisma (uit Firestore)
    async function laadKathismata() {
      const grid = document.getElementById("kathismaGrid");
      grid.innerHTML = "";
      let kathismata = [];
      try {
        const snapshot = await db.collection("kathismata_xxl").get();
        snapshot.forEach(doc => {
          const nr = parseInt(doc.id.replace(/[^\d]/g, ''));
          if (!isNaN(nr)) {
            let data = doc.data();
            kathismata.push({
              nr,
              titel: data.kathisma || ("Kathisma " + nr),
            });
          }
        });
      } catch(e) {
        grid.innerHTML = "<div style='color:#b42c25;font-weight:bold;padding:20px;'>Fout bij ophalen kathismata uit Firestore.</div>";
        return;
      }
      // Sorteer op nummer
      kathismata.sort((a,b) => a.nr - b.nr);

      // Toon knoppen
      kathismata.forEach(k => {
        let knop = document.createElement("a");
        knop.className = "kathisma-btn";
        knop.href = `kathisma.html?nr=${k.nr}`;
        knop.innerHTML = `
          <span class="kathisma-label">${k.titel}</span>
          <span class="kathisma-sub">${kathismaOmschrijvingen[k.nr] || ""}</span>
        `;
        grid.appendChild(knop);
      });
    }
    laadKathismata();
  </script>
</body>
</html>
