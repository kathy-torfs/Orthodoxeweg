<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Orthodoxeweg â€“ Dagkalender</title>
  <!-- Google Fonts: EB Garamond voor klassiek, Open Sans voor tekst -->
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:wght@600;800&family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">
  <style>
    body {
      background: #f8f6ec url('https://www.transparenttextures.com/patterns/arabesque.png');
      color: #3a2c17;
      font-family: 'Open Sans', Arial, sans-serif;
      margin: 0;
      padding: 0;
      min-height: 100vh;
    }
    nav.menu {
      background: #806537 url('https://www.transparenttextures.com/patterns/batthern.png');
      padding: 12px 0 12px 0;
      display: flex;
      flex-wrap: wrap;
      gap: 14px;
      justify-content: center;
      border-bottom: 3px solid #ccb38c;
    }
    nav.menu a {
      color: #f7eac3;
      text-decoration: none;
      font-weight: 700;
      font-size: 1.07em;
      padding: 7px 14px;
      border-radius: 9px;
      transition: background .3s;
      letter-spacing: 0.03em;
    }
    nav.menu a:hover {
      background: #5d4726;
    }
    .taalbox {
      margin: 32px auto 12px auto;
      text-align: right;
      max-width: 600px;
    }
    .taalknop {
      font-family: 'EB Garamond', serif;
      font-size: 1.02em;
      background: #e8dcc2;
      border: none;
      border-radius: 18px;
      padding: 6px 16px;
      margin-left: 6px;
      margin-right: 1px;
      cursor: pointer;
      color: #6f4e1a;
      font-weight: 700;
      letter-spacing: 0.02em;
      transition: background .2s, box-shadow .2s;
      box-shadow: 0 2px 10px #ccb38c32;
    }
    .taalknop.active, .taalknop:focus {
      background: #7a5f35;
      color: #fffbe2;
      outline: none;
    }
    .kalender-hoes {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 24px;
    }
    .dagkaart {
      width: 100%;
      max-width: 510px;
      background: #fffbe9dd;
      border-radius: 28px;
      box-shadow: 0 6px 32px #c2a98238, 0 1px 2px #ccb38c24;
      border: 2.5px solid #e3d2a1;
      position: relative;
      padding: 0 0 22px 0;
      margin-bottom: 42px;
      animation: fadein .8s cubic-bezier(.19,1,.22,1);
    }
    .dagkaart:before {
      content: "";
      position: absolute;
      left: 18%;
      top: -16px;
      width: 64%;
      height: 25px;
      background: url('https://upload.wikimedia.org/wikipedia/commons/thumb/6/62/Greek_ornament_01.svg/500px-Greek_ornament_01.svg.png') center/contain no-repeat;
      opacity: .15;
      z-index: 0;
    }
    .dag-header {
      text-align: center;
      margin: 0;
      font-family: 'EB Garamond', serif;
      font-weight: 800;
      font-size: 2.4em;
      color: #5d4726;
      letter-spacing: 1.5px;
      padding: 30px 20px 5px 20px;
      background: none;
      border: none;
    }
    .vastenlabel {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 9px;
      font-weight: 700;
      margin: 0 auto 14px auto;
      max-width: 90%;
      font-size: 1.16em;
      letter-spacing: 0.02em;
      border-radius: 18px;
      padding: 6px 18px 6px 12px;
      background: #e4e0d6;
      box-shadow: 0 1px 6px #dcc89739;
      border: 1.5px solid #e7c873;
    }
    .vastenlabel.dag-vastenvrij { background: #ede0b3; color: #6e5124; border-color: #f1e3be;}
    .vastenlabel.dag-vis       { background: #cbe3ff; color: #2175b7; border-color: #79b0e2;}
    .vastenlabel.dag-oliewijn  { background: #e6cdf7; color: #843c96; border-color: #cdb1dd;}
    .vastenlabel.dag-strikt    { background: #ffe0e0; color: #b13d2b; border-color: #f5b6b6;}
    .heiligen {
      text-align: center;
      margin: 8px 0 18px 0;
      font-size: 1.17em;
      color: #4a381f;
      font-family: 'EB Garamond', serif;
    }
    .heiligen .kruis {
      font-size: 1.18em;
      color: #b09c68;
      vertical-align: middle;
      margin-right: 7px;
    }
    .lezingen {
      margin: 0 auto 15px auto;
      background: #f5e9b8;
      border-radius: 18px;
      padding: 12px 18px 11px 18px;
      box-shadow: 0 1px 8px #ccb38c15;
      font-size: 1.05em;
      max-width: 92%;
      border: 1.5px solid #e6d8b3;
    }
    .lezingen span.bijbel {
      margin-right: 6px;
      color: #8d733b;
      font-size: 1.05em;
    }
    .footer-tip {
      font-style: italic;
      color: #9d7c54;
      font-size: 1.07em;
      margin: 25px 0 0 0;
      padding: 0 22px 0 22px;
      border-top: 1.5px dashed #dbc49454;
      padding-top: 12px;
      text-align: center;
      min-height: 34px;
      letter-spacing: 0.02em;
    }
    @keyframes fadein {
      from { opacity: 0; transform: translateY(30px);}
      to { opacity: 1; transform: none;}
    }
    @media (max-width: 700px) {
      .kalender-hoes { margin-top: 5vw;}
      .dagkaart { max-width: 98vw; border-radius: 13vw;}
      .dag-header { font-size: 1.7em; padding: 19px 7vw 7px 7vw;}
      .lezingen { font-size: 0.99em;}
    }
  </style>
  <!-- Firebase -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    // CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">ğŸ  Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">ğŸ“– Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">ğŸ“œ Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">ğŸ™ Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">âœ Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">ğŸŒŸ Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">ğŸ½ï¸ Recepten</a>
</nav>
<div class="taalbox">
  <span style="font-weight:600;color:#7a5f35;margin-right:5px;">Taal:</span>
  <button class="taalknop active" data-taal="nl" id="taal-nl">ğŸ‡§ğŸ‡ª Vlaams</button>
  <button class="taalknop" data-taal="en" id="taal-en">ğŸ‡¬ğŸ‡§ Engels</button>
  <button class="taalknop" data-taal="el" id="taal-el">ğŸ‡¬ğŸ‡· Grieks</button>
</div>
<div class="kalender-hoes">
  <div class="dagkaart" id="dagkaart">
    <div style="padding:36px;text-align:center;color:#b0a276;font-size:1.2em;">
      Even laden...
    </div>
  </div>
</div>
<script>
  // Hulp: Datum -> '20250613'
  function getTodayId() {
    const d = new Date();
    let m = "" + (d.getMonth() + 1);
    let day = "" + d.getDate();
    if (m.length === 1) m = "0" + m;
    if (day.length === 1) day = "0" + day;
    return "" + d.getFullYear() + m + day;
  }
  // Hulp: datum -> mooie string
  function formatDate(d, lang) {
    const maanden = {
      "nl": ['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'],
      "en": ['January','February','March','April','May','June','July','August','September','October','November','December'],
      "el": ['Î™Î±Î½Î¿Ï…Î±ÏÎ¯Î¿Ï…','Î¦ÎµÎ²ÏÎ¿Ï…Î±ÏÎ¯Î¿Ï…','ÎœÎ±ÏÏ„Î¯Î¿Ï…','Î‘Ï€ÏÎ¹Î»Î¯Î¿Ï…','ÎœÎ±ÎÎ¿Ï…','Î™Î¿Ï…Î½Î¯Î¿Ï…','Î™Î¿Ï…Î»Î¯Î¿Ï…','Î‘Ï…Î³Î¿ÏÏƒÏ„Î¿Ï…','Î£ÎµÏ€Ï„ÎµÎ¼Î²ÏÎ¯Î¿Ï…','ÎŸÎºÏ„Ï‰Î²ÏÎ¯Î¿Ï…','ÎÎ¿ÎµÎ¼Î²ÏÎ¯Î¿Ï…','Î”ÎµÎºÎµÎ¼Î²ÏÎ¯Î¿Ï…']
    };
    if (!d) return "";
    let arr = d.split("-");
    if (arr.length < 3) return d;
    if (lang === 'en')
      return `${maanden.en[parseInt(arr[1],10)-1]} ${parseInt(arr[2],10)}, ${arr[0]}`;
    if (lang === 'el')
      return `${arr[2]} ${maanden.el[parseInt(arr[1],10)-1]} ${arr[0]}`;
    // standaard nl
    return `${parseInt(arr[2],10)} ${maanden.nl[parseInt(arr[1],10)-1]} ${arr[0]}`;
  }
  // Vasten symbool bepalen
  function vastenIcon(regel) {
    if (!regel) return "";
    if (regel.toLowerCase().includes("strenge")) return "âœï¸";
    if (regel.toLowerCase().includes("vis"))    return "ğŸŸ";
    if (regel.toLowerCase().includes("olie") || regel.toLowerCase().includes("wijn")) return "ğŸ‡";
    if (regel.toLowerCase().includes("vrij"))   return "ğŸŒ";
    return "";
  }
  // Kleur class bepalen
  function vastenClass(regel) {
    if (!regel) return "";
    if (regel.toLowerCase().includes("strenge")) return "dag-strikt";
    if (regel.toLowerCase().includes("vis"))     return "dag-vis";
    if (regel.toLowerCase().includes("olie") || regel.toLowerCase().includes("wijn")) return "dag-oliewijn";
    if (regel.toLowerCase().includes("vrij"))    return "dag-vastenvrij";
    return "";
  }
  // Render-functie
  function renderDag(data, taal) {
    if (!data) return `<div style="padding:36px;text-align:center;color:#b0a276;font-size:1.15em;">Geen data voor vandaag.</div>`;
    // Juiste velden per taal:
    const tmap = {
      nl: {
        heiligen: data['Heiligen NL'],
        vasten: data['Vastenregel NL'],
        epistel: data['Epistel Ref NL (netjes NL)'],
        evangelie: data['Evangelie Ref NL (netjes NL)'],
        tip: data['Tip/Wens NL'],
        datum: data['Datum']
      },
      en: {
        heiligen: data['Heiligen EN'],
        vasten: data['Vastenregel EN'],
        epistel: data['Epistel Ref EN'],
        evangelie: data['Evangelie Ref EN'],
        tip: data['Tip/Wens EN'],
        datum: data['Datum']
      },
      el: {
        heiligen: data['Heiligen EL'],
        vasten: data['Vastenregel EL'],
        epistel: data['Epistel Ref EL'],
        evangelie: data['Evangelie Ref EL'],
        tip: data['Tip/Wens EL'],
        datum: data['Datum']
      }
    };
    const t = tmap[taal];
    let vastenLabel = "";
    if (t.vasten) {
      vastenLabel = `<div class="vastenlabel ${vastenClass(t.vasten)}">${vastenIcon(t.vasten)} ${t.vasten}</div>`;
    }
    // Heiligen met kruisje, of duif als geen heilige
    let heiligenShow = t.heiligen && t.heiligen.trim() !== "" ? 
        `<div class="heiligen"><span class="kruis">âœï¸</span>${t.heiligen}</div>`
        : `<div class="heiligen" style="font-size:1.3em;color:#b1b1b1;"><span title="Geen heilige van de dag">ğŸ•Šï¸</span> Geen heilige van de dag</div>`;
    // Lezingen
    let lezingenShow = "";
    if (t.epistel || t.evangelie) {
      lezingenShow = `<div class="lezingen">${
        t.epistel ? `<span class="bijbel">ğŸ“–</span><b>Epistel:</b> <span>${t.epistel}</span><br>` : ""
      }${
        t.evangelie ? `<span class="bijbel">ğŸ“œ</span><b>Evangelie:</b> <span>${t.evangelie}</span>` : ""
      }</div>`;
    }
    // Tip/wens onderaan, zonder label
    let tipShow = t.tip ? `<div class="footer-tip">${t.tip}</div>` : "";

    // Klassieke header
    return `
      <div class="dag-header">${formatDate(t.datum, taal)}</div>
      ${vastenLabel}
      ${heiligenShow}
      ${lezingenShow}
      ${tipShow}
    `;
  }
  // Taalkeuze
  let huidigTaal = "nl";
  function laadDag() {
    const id = getTodayId();
    db.collection("kalender2025").doc(id).get().then(doc => {
      document.getElementById('dagkaart').innerHTML = renderDag(doc.data(), huidigTaal);
    });
  }
  laadDag();
  // Taal-knoppen
  document.querySelectorAll('.taalknop').forEach(btn => {
    btn.addEventListener('click', function() {
      document.querySelectorAll('.taalknop').forEach(b=>b.classList.remove('active'));
      this.classList.add('active');
      huidigTaal = this.dataset.taal;
      laadDag();
    });
  });
</script>
</body>
</html>
