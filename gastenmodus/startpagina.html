<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Orthodoxeweg - Dagkalender</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #6f4e1a;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      text-decoration: underline;
    }
    .scheurkalender-wrapper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 70vh;
      margin-top: 40px;
    }
    .scheurkalender {
      position: relative;
      width: 320px;
      min-height: 390px;
      z-index: 0;
      margin-bottom: 40px;
    }
    .scheurkalender-svg {
      position: absolute;
      left: 0; top: 0;
      width: 100%; height: 100%;
      z-index: 1;
      pointer-events: none;
    }
    .scheur-inhoud {
      position: absolute;
      z-index: 2;
      left: 0; top: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 54px 24px 24px 24px;
      box-sizing: border-box;
      background: none;
      color: #443018;
    }
    .scheur-datum {
      font-family: 'Georgia', serif;
      font-size: 2.3em;
      margin: 0 0 14px 0;
      letter-spacing: 2px;
      text-align: center;
      color: #3b2610;
      font-weight: bold;
      text-shadow: 1px 1px 0 #eee3c6, 0 1px 0 #c4b090;
    }
    .scheur-vasten {
      font-size: 1.13em;
      margin: 0 0 12px 0;
      font-weight: 600;
      color: #7a349b;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4em;
      letter-spacing: 1px;
    }
    .scheur-vasten.dag-vis   { color: #2969b0; }
    .scheur-vasten.dag-oliewijn { color: #7a349b; }
    .scheur-vasten.dag-strikt   { color: #bb2222; }
    .scheur-vasten.dag-vastenvrij { color: #4e3c18; }
    .scheur-heiligen {
      font-size: 1.05em;
      margin-bottom: 12px;
      text-align: center;
      color: #5a3c1a;
      font-weight: 600;
    }
    .scheur-lezing {
      font-size: 1em;
      color: #2e2311;
      text-align: left;
      margin: 3px 0;
      font-weight: 500;
    }
    .scheur-tip {
      font-size: 1.1em;
      color: #a88354;
      margin-top: auto;
      font-style: italic;
      padding-top: 16px;
      text-align: center;
      border-top: 1px solid #e1d1b1;
      width: 100%;
      letter-spacing: 0.2px;
    }
    @media (max-width: 600px) {
      .scheurkalender { width: 97vw; }
    }
  </style>
  <!-- FIREBASE SCRIPTS EN CONFIG -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">üè† Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">üìñ Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">üìú Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">üôè Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">üåü Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">üçΩÔ∏è Recepten</a>
</nav>

<div class="scheurkalender-wrapper">
  <div class="scheurkalender">
    <!-- SVG Scheurkalender achtergrond -->
    <svg class="scheurkalender-svg" viewBox="0 0 320 390">
      <!-- Papier -->
      <rect x="14" y="26" width="292" height="340" rx="18" fill="#f7f6f4" stroke="#b2a278" stroke-width="4"/>
      <!-- Rand -->
      <rect x="0" y="0" width="320" height="50" rx="5" fill="#39a4a9" stroke="#126672" stroke-width="2"/>
      <!-- Gaatjes -->
      <circle cx="55" cy="25" r="7" fill="#e3e8ed" stroke="#bbb" stroke-width="2"/>
      <circle cx="160" cy="25" r="7" fill="#e3e8ed" stroke="#bbb" stroke-width="2"/>
      <circle cx="265" cy="25" r="7" fill="#e3e8ed" stroke="#bbb" stroke-width="2"/>
      <!-- Schaduw -->
      <ellipse cx="160" cy="380" rx="90" ry="10" fill="#e4dab3" fill-opacity="0.5"/>
    </svg>
    <!-- Kalender inhoud -->
    <div class="scheur-inhoud" id="kalender-inhoud">
      <div style="color:#bbb;text-align:center;font-size:1.2em;margin-top:70px;">Bezig met laden...</div>
    </div>
  </div>
</div>
<script>
  // Functie om datum om te zetten naar YYYYMMDD (zoals in jouw Firestore!)
  function datumFirestoreId() {
    const d = new Date();
    let dag = (d.getDate() < 10 ? '0' : '') + d.getDate();
    let maand = ((d.getMonth() + 1) < 10 ? '0' : '') + (d.getMonth() + 1);
    let jaar = d.getFullYear();
    return '' + jaar + maand + dag;
  }
  // Functie voor een nette, klassieke datumstring (in het Vlaams)
  function formatteerDatumNL(d) {
    const maanden = ['januari', 'februari', 'maart', 'april', 'mei', 'juni',
      'juli', 'augustus', 'september', 'oktober', 'november', 'december'];
    let parts = d.split('-'); // "2025-06-13"
    return parseInt(parts[2], 10) + ' ' + maanden[parseInt(parts[1], 10) - 1] + ' ' + parts[0];
  }
  // Vastenkleur bepalen
  function bepaalVastenClass(regel) {
    let tekst = (regel||'').toLowerCase();
    if (tekst.includes("vis")) return "dag-vis";
    if (tekst.includes("olie") || tekst.includes("wijn")) return "dag-oliewijn";
    if (tekst.includes("strenge")) return "dag-strikt";
    if (tekst.includes("vrij")) return "dag-vastenvrij";
    return "";
  }
  // Inhoud dynamisch vullen
  (function(){
    const el = document.getElementById('kalender-inhoud');
    let docId = datumFirestoreId();
    db.collection("kalender2025").doc(docId).get().then(doc => {
      if (!doc.exists) {
        el.innerHTML = `<div style="margin-top:70px;text-align:center;">Geen kalenderdata voor vandaag (${docId})</div>`;
        return;
      }
      const data = doc.data();
      const datumNL = data.Datum ? formatteerDatumNL(data.Datum) : '';
      const vastenClass = bepaalVastenClass(data["Vastenregel NL"]);
      // symbool mag nooit dubbel komen
      const symbool = data["Symbool"]||"";
      // vastenregel altijd tonen (ook vastenvrij)
      const vastenTekst = (data["Vastenregel NL"]||"Vastenvrij") + (symbool ? ' ' + symbool : "");
      el.innerHTML = `
        <div class="scheur-datum">${datumNL}</div>
        <div class="scheur-vasten ${vastenClass}">${vastenTekst}</div>
        <div class="scheur-heiligen">${data["Heiligen NL"]||""}</div>
        <div class="scheur-lezing"><b>Epistel:</b> ${data["Epistel Ref NL (netjes NL)"]||""}</div>
        <div class="scheur-lezing"><b>Evangelie:</b> ${data["Evangelie Ref NL (netjes NL)"]||""}</div>
        <div class="scheur-tip">${data["Tip/Wens NL"]||""}</div>
      `;
    }).catch(() => {
      el.innerHTML = `<div style="margin-top:70px;text-align:center;">Fout bij het laden van de kalenderdata.</div>`;
    });
  })();
</script>
</body>
</html>
