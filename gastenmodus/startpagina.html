<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Orthodoxeweg - Dagkalender</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #6f4e1a;
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      text-decoration: underline;
    }
    .taal-knoppen {
      display: flex;
      justify-content: center;
      gap: 18px;
      margin: 22px 0 10px 0;
      flex-wrap: wrap;
    }
    .taal-knoppen button {
      background: #fff6e1;
      color: #7a5f35;
      border: 2px solid #c2a06a;
      border-radius: 7px;
      font-size: 1.11em;
      padding: 8px 16px;
      cursor: pointer;
      font-weight: 700;
      box-shadow: 0 2px 5px #e2d5b7b0;
      transition: background 0.18s, color 0.18s;
      margin-bottom: 5px;
    }
    .taal-knoppen button.actief,
    .taal-knoppen button:hover {
      background: #7a5f35;
      color: #fff6e1;
      border-color: #a2834b;
    }
    .kalender-main {
      max-width: 1200px;
      margin: 24px auto 60px auto;
      padding: 0 10px;
    }
    .kalender-container {
      position: relative;
      width: 860px;
      height: 1200px;
      margin: 0 auto 22px auto;
      filter: drop-shadow(0 11px 28px #ccb38c90);
      max-width: 98vw;
      max-height: 97vh;
      box-sizing: border-box;
      aspect-ratio: 860/1200;
      background: transparent;
    }
    .kalender-container svg {
      width: 100%;
      height: 100%;
      display: block;
      max-width: 100%;
      max-height: 100%;
      pointer-events: none;
    }
    .kalender-inhoud {
      position: absolute;
      top: 9.3%;
      left: 8%;
      width: 84%;
      height: 83%;
      padding: 48px 56px 60px 56px;
      font-size: 1.28em;
      color: #3a2c17;
      overflow-y: auto;
      background: transparent;
      z-index: 2;
      text-align: left;
      box-sizing: border-box;
      word-break: break-word;
      border-radius: 32px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      min-height: 780px;
      min-width: 470px;
      font-family: 'Georgia', 'Times New Roman', serif;
    }
    .kalender-inhoud h2 {
      font-family: 'Lora', 'Georgia', serif;
      margin-top: 0; margin-bottom: 20px;
      font-size: 2.7em;
      font-weight: 700;
      color: #593b0f;
      text-align: left;
      letter-spacing: 1px;
    }
    .kalender-inhoud .vastregelblok {
      display: flex;
      align-items: center;
      gap: 17px;
      margin-bottom: 13px;
      margin-top: 8px;
      font-size: 1.18em;
      font-weight: 600;
    }
    .kalender-inhoud .heiligen {
      margin-bottom: 22px;
      font-size: 1.17em;
      color: #7a5f35;
      font-weight: 600;
      line-height: 1.47;
      letter-spacing: 0.2px;
    }
    .kalender-inhoud .lezingen-blok {
      margin-bottom: 38px;
    }
    .lezing-label {
      font-weight: bold;
      margin-right: 9px;
      color: #775c2b;
      font-size: 1.11em;
      vertical-align: middle;
      display: inline-block;
    }
    .kalender-inhoud .lezing {
      margin-bottom: 11px;
      font-size: 1.10em;
    }
    .kalender-inhoud .dag-tip {
      margin-top: auto;
      padding: 20px 0 4px 0;
      color: #b4895e;
      font-size: 1.22em;
      text-align: left;
      font-style: italic;
      border-top: 1.7px dashed #dfcba6;
      margin-bottom: 0;
      font-family: 'Georgia', 'Times New Roman', serif;
      line-height: 1.4;
      background: transparent;
      width: 100%;
    }
    @media (max-width: 1050px) {
      .kalender-container { width: 99vw; height: auto; aspect-ratio: 860/1200;}
      .kalender-inhoud { font-size: 1.08em; padding: 2vw 2vw 5vw 2vw; min-width: 0; }
    }
    @media (max-width: 750px) {
      .kalender-main { margin: 12px auto 12vw auto;}
      .kalender-container { width: 100vw; min-width: 0; aspect-ratio: 860/1200;}
      .kalender-inhoud { width: 96%; left: 2%; top: 11%; height: 77%; font-size: 0.98em; min-width: 0;}
      .taal-knoppen { gap: 8px; }
    }
    @media (max-width: 530px) {
      .kalender-main { margin: 8px auto 7vw auto;}
      .kalender-inhoud { font-size: 0.91em; width: 98%; left: 1%; top: 13%; min-width: 0;}
    }
  </style>
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@600;700&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">üè† Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">üìñ Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">üìú Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">üôè Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">üåü Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">üçΩÔ∏è Recepten</a>
</nav>

<div class="taal-knoppen">
  <button id="knop-vlaams" class="actief" onclick="setTaal('vlaams')">üáßüá™ Vlaams</button>
  <button id="knop-engels" onclick="setTaal('engels')">üá¨üáß English</button>
  <button id="knop-grieks" onclick="setTaal('grieks')">üá¨üá∑ ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</button>
</div>

<div class="kalender-main">
  <div class="kalender-container">
    <svg viewBox="0 0 860 1200" preserveAspectRatio="xMinYMin meet" style="position:absolute;left:0;top:0;z-index:0; width:100%; height:100%;">
      <defs>
        <radialGradient id="ringSilver" cx="50%" cy="40%" r="80%">
          <stop offset="0%" stop-color="#ffffff" />
          <stop offset="15%" stop-color="#e2e8ec" />
          <stop offset="50%" stop-color="#c3cace" />
          <stop offset="80%" stop-color="#959ba0" />
          <stop offset="100%" stop-color="#787c80" />
        </radialGradient>
        <radialGradient id="ringHighlight" cx="30%" cy="30%" r="60%">
          <stop offset="0%" stop-color="#ffffffcc" />
          <stop offset="100%" stop-color="#ffffff00" />
        </radialGradient>
      </defs>
      <rect x="66" y="100" width="710" height="990" rx="50" fill="#eee3c6" stroke="#e3d2a1" stroke-width="6"/>
      <rect x="36" y="54" width="780" height="1080" rx="55" fill="#f3e6cc" stroke="#dcc897" stroke-width="5"/>
      <rect x="18" y="16" width="824" height="1160" rx="60" fill="#faf8f1" stroke="#c2a06a" stroke-width="9"/>
      <ellipse cx="99" cy="58" rx="23" ry="13" fill="url(#ringSilver)" stroke="#adb5bd" stroke-width="4"/>
      <ellipse cx="429" cy="45" rx="23" ry="13" fill="url(#ringSilver)" stroke="#adb5bd" stroke-width="4"/>
      <ellipse cx="761" cy="58" rx="23" ry="13" fill="url(#ringSilver)" stroke="#adb5bd" stroke-width="4"/>
      <ellipse cx="99" cy="52" rx="10" ry="6" fill="url(#ringHighlight)" />
      <ellipse cx="429" cy="41" rx="10" ry="6" fill="url(#ringHighlight)" />
      <ellipse cx="761" cy="52" rx="10" ry="6" fill="url(#ringHighlight)" />
      <circle cx="99" cy="78" r="8" fill="#b8a17c"/>
      <circle cx="429" cy="66" r="8" fill="#b8a17c"/>
      <circle cx="761" cy="78" r="8" fill="#b8a17c"/>
    </svg>
    <div class="kalender-inhoud" id="kalender-inhoud">
      <p style="text-align:center;color:#a6a5a4;">Bezig met laden...</p>
    </div>
  </div>
</div>

<script>
let huidigeTaal = 'vlaams';
const TaalLabels = {
  vlaams: {
    apostel: "Apostellezing",
    evangelie: "Evangelie",
    vastenvrij: "Vastenvrij",
    heiligen: "Heilige(n)",
    dag: (d) => d.toLocaleDateString('nl-BE', { day: 'numeric', month: 'long', year: 'numeric' }),
  },
  engels: {
    apostel: "Epistle",
    evangelie: "Gospel",
    vastenvrij: "Fast free",
    heiligen: "Saint(s)",
    dag: (d) => d.toLocaleDateString('en-GB', { day: 'numeric', month: 'long', year: 'numeric' }),
  },
  grieks: {
    apostel: "ŒëœÄœåœÉœÑŒøŒªŒøœÇ",
    evangelie: "ŒïœÖŒ±Œ≥Œ≥Œ≠ŒªŒπŒø",
    vastenvrij: "ŒöŒ±œÑŒ¨ŒªœÖœÉŒπœÇ ŒµŒπœÇ œÄŒ¨ŒΩœÑŒ±",
    heiligen: "ŒÜŒ≥ŒπŒøœÇ/ŒÜŒ≥ŒπŒøŒπ",
    dag: (d) => d.toLocaleDateString('el-GR', { day: 'numeric', month: 'long', year: 'numeric' }),
  }
};

function setTaal(nieuweTaal) {
  huidigeTaal = nieuweTaal;
  document.querySelectorAll('.taal-knoppen button').forEach(btn => btn.classList.remove('actief'));
  if (nieuweTaal === 'vlaams') document.getElementById('knop-vlaams').classList.add('actief');
  if (nieuweTaal === 'engels') document.getElementById('knop-engels').classList.add('actief');
  if (nieuweTaal === 'grieks') document.getElementById('knop-grieks').classList.add('actief');
  laadDagkalender();
}

function pad(n) { return n < 10 ? '0' + n : n }
function vandaagISO() {
  const d = new Date();
  return d.getFullYear() + '-' + pad(d.getMonth() + 1) + '-' + pad(d.getDate());
}
function vandaagDatumObj() {
  return new Date();
}

function bepaalVastenClass(regel) {
  if (!regel) return "dag-vastenvrij";
  const r = regel.toLowerCase();
  if (r.includes("vis")) return "dag-vis";
  if (r.includes("olie") || r.includes("wijn")) return "dag-oliewijn";
  if (r.includes("strenge") || r.includes("strict")) return "dag-strikt";
  if (r.includes("vrij")) return "dag-vastenvrij";
  return "dag-vastenvrij";
}

function laadDagkalender() {
  const datum = vandaagISO();
  const datumObj = vandaagDatumObj();
  const el = document.getElementById('kalender-inhoud');
  db.collection("kalender2025").doc(datum).get().then(doc => {
    if (!doc.exists) {
      el.innerHTML = `<p style="text-align:center;">Geen kalenderdata voor vandaag (${TaalLabels[huidigeTaal].dag(datumObj)})</p>`;
      return;
    }
    const data = doc.data();

    // Labels per taal
    let vasteNL = data["Vastenregel NL"];
    let vasteEN = data["Vastenregel EN"];
    let vasteEL = data["Vastenregel EL"];
    let symb = data["Symbool"] || "";
    let vastenText = "";
    let vastenClass = "";

    if (huidigeTaal === "vlaams") {
      vastenText = vasteNL ? vasteNL : TaalLabels.vlaams.vastenvrij;
      vastenClass = bepaalVastenClass(vasteNL);
    } else if (huidigeTaal === "engels") {
      vastenText = vasteEN ? vasteEN : TaalLabels.engels.vastenvrij;
      vastenClass = bepaalVastenClass(vasteEN);
    } else if (huidigeTaal === "grieks") {
      vastenText = vasteEL ? vasteEL : TaalLabels.grieks.vastenvrij;
      vastenClass = bepaalVastenClass(vasteEL);
    }

    // Heiligen tekst
    let heiligen =
      huidigeTaal === "vlaams" ? (data["Heiligen NL"] || "")
      : huidigeTaal === "engels" ? (data["Heiligen EN"] || "")
      : (data["Heiligen EL"] || "");

    // Apostel & Evangelie
    let apostel =
      huidigeTaal === "vlaams" ? (data["Epistel Ref NL (netjes NL)"] || "")
      : huidigeTaal === "engels" ? (data["Epistel Ref EN"] || "")
      : (data["Epistel Ref EL"] || "");
    let evangelie =
      huidigeTaal === "vlaams" ? (data["Evangelie Ref NL (netjes NL)"] || "")
      : huidigeTaal === "engels" ? (data["Evangelie Ref EN"]
      : huidigeTaal === "grieks" ? (data["Evangelie Ref EL"] || "")
      : "";

    // Tip/wens
    let tip =
      huidigeTaal === "vlaams" ? (data["Tip/Wens NL"] || "")
      : huidigeTaal === "engels" ? (data["Tip/Wens EN"] || "")
      : (data["Tip/Wens EL"] || "");

    // Datum als mooie string
    let dagString = TaalLabels[huidigeTaal].dag(datumObj);

    // Opmaak HTML
    el.innerHTML = `
      <h2 class="${vastenClass}">${dagString}</h2>
      <div class="vastregelblok">
        <span>${vastenText}</span>
        <span style="font-size:1.5em;margin-left:6px;">${symb}</span>
      </div>
      <div class="heiligen">${heiligen ? `<span>${heiligen}</span>` : "<span style='font-size:1.35em;'>üïäÔ∏è</span>"}</div>
      <div class="lezingen-blok">
        ${apostel ? `<div class="lezing"><span class="lezing-label">${TaalLabels[huidigeTaal].apostel}:</span> ${apostel}</div>` : ""}
        ${evangelie ? `<div class="lezing"><span class="lezing-label">${TaalLabels[huidigeTaal].evangelie}:</span> ${evangelie}</div>` : ""}
      </div>
      <div class="dag-tip">${tip}</div>
    `;
  });
}

// Automatisch opstarten bij laden
window.onload = laadDagkalender;
</script>
</body>
</html>
