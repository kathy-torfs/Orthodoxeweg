<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Orthodoxeweg - Dagkalender</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #6f4e1a;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      text-decoration: underline;
    }
    .scheurkalender-wrapper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 70vh;
      margin-top: 40px;
    }
    .scheurkalender {
      position: relative;
      width: 430px;
      height: 520px;
      z-index: 0;
      margin-bottom: 40px;
      max-width: 99vw;
      max-height: 97vh;
    }
    .scheurkalender-svg {
      position: absolute;
      left: 0; top: 0;
      width: 100%; height: 100%;
      z-index: 1;
      pointer-events: none;
    }
    .scheur-inhoud {
      position: absolute;
      z-index: 2;
      left: 0; top: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 76px 30px 32px 30px;
      box-sizing: border-box;
      background: none;
      color: #443018;
    }
    .taalknoppen {
      display: flex;
      gap: 10px;
      margin-bottom: 12px;
      justify-content: center;
      align-items: center;
      width: 100%;
    }
    .taalknoppen button {
      background: #e4dab3;
      color: #6f4e1a;
      border: none;
      border-radius: 7px;
      padding: 8px 14px;
      font-weight: 700;
      font-size: 1em;
      cursor: pointer;
      margin-top: 5px;
      margin-bottom: 4px;
      outline: none;
      transition: background 0.2s, color 0.2s;
    }
    .taalknoppen button.selected {
      background: #7a5f35;
      color: #f5e9b8;
      font-weight: 900;
    }
    .scheur-datum {
      font-family: 'Georgia', serif;
      font-size: 2.8em;
      margin: 0 0 12px 0;
      letter-spacing: 2px;
      text-align: center;
      color: #3b2610;
      font-weight: bold;
      text-shadow: 1px 1px 0 #eee3c6, 0 1px 0 #c4b090;
    }
    .scheur-vasten {
      font-size: 1.18em;
      margin: 0 0 13px 0;
      font-weight: 600;
      color: #7a349b;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.4em;
      letter-spacing: 1px;
    }
    .scheur-vasten.dag-vis   { color: #2969b0; }
    .scheur-vasten.dag-oliewijn { color: #7a349b; }
    .scheur-vasten.dag-strikt   { color: #bb2222; }
    .scheur-vasten.dag-vastenvrij { color: #4e3c18; }
    .scheur-heiligen {
      font-size: 1.13em;
      margin-bottom: 12px;
      text-align: center;
      color: #5a3c1a;
      font-weight: 600;
      max-height: 6em;
      overflow-y: auto;
      width: 99%;
    }
    .scheur-lezing {
      font-size: 1.06em;
      color: #2e2311;
      text-align: left;
      margin: 3px 0;
      font-weight: 500;
      width: 100%;
      word-break: break-word;
    }
    .scheur-tip {
      font-size: 1.16em;
      color: #a88354;
      margin-top: auto;
      font-style: italic;
      padding-top: 18px;
      text-align: center;
      border-top: 1px solid #e1d1b1;
      width: 100%;
      letter-spacing: 0.2px;
    }
    @media (max-width: 600px) {
      .scheurkalender { width: 98vw; height: auto; min-height: 440px;}
      .scheur-inhoud { padding: 55px 4vw 10vw 4vw; }
      .scheur-datum { font-size: 2.1em; }
      .scheur-heiligen, .scheur-tip, .scheur-lezing { font-size: 0.99em;}
    }
  </style>
  <!-- FIREBASE SCRIPTS EN CONFIG -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">üè† Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">üìñ Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">üìú Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">üôè Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">üåü Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">üçΩÔ∏è Recepten</a>
</nav>

<div class="scheurkalender-wrapper">
  <div class="scheurkalender">
    <!-- SVG Scheurkalender achtergrond -->
    <svg class="scheurkalender-svg" viewBox="0 0 430 520">
      <rect x="20" y="60" width="390" height="410" rx="26" fill="#f7f6f4" stroke="#b2a278" stroke-width="6"/>
      <rect x="0" y="0" width="430" height="90" rx="7" fill="#39a4a9" stroke="#126672" stroke-width="3"/>
      <circle cx="85" cy="46" r="14" fill="#e3e8ed" stroke="#bbb" stroke-width="2.5"/>
      <circle cx="215" cy="36" r="14" fill="#e3e8ed" stroke="#bbb" stroke-width="2.5"/>
      <circle cx="345" cy="46" r="14" fill="#e3e8ed" stroke="#bbb" stroke-width="2.5"/>
      <ellipse cx="215" cy="515" rx="110" ry="12" fill="#e4dab3" fill-opacity="0.54"/>
    </svg>
    <div class="scheur-inhoud" id="kalender-inhoud">
      <div style="color:#bbb;text-align:center;font-size:1.2em;margin-top:90px;">Bezig met laden...</div>
    </div>
  </div>
</div>
<script>
  // Taalvelden
  const talen = [
    {code: 'NL', label: 'Vlaams', veld: ''},
    {code: 'EN', label: 'Engels', veld: 'EN'},
    {code: 'EL', label: 'Grieks', veld: 'EL'}
  ];
  let huidigeTaal = 'NL';
  function datumFirestoreId() {
    const d = new Date();
    let dag = (d.getDate() < 10 ? '0' : '') + d.getDate();
    let maand = ((d.getMonth() + 1) < 10 ? '0' : '') + (d.getMonth() + 1);
    let jaar = d.getFullYear();
    return '' + jaar + maand + dag;
  }
  function formatteerDatum(d, taal) {
    if (!d) return '';
    if (taal === 'EN') {
      const maanden = ["January","February","March","April","May","June","July","August","September","October","November","December"];
      let p = d.split('-');
      return maanden[parseInt(p[1])-1] + ' ' + parseInt(p[2],10) + ', ' + p[0];
    } else if (taal === 'EL') {
      const maanden = ["ŒôŒ±ŒΩŒøœÖŒ±œÅŒØŒøœÖ","Œ¶ŒµŒ≤œÅŒøœÖŒ±œÅŒØŒøœÖ","ŒúŒ±œÅœÑŒØŒøœÖ","ŒëœÄœÅŒπŒªŒØŒøœÖ","ŒúŒ±ŒêŒøœÖ","ŒôŒøœÖŒΩŒØŒøœÖ","ŒôŒøœÖŒªŒØŒøœÖ","ŒëœÖŒ≥ŒøœçœÉœÑŒøœÖ","Œ£ŒµœÄœÑŒµŒºŒ≤œÅŒØŒøœÖ","ŒüŒ∫œÑœâŒ≤œÅŒØŒøœÖ","ŒùŒøŒµŒºŒ≤œÅŒØŒøœÖ","ŒîŒµŒ∫ŒµŒºŒ≤œÅŒØŒøœÖ"];
      let p = d.split('-');
      return parseInt(p[2],10) + ' ' + maanden[parseInt(p[1])-1] + ' ' + p[0];
    } else {
      const maanden = ['januari','februari','maart','april','mei','juni','juli','augustus','september','oktober','november','december'];
      let p = d.split('-');
      return parseInt(p[2],10) + ' ' + maanden[parseInt(p[1])-1] + ' ' + p[0];
    }
  }
  function bepaalVastenClass(regel) {
    let tekst = (regel||'').toLowerCase();
    if (tekst.includes("vis")) return "dag-vis";
    if (tekst.includes("olie") || tekst.includes("wijn")) return "dag-oliewijn";
    if (tekst.includes("strenge")) return "dag-strikt";
    if (tekst.includes("strict")) return "dag-strikt";
    if (tekst.includes("vrij")) return "dag-vastenvrij";
    if (tekst.includes("free")) return "dag-vastenvrij";
    return "";
  }
  // UI aanmaken
  function renderKalender(data, taal) {
    const datum = data.Datum || '';
    const veld = (talen.find(t=>t.code===taal)||{}).veld;
    // Veldnamen bepalen per taal
    const heiligen = data["Heiligen "+taal]||data["Heiligen NL"]||"";
    const vasten = data["Vastenregel "+taal]||data["Vastenregel NL"]||"Vastenvrij";
    const symbool = data["Symbool"]||"";
    const epistel = data["Epistel Ref "+taal+" (netjes NL)"]||data["Epistel Ref "+taal]||"";
    const evangelie = data["Evangelie Ref "+taal+" (netjes NL)"]||data["Evangelie Ref "+taal]||"";
    const tip = data["Tip/Wens "+taal]||data["Tip/Wens NL"]||"";
    const vastenClass = bepaalVastenClass(vasten);

    return `
      <div class="taalknoppen">
        ${talen.map(t => `<button onclick="wisselTaal('${t.code}')" class="${taal===t.code?'selected':''}">${t.label}</button>`).join('')}
      </div>
      <div class="scheur-datum">${formatteerDatum(datum, taal)}</div>
      <div class="scheur-vasten ${vastenClass}">${vasten} ${symbool}</div>
      <div class="scheur-heiligen">${heiligen}</div>
      <div class="scheur-lezing"><b>Epistel:</b> ${epistel}</div>
      <div class="scheur-lezing"><b>Evangelie:</b> ${evangelie}</div>
      <div class="scheur-tip">${tip}</div>
    `;
  }
  // Laden uit Firestore
  let huidigeData = null;
  function toonDag() {
    const el = document.getElementById('kalender-inhoud');
    let docId = datumFirestoreId();
    db.collection("kalender2025").doc(docId).get().then(doc => {
      if (!doc.exists) {
        el.innerHTML = `<div style="margin-top:90px;text-align:center;">Geen kalenderdata voor vandaag (${docId})</div>`;
        return;
      }
      huidigeData = doc.data();
      el.innerHTML = renderKalender(huidigeData, huidigeTaal);
    }).catch(() => {
      el.innerHTML = `<div style="margin-top:90px;text-align:center;">Fout bij het laden van de kalenderdata.</div>`;
    });
  }
  function wisselTaal(nieuweTaal) {
    huidigeTaal = nieuweTaal;
    const el = document.getElementById('kalender-inhoud');
    if (huidigeData) {
      el.innerHTML = renderKalender(huidigeData, huidigeTaal);
    }
  }
  window.wisselTaal = wisselTaal;
  window.onload = toonDag;
</script>
</body>
</html>
