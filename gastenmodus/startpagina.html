<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Orthodoxeweg - Gastenmodus Startpagina</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #6f4e1a;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      text-decoration: underline;
    }
    .kalender-main {
      max-width: 860px;
      margin: 30px auto 60px auto;
      padding: 0 15px;
    }
    .kalender-container {
      position: relative;
      width: 650px;
      height: 820px;
      margin: 0 auto;
      filter: drop-shadow(0 9px 28px #ccb38c90);
      max-width: 97vw;
      max-height: 98vw;
      box-sizing: border-box;
      aspect-ratio: 650/820;
    }
    .kalender-container svg {
      width: 100%;
      height: 100%;
      display: block;
      max-width: 100%;
      max-height: 100%;
    }
    .kalender-inhoud {
      position: absolute;
      top: 12%;
      left: 13%;
      width: 74%;
      height: 72%;
      padding: 2vw 4vw 4vw 2vw;
      font-size: 1.15em;
      color: #3a2c17;
      overflow-y: auto;
      z-index: 2;
      background: transparent;
      text-align: left;
      box-sizing: border-box;
      word-break: break-word;
      max-height: 76vw;
    }
    .dag-vastenvrij  { color: #2c1f07; }
    .dag-vis         { color: #2969b0; }
    .dag-oliewijn    { color: #7a349b; }
    .dag-strikt      { color: #bb2222; }
    .taal-switch {
      text-align: right;
      margin-bottom: 10px;
      margin-top: 10px;
    }
    .taal-switch button {
      background: #e5ca93;
      border: 1px solid #c2a06a;
      color: #63490b;
      font-weight: bold;
      padding: 5px 14px;
      border-radius: 8px;
      font-size: 1em;
      margin-left: 7px;
      margin-right: 0;
      cursor: pointer;
      transition: background 0.3s;
    }
    .taal-switch button.active {
      background: #7a5f35;
      color: #fffbe4;
    }
    @media (max-width: 1024px) {
      .kalender-container { width: 99vw; height: auto; max-height: none; aspect-ratio: 650/820; }
      .kalender-inhoud { font-size: 1em; padding: 2vw 3vw 4vw 2vw; max-height: 76vw; }
    }
    @media (max-width: 700px) {
      .kalender-main { margin: 22px auto 32px auto; padding: 0 3vw; }
      .kalender-container { width: 99vw; height: auto; aspect-ratio: 650/820; margin-bottom: 8px; }
      .kalender-inhoud { width: 82%; left: 9%; top: 11%; height: 74%; font-size: 0.98em; padding: 3vw 3vw 2vw 3vw; max-height: 74vw; }
    }
    @media (max-width: 520px) {
      nav.menu a { padding: 7px 2px; font-size: 0.93em;}
      .kalender-main { margin: 14px auto 14vw auto; padding: 0 2vw; }
      .kalender-container { width: 100vw; min-width: 100vw; margin-bottom: 2vw; }
      .kalender-inhoud { font-size: 0.9em; top: 12%; left: 4%; width: 92%; height: 75%; padding: 4vw 3vw 2vw 3vw; max-height: 90vw; }
    }
  </style>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();

    // Bepaal de huidige datum als ID
    function pad(n) { return n < 10 ? '0' + n : n }
    function getTodayID() {
      const d = new Date();
      return d.getFullYear() + pad(d.getMonth() + 1) + pad(d.getDate());
    }
    function formatDatumNL(isoDatum) {
      if (!isoDatum) return "";
      const [yyyy, mm, dd] = isoDatum.split("-");
      const maanden = [
        "januari", "februari", "maart", "april", "mei", "juni",
        "juli", "augustus", "september", "oktober", "november", "december"
      ];
      return `${parseInt(dd)} ${maanden[parseInt(mm)-1]} ${yyyy}`;
    }
    function formatDatumEN(isoDatum) {
      if (!isoDatum) return "";
      const [yyyy, mm, dd] = isoDatum.split("-");
      const maanden = [
        "January", "February", "March", "April", "May", "June",
        "July", "August", "September", "October", "November", "December"
      ];
      return `${maanden[parseInt(mm)-1]} ${parseInt(dd)}, ${yyyy}`;
    }
    function formatDatumEL(isoDatum) {
      if (!isoDatum) return "";
      const [yyyy, mm, dd] = isoDatum.split("-");
      const maanden = [
        "ŒôŒ±ŒΩŒøœÖŒ±œÅŒØŒøœÖ", "Œ¶ŒµŒ≤œÅŒøœÖŒ±œÅŒØŒøœÖ", "ŒúŒ±œÅœÑŒØŒøœÖ", "ŒëœÄœÅŒπŒªŒØŒøœÖ", "ŒúŒ±ŒêŒøœÖ", "ŒôŒøœÖŒΩŒØŒøœÖ",
        "ŒôŒøœÖŒªŒØŒøœÖ", "ŒëœÖŒ≥ŒøœçœÉœÑŒøœÖ", "Œ£ŒµœÄœÑŒµŒºŒ≤œÅŒØŒøœÖ", "ŒüŒ∫œÑœâŒ≤œÅŒØŒøœÖ", "ŒùŒøŒµŒºŒ≤œÅŒØŒøœÖ", "ŒîŒµŒ∫ŒµŒºŒ≤œÅŒØŒøœÖ"
      ];
      return `${parseInt(dd)} ${maanden[parseInt(mm)-1]} ${yyyy}`;
    }

    // KALENDER LOGICA
    let gekozenTaal = "NL"; // Default Vlaams
    function setTaal(taal) {
      gekozenTaal = taal;
      laadKalender();
      document.querySelectorAll('.taal-switch button').forEach(btn => {
        btn.classList.toggle('active', btn.dataset.taal === taal);
      });
    }

    function laadKalender() {
      const docID = getTodayID();
      const el = document.getElementById('kalender-inhoud');
      db.collection("kalender2025").doc(docID).get().then(doc => {
        if (!doc.exists) {
          el.innerHTML = `<p>Geen kalenderdata voor vandaag (${docID})</p>`;
          return;
        }
        const data = doc.data();

        // Vastenregel kleur
        let vastenClass = "";
        let vastenregel = (data["Vastenregel NL"]||"").toLowerCase();
        if (vastenregel.includes("vis"))         vastenClass = "dag-vis";
        else if (vastenregel.includes("olie") || vastenregel.includes("wijn"))  vastenClass = "dag-oliewijn";
        else if (vastenregel.includes("vrij"))   vastenClass = "dag-vastenvrij";
        else if (vastenregel.trim() !== "")      vastenClass = "dag-strikt";

        // Datum in gekozen taal
        let datumLabel = "";
        if (gekozenTaal === "NL") datumLabel = formatDatumNL(data.Datum);
        else if (gekozenTaal === "EN") datumLabel = formatDatumEN(data.Datum);
        else if (gekozenTaal === "EL") datumLabel = formatDatumEL(data.Datum);

        // Data per taal
        let heiligen = data[`Heiligen ${gekozenTaal}`] || "";
        let vasten = data[`Vastenregel ${gekozenTaal}`] || "";
        let epistel = data[`Epistel Ref ${gekozenTaal} (netjes NL)`] || data[`Epistel Ref ${gekozenTaal}`] || "";
        let evangelie = data[`Evangelie Ref ${gekozenTaal} (netjes NL)`] || data[`Evangelie Ref ${gekozenTaal}`] || "";
        let tip = data[`Tip/Wens ${gekozenTaal}`] || "";
        let symbool = data.Symbool || "";

        el.innerHTML = `
          <h2 id="kalender-dag" class="${vastenClass}" style="margin:0 0 18px 0; font-size:2.2em; letter-spacing:1px; text-align:left;">
            ${datumLabel}
          </h2>
          <p><b>Heilige(n):</b> ${heiligen}</p>
          <p><b>Vasten:</b> ${vasten}</p>
          <p><b>Epistel:</b> ${epistel}</p>
          <p><b>Evangelie:</b> ${evangelie}</p>
          <p><b>Orthodoxe tip:</b> ${tip}</p>
          <p><b>Symbool:</b> ${symbool}</p>
          <hr>
          <p style="font-size:1.08em;color:#9d7c54;text-align:left;">
            <i>Elke dag dichter bij God!</i>
          </p>
        `;
      });
    }

    window.addEventListener("DOMContentLoaded", function() {
      laadKalender();
      // Taalkeuze knopjes
      document.querySelectorAll('.taal-switch button').forEach(btn => {
        btn.addEventListener('click', function() {
          setTaal(btn.dataset.taal);
        });
      });
    });
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">üè† Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">üìñ Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">üìú Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">üôè Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">üåü Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">üçΩÔ∏è Recepten</a>
</nav>
<div class="kalender-main">
  <div class="taal-switch">
    <span style="font-size:1.02em;">Taal:</span>
    <button class="active" data-taal="NL">üáßüá™ Vlaams</button>
    <button data-taal="EN">üá¨üáß Engels</button>
    <button data-taal="EL">üá¨üá∑ Grieks</button>
  </div>
  <div class="kalender-container">
    <svg viewBox="0 0 650 820" preserveAspectRatio="xMinYMin meet" style="position:absolute;left:0;top:0;z-index:0; width:100%; height:100%;">
      <defs>
        <radialGradient id="ringSilver" cx="50%" cy="40%" r="80%">
          <stop offset="0%" stop-color="#ffffff" />
          <stop offset="15%" stop-color="#e2e8ec" />
          <stop offset="50%" stop-color="#c3cace" />
          <stop offset="80%" stop-color="#959ba0" />
          <stop offset="100%" stop-color="#787c80" />
        </radialGradient>
        <radialGradient id="ringHighlight" cx="30%" cy="30%" r="60%">
          <stop offset="0%" stop-color="#ffffffcc" />
          <stop offset="100%" stop-color="#ffffff00" />
        </radialGradient>
      </defs>
      <rect x="56" y="90" width="540" height="670" rx="38" fill="#eee3c6" stroke="#e3d2a1" stroke-width="4"/>
      <rect x="36" y="54" width="540" height="670" rx="38" fill="#f3e6cc" stroke="#dcc897" stroke-width="4"/>
      <rect x="18" y="16" width="540" height="670" rx="38" fill="#faf8f1" stroke="#c2a06a" stroke-width="6"/>
      <ellipse cx="98" cy="52" rx="19" ry="11" fill="url(#ringSilver)" stroke="#adb5bd" stroke-width="3"/>
      <ellipse cx="244" cy="39" rx="19" ry="11" fill="url(#ringSilver)" stroke="#adb5bd" stroke-width="3"/>
      <ellipse cx="408" cy="52" rx="19" ry="11" fill="url(#ringSilver)" stroke="#adb5bd" stroke-width="3"/>
      <ellipse cx="98" cy="49" rx="8" ry="4" fill="url(#ringHighlight)" />
      <ellipse cx="244" cy="36" rx="8" ry="4" fill="url(#ringHighlight)" />
      <ellipse cx="408" cy="49" rx="8" ry="4" fill="url(#ringHighlight)" />
      <circle cx="98" cy="68" r="6" fill="#b8a17c"/>
      <circle cx="244" cy="56" r="6" fill="#b8a17c"/>
      <circle cx="408" cy="68" r="6" fill="#b8a17c"/>
    </svg>
    <div class="kalender-inhoud" id="kalender-inhoud">
      <p style="text-align:center;color:#a6a5a4;">Bezig met laden...</p>
    </div>
  </div>
</div>
</body>
</html>
