<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Orthodoxe Dagkalender</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #45361a;
      font-family: Arial, sans-serif;
      margin: 0; padding: 0;
      min-height: 100vh;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      text-decoration: underline;
    }
    .taal-keuze {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      margin: 36px auto 0 auto;
    }
    .taal-keuze button {
      background: #e2ce99;
      color: #513f1c;
      border: 1.5px solid #b19e77;
      border-radius: 7px;
      font-weight: bold;
      font-size: 1em;
      padding: 7px 17px;
      margin: 0 2px;
      cursor: pointer;
      box-shadow: 1px 2px 7px #dacaa655;
      transition: background .17s, color .17s, border .18s;
    }
    .taal-keuze button.selected {
      background: #7a5f35;
      color: #fffbe8;
      border: 2px solid #7a5f35;
    }
    .boek-wrapper {
      display: flex;
      justify-content: center;
      align-items: flex-start;
      min-height: 74vh;
      margin-top: 10px;
    }
    .boek-outer {
      position: relative;
      width: 900px;
      max-width: 99vw;
      height: 600px;
      max-height: 83vw;
      margin: 28px 0 0 0;
      background: none;
    }
    .boek-bg {
      position: absolute;
      top: 0; left: 0; width: 100%; height: 100%;
      z-index: 1;
      user-select: none;
      pointer-events: none;
      border-radius: 23px;
      box-shadow: 0 7px 42px #cab16b33, 0 1px 2px #fff2  ;
    }
    .boek {
      position: relative;
      display: flex;
      width: 100%;
      height: 100%;
      z-index: 2;
    }
    .boek-blad {
      background: #f9f5e8;
      border-radius: 21px 18px 20px 18px;
      box-shadow: 1px 6px 35px #b79c5c44, 0 1px 2px #fff6;
      width: 50%;
      height: 97%;
      padding: 42px 42px 34px 42px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      align-items: stretch;
      font-family: 'Georgia', serif;
      font-size: 1.22em;
      color: #3b2c14;
      position: relative;
      overflow: hidden;
    }
    .boek-blad.links {
      border-right: 2px solid #ecd8b5;
      background: linear-gradient(90deg, #f8eee1 89%, #e1c99f 100%);
      z-index: 3;
    }
    .boek-blad.rechts {
      border-left: 2px solid #ecd8b5;
      background: linear-gradient(-90deg, #f8eee1 89%, #e1c99f 100%);
      z-index: 4;
    }
    .boek-blad .heilige-icoon {
      margin: 18px auto 12px auto;
      width: 98px; height: 98px; border-radius: 50%;
      background: #f1e3c1;
      border: 2.7px solid #c6ad82;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
      box-shadow: 0 2px 7px #c3ab7b29;
    }
    .boek-blad .heilige-icoon img {
      width: 96px;
      height: 96px;
      border-radius: 50%;
      object-fit: cover;
      background: #fffbe0;
    }
    .boek-blad .heilige-titel {
      text-align: center;
      font-size: 1.07em;
      color: #856a34;
      font-weight: bold;
      letter-spacing: 1.2px;
      margin-bottom: 5px;
    }
    .boek-blad .heilige-tekst {
      text-align: center;
      font-size: 1em;
      color: #533f19;
      font-style: italic;
      margin: 12px 0 0 0;
      max-height: 220px;
      overflow-y: auto;
      padding: 4px 6px;
    }
    .boek-blad .boek-hoekje {
      position: absolute;
      bottom: 0;
      width: 58px; height: 58px;
      cursor: pointer;
      z-index: 10;
      opacity: .82;
      transition: opacity 0.14s;
    }
    .boek-blad .boek-hoekje:hover { opacity: 1; }
    .boek-blad.links .boek-hoekje { left: 0; }
    .boek-blad.rechts .boek-hoekje { right: 0; }
    .boek-blad .boek-hoekje svg { width: 100%; height: 100%; }
    .boek-blad .boek-hoekje text { pointer-events: none; user-select: none;}
    .boek-blad .dag-tip {
      position: absolute;
      bottom: 18px;
      left: 0; right: 0;
      text-align: center;
      font-size: 1.05em;
      font-style: italic;
      color: #a0843a;
      padding: 0 11px;
      z-index: 12;
    }
    .boek-blad .dag-tip span { font-style: italic; }
    .boek-blad .boek-datum {
      text-align: center;
      font-size: 1.6em;
      font-family: Georgia, serif;
      font-weight: bold;
      letter-spacing: 2px;
      margin-bottom: 6px;
      margin-top: 5px;
      color: #6a4d18;
    }
    .boek-blad .boek-vasten {
      text-align: center;
      font-size: 1.08em;
      color: #a85727;
      font-weight: bold;
      margin-bottom: 9px;
      margin-top: 8px;
    }
    .boek-blad .boek-heiligenlijst {
      text-align: left;
      font-size: 1em;
      color: #57492a;
      margin-bottom: 12px;
      background: #f5ead2;
      padding: 8px 13px;
      border-radius: 11px;
      min-height: 33px;
      box-shadow: 0 2px 12px #e5dabd11;
      font-family: Georgia, serif;
    }
    .boek-blad .boek-lezingen {
      margin: 0 0 7px 0;
      background: #f7f1e0;
      border-radius: 9px;
      padding: 8px 12px;
      color: #3b2c14;
      font-size: 1.03em;
      box-shadow: 0 1px 5px #c9c2b422;
    }
    .boek-blad .boek-lezingen strong { color: #7a5f35; }
    @media (max-width: 1200px) {
      .boek-outer { width: 99vw; height: 530px; }
      .boek-blad { padding: 18px 6vw 24px 6vw; font-size: 1em;}
    }
    @media (max-width: 870px) {
      .boek-outer { width: 99vw; height: 440px;}
      .boek-blad { padding: 14px 4vw 14px 4vw; font-size: 0.94em;}
    }
    @media (max-width: 620px) {
      .boek-outer { width: 99vw; height: 340px;}
      .boek-blad { padding: 8px 2vw 8px 2vw; font-size: 0.91em;}
      .taal-keuze { font-size: 0.93em;}
    }
    @media (max-width: 440px) {
      .boek-outer { width: 99vw; height: 235px;}
      .boek-blad { font-size: 0.83em; }
    }
  </style>
  <!-- FIREBASE SCRIPTS -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">üè† Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">üìñ Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">üìú Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">üôè Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">üåü Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">üçΩÔ∏è Recepten</a>
</nav>
<div class="taal-keuze" id="taal-keuze">
  <span>Taal:</span>
  <button class="selected" onclick="setTaal('NL')" id="btn-nl">üáßüá™ Vlaams</button>
  <button onclick="setTaal('EN')" id="btn-en">üá¨üáß Engels</button>
  <button onclick="setTaal('EL')" id="btn-el">üá¨üá∑ Grieks</button>
</div>
<div class="boek-wrapper">
  <div class="boek-outer">
    <!-- Sfeervolle achtergrond (optioneel) -->
    <!-- <img class="boek-bg" src="images/oud-boek-open-op-donkere-houten-achtergrond.avif" alt="" draggable="false"> -->
    <div class="boek">
      <div class="boek-blad links">
        <div class="heilige-titel" id="heilige-titel"></div>
        <div class="heilige-icoon" id="heilige-icoon" style="margin-top:9px;">
          <!-- Heiligen-icoon komt hier (later) -->
          <img id="heilige-img" src="" alt="" style="display:none;">
        </div>
        <div class="heilige-tekst" id="heilige-tekst"></div>
        <!-- Hoekje links -->
        <div class="boek-hoekje" id="hoekje-prev" style="left:0;bottom:0;">
          <svg width="58" height="58"><polygon points="0,58 58,58 0,0" fill="#e4dcc8" stroke="#c4b07c" stroke-width="2"/><text x="7" y="46" font-size="31" fill="#ad9150" font-family="Georgia,serif">&#8592;</text></svg>
        </div>
      </div>
      <div class="boek-blad rechts">
        <div class="boek-datum" id="boek-datum"></div>
        <div class="boek-vasten" id="boek-vasten"></div>
        <div class="boek-heiligenlijst" id="boek-heiligen"></div>
        <div class="boek-lezingen" id="boek-lezingen"></div>
        <!-- Tip onderaan -->
        <div class="dag-tip" id="dag-tip"></div>
        <!-- Hoekje rechts -->
        <div class="boek-hoekje" id="hoekje-next" style="right:0;bottom:0;">
          <svg width="58" height="58"><polygon points="58,58 0,58 58,0" fill="#e4dcc8" stroke="#c4b07c" stroke-width="2"/><text x="27" y="46" font-size="31" fill="#ad9150" font-family="Georgia,serif">&#8594;</text></svg>
        </div>
      </div>
    </div>
  </div>
</div>
<script>
  // ---------------- TAAL EN DATUM SETUP ----------------------
  let huidigTaal = 'NL';
  let huidigeDatum = new Date();
  function pad(n) { return n<10 ? '0'+n : n; }
  // VLAAMS formaat
  function naarDatumString(d) {
    return pad(d.getDate())+'-'+pad(d.getMonth()+1)+'-'+d.getFullYear();
  }
  function naarFeestdagString(d) {
    // Formaat MM-DD
    return pad(d.getMonth()+1)+'-'+pad(d.getDate());
  }

  // ---- TAAL KNOPPEN
  function setTaal(taal) {
    huidigTaal = taal;
    document.getElementById('btn-nl').classList.toggle('selected', taal==='NL');
    document.getElementById('btn-en').classList.toggle('selected', taal==='EN');
    document.getElementById('btn-el').classList.toggle('selected', taal==='EL');
    laadHeiligeVanDeDag(huidigeDatum);
    laadDagkalender(huidigeDatum);
  }

  // ---- NAVIGATIE
  document.getElementById('hoekje-prev').onclick = function() {
    huidigeDatum.setDate(huidigeDatum.getDate() - 1);
    laadHeiligeVanDeDag(huidigeDatum);
    laadDagkalender(huidigeDatum);
  }
  document.getElementById('hoekje-next').onclick = function() {
    huidigeDatum.setDate(huidigeDatum.getDate() + 1);
    laadHeiligeVanDeDag(huidigeDatum);
    laadDagkalender(huidigeDatum);
  }

  // ---- LAAD HEILIGE VAN DE DAG
  function laadHeiligeVanDeDag(d) {
    document.getElementById('heilige-titel').innerText = 'Laden...';
    document.getElementById('heilige-img').style.display = 'none';
    document.getElementById('heilige-tekst').innerText = '';
    const feestdag = naarFeestdagString(d);
    db.collection("heiligen").where("feestdag", "==", feestdag).get().then(snapshot => {
      if (snapshot.empty) {
        document.getElementById('heilige-titel').innerText = "Geen heilige van de dag gevonden";
        return;
      }
      const docs = snapshot.docs;
      // Random √©√©n kiezen indien meerdere
      const doc = docs[Math.floor(Math.random()*docs.length)].data();
      document.getElementById('heilige-titel').innerText = (doc.id || doc.naam || 'Heilige van de dag');
      // Later: Icoon? Zo ja, display img. Voorlopig geen icoon.
      // document.getElementById('heilige-img').src = doc.icoon_url || '';
      // document.getElementById('heilige-img').style.display = doc.icoon_url ? 'block' : 'none';
      // Levensverhaal volwassen
      document.getElementById('heilige-tekst').innerText = doc.levensverhaal_volwassenen || doc.beschrijving || '';
    });
  }

  // ---- LAAD DAGKALENDER
  function laadDagkalender(d) {
    // Boekdatum
    document.getElementById('boek-datum').innerText = naarDatumString(d);
    document.getElementById('boek-vasten').innerText = "Laden...";
    document.getElementById('boek-heiligen').innerText = "";
    document.getElementById('boek-lezingen').innerText = "";
    document.getElementById('dag-tip').innerText = "";
    const datumVlaams = naarDatumString(d);
    db.collection("kalender2025").where("Datum", "==", datumVlaams).get().then(snapshot => {
      if (snapshot.empty) {
        document.getElementById('boek-vasten').innerText = "Geen kalenderinfo gevonden";
        document.getElementById('boek-heiligen').innerText = "";
        document.getElementById('boek-lezingen').innerText = "";
        document.getElementById('dag-tip').innerText = "";
        return;
      }
      const data = snapshot.docs[0].data();
      // Vastenregel + symbool
      let vasten = data[`Vastenregel ${huidigTaal}`] || data["Vastenregel NL"] || "";
      let symbool = data["Symbool"] || "";
      document.getElementById('boek-vasten').innerHTML = `${vasten ? vasten : "Vastenvrij"}${symbool ? " &nbsp;"+symbool : ""}`;
      // Heiligenlijst
      document.getElementById('boek-heiligen').innerText = 
        data[`Heiligen ${huidigTaal}`] || data["Heiligen NL"] || "";
      // Lezingen
      let epistel = data[`Epistel Ref ${huidigTaal} (netjes NL)`] || data["Epistel Ref NL (netjes NL)"] || "";
      let evangelie = data[`Evangelie Ref ${huidigTaal} (netjes NL)`] || data["Evangelie Ref NL (netjes NL)"] || "";
      let lezingen = "";
      if (epistel) lezingen += `<strong>Apostellezing:</strong> ${epistel}<br>`;
      if (evangelie) lezingen += `<strong>Evangelie:</strong> ${evangelie}`;
      document.getElementById('boek-lezingen').innerHTML = lezingen;
      // Tip/wens
      let tip = data[`Tip/Wens ${huidigTaal}`] || data["Tip/Wens NL"] || "";
      document.getElementById('dag-tip').innerHTML = tip ? `<span>${tip}</span>` : "";
    });
  }

  // ---- INIT
  window.onload = function() {
    setTaal('NL');
    laadHeiligeVanDeDag(huidigeDatum);
    laadDagkalender(huidigeDatum);
  }
</script>
</body>
</html>
