<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Orthodoxeweg - Dagkalender</title>
  <style>
    body {
      background-color: #f5e9b8;
      color: #6f4e1a;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    nav.menu {
      background-color: #7a5f35;
      padding: 10px 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    nav.menu a {
      color: #f5e9b8;
      text-decoration: none;
      font-weight: 600;
      font-size: 16px;
      padding: 6px 12px;
      border-radius: 8px;
      transition: background-color 0.3s;
    }
    nav.menu a:hover {
      background-color: #5d4726;
      text-decoration: underline;
    }
    .taalkeuze {
      text-align: center;
      margin: 18px 0 6px 0;
    }
    .taalkeuze button {
      background: #eee3c6;
      color: #6f4e1a;
      border: 1.5px solid #b29467;
      border-radius: 6px;
      padding: 7px 20px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      margin: 0 6px;
      transition: background 0.2s;
    }
    .taalkeuze button.selected {
      background: #d3b87c;
      color: #3a2c17;
      border: 2px solid #85652a;
    }
    .boek-wrapper {
      width: 920px;
      max-width: 99vw;
      margin: 0 auto 30px auto;
      padding: 0 1vw;
      display: flex;
      justify-content: center;
      align-items: stretch;
    }
    .boek {
      display: flex;
      width: 900px;
      max-width: 100vw;
      min-height: 570px;
      background: linear-gradient(90deg, #ede4ca 48%, #fff9e1 52%);
      border-radius: 24px;
      box-shadow: 0 8px 40px #a88b5488;
      border: 3px solid #ceb27d;
      position: relative;
      overflow: visible;
    }
    .pagina {
      flex: 1 1 0%;
      padding: 44px 28px 30px 28px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
      min-height: 490px;
      position: relative;
      font-size: 1.14em;
    }
    .boek .pagina.links {
      border-right: 2px dashed #c6b187;
      background: linear-gradient(110deg, #ede4ca 90%, #fff7e2 100%);
      align-items: flex-end;
      box-shadow: 2px 0 12px #d2bc908a inset;
    }
    .boek .pagina.rechts {
      background: linear-gradient(-110deg, #fff9e1 90%, #ede4ca 100%);
      align-items: flex-start;
      box-shadow: -2px 0 12px #e5dab58a inset;
    }
    .hoek-linksonder, .hoek-rechtsonder {
      width: 50px; height: 40px;
      position: absolute; z-index: 2;
      opacity: 0.13; cursor: pointer; transition: opacity 0.2s;
      bottom: -18px;
    }
    .hoek-linksonder { left: -16px; transform: none; }
    .hoek-rechtsonder { right: -14px; transform: scaleX(-1); }
    .hoek-linksonder:hover, .hoek-rechtsonder:hover { opacity: 0.38; }
    .boek h2 {
      font-family: 'Georgia', serif;
      font-size: 2em;
      margin: 0 0 10px 0;
      color: #745d35;
      text-align: center;
      letter-spacing: 2px;
    }
    .boek .heilige-foto {
      width: 120px; height: 140px;
      object-fit: contain;
      display: block;
      margin: 0 auto 18px auto;
      background: #f4e8d5;
      border-radius: 12px;
      box-shadow: 0 1px 8px #d3be9e63;
      border: 1.5px solid #d8caad;
    }
    .boek .heilige-naam {
      font-weight: bold;
      color: #664b1c;
      text-align: center;
      margin-bottom: 8px;
      font-size: 1.18em;
      letter-spacing: 1px;
    }
    .boek .heilige-levensverhaal {
      font-size: 0.97em;
      line-height: 1.36;
      color: #3a2c17;
      max-height: 240px;
      overflow-y: auto;
      margin-top: 10px;
      padding-right: 5px;
      text-align: left;
    }
    .boek .dagkalender-datum {
      font-family: 'Georgia', serif;
      font-size: 2em;
      margin-bottom: 10px;
      color: #85652a;
      text-align: left;
      letter-spacing: 1px;
    }
    .boek .vastenregel-regel {
      margin: 0 0 18px 0;
      font-weight: 600;
      font-size: 1.10em;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .boek .vastenregel-symbool {
      font-size: 1.65em;
      margin-left: 7px;
      vertical-align: middle;
    }
    .boek .heiligenrij {
      margin-bottom: 18px;
      color: #725721;
      font-size: 1.04em;
      font-weight: 600;
    }
    .boek .lezingblok {
      margin-bottom: 12px;
      color: #444;
      background: #f6edd7;
      padding: 9px 15px 7px 15px;
      border-radius: 8px;
      font-size: 1.06em;
      box-shadow: 0 2px 8px #e3d6a523;
    }
    .boek .lezingblok b {
      color: #a78225;
      font-size: 1.04em;
    }
    .boek .tip-blok {
      position: absolute;
      left: 30px;
      right: 30px;
      bottom: 32px;
      background: #f7ecd1;
      border-radius: 10px;
      padding: 15px 22px 15px 22px;
      font-size: 1.13em;
      color: #a78225;
      text-align: center;
      font-style: italic;
      box-shadow: 0 2px 10px #d8c48c22;
      min-height: 30px;
    }
    @media (max-width: 1024px) {
      .boek-wrapper, .boek { width: 99vw; min-width: 0; max-width: 100vw; }
      .boek { min-height: 0; }
    }
    @media (max-width: 900px) {
      .boek { flex-direction: column; min-height: 0; width: 99vw; }
      .pagina { min-height: 240px; padding: 26px 10vw 30px 10vw; }
      .boek .tip-blok { left: 12vw; right: 12vw; bottom: 18px;}
    }
    @media (max-width: 650px) {
      .boek-wrapper, .boek { width: 100vw; }
      .pagina { font-size: 0.98em; padding: 18px 4vw 16px 4vw; }
      .boek .tip-blok { left: 4vw; right: 4vw; font-size:1em; }
    }
  </style>
  <!-- FIREBASE SCRIPTS EN CONFIG -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
  <script>
    // Firebase config
    const firebaseConfig = {
      apiKey: "AIzaSyBG1iQBmruHUZI1OeW8RgbJ_TPit_7a2LQ",
      authDomain: "orthodoxeweg.firebaseapp.com",
      projectId: "orthodoxeweg",
      storageBucket: "orthodoxeweg.appspot.com",
      messagingSenderId: "408582263618",
      appId: "1:408582263618:web:0a20f4bf0704989d3ceedb",
      measurementId: "G-C942F2NYQV"
    };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
  </script>
</head>
<body>
<nav class="menu">
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/startpagina.html">üè† Home</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/catechese/catechese.html">üìñ Catechese</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/psalmen/psalmen.html">üìú Psalmen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/gebeden.html">üôè Gebeden</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/gebeden/geloofsbelijdenis.html">‚úù Geloofsbelijdenis</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/heiligen/heiligen.html">üåü Heiligen</a>
  <a href="https://kathy-torfs.github.io/Orthodoxeweg/gastenmodus/menu/recepten.html">üçΩÔ∏è Recepten</a>
</nav>

<div class="taalkeuze">
  <button id="btn-vlaams" class="selected">üáßüá™ Vlaams</button>
  <button id="btn-engels">üá¨üáß English</button>
  <button id="btn-grieks">üá¨üá∑ ŒïŒªŒªŒ∑ŒΩŒπŒ∫Œ¨</button>
</div>

<div class="boek-wrapper">
  <div class="boek">
    <!-- PAGINA LINKS: Heilige van de dag -->
    <div class="pagina links" id="boek-links">
      <div id="heilige-inhoud">
        <div style="color:#a6a5a4;text-align:center;">Bezig met laden...</div>
      </div>
    </div>
    <!-- PAGINA RECHTS: Dagkalender -->
    <div class="pagina rechts" id="boek-rechts">
      <div id="dagkalender-inhoud">
        <div style="color:#a6a5a4;text-align:center;">Bezig met laden...</div>
      </div>
      <div class="tip-blok" id="dagkalender-tip"></div>
    </div>
    <!-- Hoekje linksonder voor 'vorige dag' -->
    <img src="https://upload.wikimedia.org/wikipedia/commons/7/7e/Page-corner-fold.png" class="hoek-linksonder" alt="Vorige dag" title="Vorige dag" id="vorigeDag">
    <!-- Hoekje rechtsonder voor 'volgende dag' -->
    <img src="https://upload.wikimedia.org/wikipedia/commons/7/7e/Page-corner-fold.png" class="hoek-rechtsonder" alt="Volgende dag" title="Volgende dag" id="volgendeDag">
  </div>
</div>

<script>
  // Taal-setup
  let huidigeTaal = "vlaams"; // "vlaams", "engels", "grieks"

  // Bijhouden van de actieve dag (initieel: vandaag)
  let actieveDatum = new Date();

  // Daghoekjes
  document.getElementById("vorigeDag").onclick = function() {
    actieveDatum.setDate(actieveDatum.getDate() - 1);
    laadAlles();
  }
  document.getElementById("volgendeDag").onclick = function() {
    actieveDatum.setDate(actieveDatum.getDate() + 1);
    laadAlles();
  }

  // Taalkeuze
  document.getElementById("btn-vlaams").onclick = function() { huidigeTaal = "vlaams"; setTaal(); }
  document.getElementById("btn-engels").onclick = function() { huidigeTaal = "engels"; setTaal(); }
  document.getElementById("btn-grieks").onclick = function() { huidigeTaal = "grieks"; setTaal(); }

  function setTaal() {
    document.querySelectorAll('.taalkeuze button').forEach(btn => btn.classList.remove('selected'));
    document.getElementById("btn-vlaams").classList.toggle('selected', huidigeTaal === "vlaams");
    document.getElementById("btn-engels").classList.toggle('selected', huidigeTaal === "engels");
    document.getElementById("btn-grieks").classList.toggle('selected', huidigeTaal === "grieks");
    laadAlles();
  }

  function pad(n) { return n < 10 ? '0' + n : n; }

  function laadAlles() {
    // Kalenderformaat voor rechts (yyyy-mm-dd)
    const jaar = actieveDatum.getFullYear();
    const maand = pad(actieveDatum.getMonth() + 1);
    const dag = pad(actieveDatum.getDate());
    const kalenderId = `${jaar}${maand}${dag}`;  // bv 20250613
    const feestdag = `${dag}-${maand}`;          // bv 13-06

    // -------------------------------
    // ---- LINKS: Heilige van de dag ---- 
const heiligeContainer = document.getElementById('heilige-inhoud');
heiligeContainer.innerHTML = '<div style="color:#a6a5a4;text-align:center;">Bezig met laden...</div>';
db.collection("heiligen").where("feestdag", "==", feestdag).get().then(snapshot => {
  if (snapshot.empty) {
    heiligeContainer.innerHTML = `
      <div style="color:#b8b7b4;text-align:center;margin-top:22px;font-size:1.15em">
        <br>Geen heilige van de dag gevonden.<br>
        <span style="font-size:3em;">‚úùÔ∏è</span>
      </div>`;
    return;
  }
  // Random heilige als er meerdere zijn
  const docs = snapshot.docs;
  const data = docs[Math.floor(Math.random() * docs.length)].data();
  let naam = "";
  let levensverhaal = "";
  // Voorlopig geen foto: plaats een pictogram (gebedssnoer)
  let fotoUrl = ""; // later vervangen door upload of veld
  let pictogram = "üìø";

  if (huidigeTaal === "engels") {
    naam = data.naam_en || "";
    levensverhaal = data.levensverhaal_en || "";
  } else if (huidigeTaal === "grieks") {
    naam = data.naam_el || "";
    levensverhaal = data.levensverhaal_el || "";
  } else {
    naam = data.naam_nl || data.naam || data.id || "Heilige";
    levensverhaal = data.levensverhaal_nl || data.levensverhaal_volwassenen || "";
  }

  // Enkel tonen als ze bestaan (geen fallback!)
  if (!naam && !levensverhaal) {
    heiligeContainer.innerHTML = `
      <div style="color:#b8b7b4;text-align:center;margin-top:22px;font-size:1.15em">
        <br>Geen heilige van de dag gevonden.<br>
        <span style="font-size:3em;">‚úùÔ∏è</span>
      </div>`;
    return;
  }

  heiligeContainer.innerHTML = `
    <div class="heilige-naam">${naam}</div>
    <div style="font-size:2.7em; text-align:center; margin:14px 0 13px 0;">${pictogram}</div>
    <div class="heilige-levensverhaal">${levensverhaal}</div>
  `;
});

        return;
      }
      // Random heilige als er meerdere zijn
      const docs = snapshot.docs;
      const data = docs[Math.floor(Math.random() * docs.length)].data();
      let naam = "";
      let levensverhaal = "";
      if (huidigeTaal === "vlaams") {
        naam = data.naam_nl || "Geen vertaling beschikbaar";
        levensverhaal = data.levensverhaal_nl || "Er is momenteel nog geen vertaling beschikbaar.";
      } else if (huidigeTaal === "engels") {
        naam = data.naam_en || (data.naam_nl ? "(No English translation available)" : "No translation available");
        levensverhaal = data.levensverhaal_en || "There is currently no translation available.";
      } else if (huidigeTaal === "grieks") {
        naam = data.naam_el || (data.naam_nl ? "(Geen Griekse vertaling beschikbaar)" : "ŒöŒ±ŒºŒØŒ± Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ∑ ŒºŒµœÑŒ¨œÜœÅŒ±œÉŒ∑.");
        levensverhaal = data.levensverhaal_el || "Œ†œÅŒøœÇ œÑŒø œÄŒ±œÅœåŒΩ Œ¥ŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ∑ ŒºŒµœÑŒ¨œÜœÅŒ±œÉŒ∑.";
      }
      let fotoUrl = data.foto_url || "https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Byzantine_icon_of_a_saint_%28unknown%29.jpg/120px-Byzantine_icon_of_a_saint_%28unknown%29.jpg";
      heiligeContainer.innerHTML = `
        <div class="heilige-naam">${naam}</div>
        <img src="${fotoUrl}" class="heilige-foto" alt="Heilige icoon">
        <div class="heilige-levensverhaal">${levensverhaal}</div>
      `;
    });

    // -------------------------------
    // RECHTS: Dagkalender
    // -------------------------------
    const kalenderContainer = document.getElementById('dagkalender-inhoud');
    const tipBlok = document.getElementById('dagkalender-tip');
    kalenderContainer.innerHTML = '<div style="color:#a6a5a4;text-align:center;">Bezig met laden...</div>';
    tipBlok.innerHTML = "";
    db.collection("kalender2025").doc(kalenderId).get().then(doc => {
      if (!doc.exists) {
        kalenderContainer.innerHTML = '<div style="color:#b8b7b4;text-align:center;margin-top:60px;font-size:1.1em">Geen kalenderinfo gevonden.</div>';
        tipBlok.innerHTML = "";
        return;
      }
      const data = doc.data();

      // Vastenregel & symbool, met automatische fallback
      let vasten = "";
      if (huidigeTaal === "vlaams") {
        vasten = data["Vastenregel NL"] || "Vastenvrij";
      } else if (huidigeTaal === "engels") {
        vasten = data["Vastenregel EN"] || (data["Vastenregel NL"] ? "Fasting: no translation available" : "Fast free");
      } else if (huidigeTaal === "grieks") {
        vasten = data["Vastenregel EL"] || (data["Vastenregel NL"] ? "ŒùŒ∑œÉœÑŒµŒØŒ±: Œ¥ŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ ŒºŒµœÑŒ¨œÜœÅŒ±œÉŒ∑" : "ŒïŒªŒµœçŒ∏ŒµœÅŒ∑ ŒΩŒ∑œÉœÑŒµŒØŒ±");
      }
      let symbool = data["Symbool"] || "‚úùÔ∏è";
      let vastenRegelBlok = `<span>${vasten}</span>`;
      if (symbool) vastenRegelBlok += `<span class="vastenregel-symbool">${symbool}</span>`;

      // Datum als Vlaams
      let datumTekst = `${dag}-${maand}-${jaar}`;

      // Heiligen van de dag
      let heiligen = "";
      if (huidigeTaal === "vlaams") {
        heiligen = data["Heiligen NL"] || "Geen heiligen van de dag beschikbaar.";
      } else if (huidigeTaal === "engels") {
        heiligen = data["Heiligen EN"] || "No translation available for today‚Äôs saints.";
      } else if (huidigeTaal === "grieks") {
        heiligen = data["Heiligen EL"] || "ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ∑ ŒºŒµœÑŒ¨œÜœÅŒ±œÉŒ∑ Œ≥ŒπŒ± œÑŒøœÖœÇ œÉŒ∑ŒºŒµœÅŒπŒΩŒøœçœÇ Œ±Œ≥ŒØŒøœÖœÇ.";
      }

      // Lezingen
      let epistel = "", evangelie = "";
      if (huidigeTaal === "vlaams") {
        epistel = data["Epistel Ref NL (netjes NL)"] || "Er is momenteel nog geen vertaling beschikbaar.";
        evangelie = data["Evangelie Ref NL (netjes NL)"] || "Er is momenteel nog geen vertaling beschikbaar.";
      } else if (huidigeTaal === "engels") {
        epistel = data["Epistel Ref EN (netjes NL)"] || "No translation available.";
        evangelie = data["Evangelie Ref EN (netjes NL)"] || "No translation available.";
      } else if (huidigeTaal === "grieks") {
        epistel = data["Epistel Ref EL (netjes NL)"] || "ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ∑ ŒºŒµœÑŒ¨œÜœÅŒ±œÉŒ∑.";
        evangelie = data["Evangelie Ref EL (netjes NL)"] || "ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ Œ¥ŒπŒ±Œ∏Œ≠œÉŒπŒºŒ∑ ŒºŒµœÑŒ¨œÜœÅŒ±œÉŒ∑.";
      }

      // Tip/Wens
      let tip = "";
      if (huidigeTaal === "vlaams") {
        tip = data["Tip/Wens NL"] || "Geen tip voor deze dag.";
      } else if (huidigeTaal === "engels") {
        tip = data["Tip/Wens EN"] || "No tip for this day.";
      } else if (huidigeTaal === "grieks") {
        tip = data["Tip/Wens EL"] || "ŒîŒµŒΩ œÖœÄŒ¨œÅœáŒµŒπ œÉœÖŒºŒ≤ŒøœÖŒªŒÆ Œ≥ŒπŒ± Œ±œÖœÑŒÆŒΩ œÑŒ∑ŒΩ Œ∑ŒºŒ≠œÅŒ±.";
      }

      // HTML opbouwen
      kalenderContainer.innerHTML = `
        <div class="dagkalender-datum">${datumTekst}</div>
        <div class="vastenregel-regel">${vastenRegelBlok}</div>
        <div class="heiligenrij">${heiligen}</div>
        <div class="lezingblok"><b>Epistel:</b> ${epistel}</div>
        <div class="lezingblok"><b>Evangelie:</b> ${evangelie}</div>
      `;
      tipBlok.innerHTML = tip;
    });
  }

  // Initieel laden
  laadAlles();
</script>

</body>
</html>
